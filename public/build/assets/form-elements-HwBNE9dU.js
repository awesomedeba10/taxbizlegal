var Tf=Object.defineProperty;var _f=(t,e,n)=>e in t?Tf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yf=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var V=(t,e,n)=>_f(t,typeof e!="symbol"?e+"":e,n);import{c as Vt,g as bc}from"./_commonjsHelpers-Cpj98o6Y.js";import{i as Yt,b as Qn,r as qt,a as Ct,f as bf,S as Ds}from"./admin-N76ZCFkj.js";import"./bootstrap.esm-5AK_f7la.js";var ib=yf(($e,Ve)=>{var fn=Array.isArray;function Ic(t){return t}var If="[object AsyncFunction]",Af="[object Function]",vf="[object GeneratorFunction]",Rf="[object Proxy]";function $a(t){if(!Yt(t))return!1;var e=Qn(t);return e==Af||e==vf||e==If||e==Rf}var Vi=qt["__core-js_shared__"],bl=function(){var t=/[^.]+$/.exec(Vi&&Vi.keys&&Vi.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Of(t){return!!bl&&bl in t}var wf=Function.prototype,Sf=wf.toString;function pn(t){if(t!=null){try{return Sf.call(t)}catch{}try{return t+""}catch{}}return""}var Nf=/[\\^$.*+?()[\]{}|]/g,Lf=/^\[object .+?Constructor\]$/,Cf=Function.prototype,Df=Object.prototype,Mf=Cf.toString,xf=Df.hasOwnProperty,Pf=RegExp("^"+Mf.call(xf).replace(Nf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qf(t){if(!Yt(t)||Of(t))return!1;var e=$a(t)?Pf:Lf;return e.test(pn(t))}function Bf(t,e){return t==null?void 0:t[e]}function gn(t,e){var n=Bf(t,e);return qf(n)?n:void 0}var fa=gn(qt,"WeakMap"),Il=Object.create,Gf=function(){function t(){}return function(e){if(!Yt(e))return{};if(Il)return Il(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function Uf(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function kf(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ff=800,$f=16,Vf=Date.now;function Hf(t){var e=0,n=0;return function(){var r=Vf(),s=$f-(r-n);if(n=r,s>0){if(++e>=Ff)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function jf(t){return function(){return t}}var Ms=function(){try{var t=gn(Object,"defineProperty");return t({},"",{}),t}catch{}}(),zf=Ms?function(t,e){return Ms(t,"toString",{configurable:!0,enumerable:!1,value:jf(e),writable:!0})}:Ic,Wf=Hf(zf);function Yf(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}var Xf=9007199254740991,Kf=/^(?:0|[1-9]\d*)$/;function Ac(t,e){var n=typeof t;return e=e??Xf,!!e&&(n=="number"||n!="symbol"&&Kf.test(t))&&t>-1&&t%1==0&&t<e}function Va(t,e,n){e=="__proto__"&&Ms?Ms(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Br(t,e){return t===e||t!==t&&e!==e}var Zf=Object.prototype,Qf=Zf.hasOwnProperty;function vc(t,e,n){var r=t[e];(!(Qf.call(t,e)&&Br(r,n))||n===void 0&&!(e in t))&&Va(t,e,n)}function Jf(t,e,n,r){var s=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var l=e[i],o=void 0;o===void 0&&(o=t[l]),s?Va(n,l,o):vc(n,l,o)}return n}var Al=Math.max;function eh(t,e,n){return e=Al(e===void 0?t.length-1:e,0),function(){for(var r=arguments,s=-1,i=Al(r.length-e,0),a=Array(i);++s<i;)a[s]=r[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=r[s];return l[e]=n(a),Uf(t,this,l)}}function th(t,e){return Wf(eh(t,e,Ic),t+"")}var nh=9007199254740991;function Rc(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=nh}function Fs(t){return t!=null&&Rc(t.length)&&!$a(t)}function rh(t,e,n){if(!Yt(n))return!1;var r=typeof e;return(r=="number"?Fs(n)&&Ac(e,n.length):r=="string"&&e in n)?Br(n[e],t):!1}function sh(t){return th(function(e,n){var r=-1,s=n.length,i=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,a&&rh(n[0],n[1],a)&&(i=s<3?void 0:i,s=1),e=Object(e);++r<s;){var l=n[r];l&&t(e,l,r,i)}return e})}var ih=Object.prototype;function Ha(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||ih;return t===n}function ah(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var lh="[object Arguments]";function vl(t){return Ct(t)&&Qn(t)==lh}var Oc=Object.prototype,oh=Oc.hasOwnProperty,ch=Oc.propertyIsEnumerable,ha=vl(function(){return arguments}())?vl:function(t){return Ct(t)&&oh.call(t,"callee")&&!ch.call(t,"callee")};function uh(){return!1}var wc=typeof $e=="object"&&$e&&!$e.nodeType&&$e,Rl=wc&&typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,fh=Rl&&Rl.exports===wc,Ol=fh?qt.Buffer:void 0,hh=Ol?Ol.isBuffer:void 0,Nr=hh||uh,dh="[object Arguments]",ph="[object Array]",gh="[object Boolean]",mh="[object Date]",Eh="[object Error]",Th="[object Function]",_h="[object Map]",yh="[object Number]",bh="[object Object]",Ih="[object RegExp]",Ah="[object Set]",vh="[object String]",Rh="[object WeakMap]",Oh="[object ArrayBuffer]",wh="[object DataView]",Sh="[object Float32Array]",Nh="[object Float64Array]",Lh="[object Int8Array]",Ch="[object Int16Array]",Dh="[object Int32Array]",Mh="[object Uint8Array]",xh="[object Uint8ClampedArray]",Ph="[object Uint16Array]",qh="[object Uint32Array]",de={};de[Sh]=de[Nh]=de[Lh]=de[Ch]=de[Dh]=de[Mh]=de[xh]=de[Ph]=de[qh]=!0;de[dh]=de[ph]=de[Oh]=de[gh]=de[wh]=de[mh]=de[Eh]=de[Th]=de[_h]=de[yh]=de[bh]=de[Ih]=de[Ah]=de[vh]=de[Rh]=!1;function Bh(t){return Ct(t)&&Rc(t.length)&&!!de[Qn(t)]}function ja(t){return function(e){return t(e)}}var Sc=typeof $e=="object"&&$e&&!$e.nodeType&&$e,Ar=Sc&&typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,Gh=Ar&&Ar.exports===Sc,Hi=Gh&&bf.process,zn=function(){try{var t=Ar&&Ar.require&&Ar.require("util").types;return t||Hi&&Hi.binding&&Hi.binding("util")}catch{}}(),wl=zn&&zn.isTypedArray,za=wl?ja(wl):Bh,Uh=Object.prototype,kh=Uh.hasOwnProperty;function Nc(t,e){var n=fn(t),r=!n&&ha(t),s=!n&&!r&&Nr(t),i=!n&&!r&&!s&&za(t),a=n||r||s||i,l=a?ah(t.length,String):[],o=l.length;for(var u in t)(e||kh.call(t,u))&&!(a&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ac(u,o)))&&l.push(u);return l}function Lc(t,e){return function(n){return t(e(n))}}var Fh=Lc(Object.keys,Object),$h=Object.prototype,Vh=$h.hasOwnProperty;function Hh(t){if(!Ha(t))return Fh(t);var e=[];for(var n in Object(t))Vh.call(t,n)&&n!="constructor"&&e.push(n);return e}function jh(t){return Fs(t)?Nc(t):Hh(t)}function zh(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Wh=Object.prototype,Yh=Wh.hasOwnProperty;function Xh(t){if(!Yt(t))return zh(t);var e=Ha(t),n=[];for(var r in t)r=="constructor"&&(e||!Yh.call(t,r))||n.push(r);return n}function Cc(t){return Fs(t)?Nc(t,!0):Xh(t)}var Lr=gn(Object,"create");function Kh(){this.__data__=Lr?Lr(null):{},this.size=0}function Zh(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Qh="__lodash_hash_undefined__",Jh=Object.prototype,ed=Jh.hasOwnProperty;function td(t){var e=this.__data__;if(Lr){var n=e[t];return n===Qh?void 0:n}return ed.call(e,t)?e[t]:void 0}var nd=Object.prototype,rd=nd.hasOwnProperty;function sd(t){var e=this.__data__;return Lr?e[t]!==void 0:rd.call(e,t)}var id="__lodash_hash_undefined__";function ad(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Lr&&e===void 0?id:e,this}function hn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}hn.prototype.clear=Kh;hn.prototype.delete=Zh;hn.prototype.get=td;hn.prototype.has=sd;hn.prototype.set=ad;function ld(){this.__data__=[],this.size=0}function $s(t,e){for(var n=t.length;n--;)if(Br(t[n][0],e))return n;return-1}var od=Array.prototype,cd=od.splice;function ud(t){var e=this.__data__,n=$s(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():cd.call(e,n,1),--this.size,!0}function fd(t){var e=this.__data__,n=$s(e,t);return n<0?void 0:e[n][1]}function hd(t){return $s(this.__data__,t)>-1}function dd(t,e){var n=this.__data__,r=$s(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Bt(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Bt.prototype.clear=ld;Bt.prototype.delete=ud;Bt.prototype.get=fd;Bt.prototype.has=hd;Bt.prototype.set=dd;var Cr=gn(qt,"Map");function pd(){this.size=0,this.__data__={hash:new hn,map:new(Cr||Bt),string:new hn}}function gd(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Vs(t,e){var n=t.__data__;return gd(e)?n[typeof e=="string"?"string":"hash"]:n.map}function md(t){var e=Vs(this,t).delete(t);return this.size-=e?1:0,e}function Ed(t){return Vs(this,t).get(t)}function Td(t){return Vs(this,t).has(t)}function _d(t,e){var n=Vs(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function mn(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mn.prototype.clear=pd;mn.prototype.delete=md;mn.prototype.get=Ed;mn.prototype.has=Td;mn.prototype.set=_d;function yd(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Dc=Lc(Object.getPrototypeOf,Object),bd="[object Object]",Id=Function.prototype,Ad=Object.prototype,Mc=Id.toString,vd=Ad.hasOwnProperty,Rd=Mc.call(Object);function Od(t){if(!Ct(t)||Qn(t)!=bd)return!1;var e=Dc(t);if(e===null)return!0;var n=vd.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Mc.call(n)==Rd}function wd(){this.__data__=new Bt,this.size=0}function Sd(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Nd(t){return this.__data__.get(t)}function Ld(t){return this.__data__.has(t)}var Cd=200;function Dd(t,e){var n=this.__data__;if(n instanceof Bt){var r=n.__data__;if(!Cr||r.length<Cd-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new mn(r)}return n.set(t,e),this.size=n.size,this}function It(t){var e=this.__data__=new Bt(t);this.size=e.size}It.prototype.clear=wd;It.prototype.delete=Sd;It.prototype.get=Nd;It.prototype.has=Ld;It.prototype.set=Dd;var xc=typeof $e=="object"&&$e&&!$e.nodeType&&$e,Sl=xc&&typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,Md=Sl&&Sl.exports===xc,Nl=Md?qt.Buffer:void 0,Ll=Nl?Nl.allocUnsafe:void 0;function Pc(t,e){if(e)return t.slice();var n=t.length,r=Ll?Ll(n):new t.constructor(n);return t.copy(r),r}function xd(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[s++]=a)}return i}function Pd(){return[]}var qd=Object.prototype,Bd=qd.propertyIsEnumerable,Cl=Object.getOwnPropertySymbols,Gd=Cl?function(t){return t==null?[]:(t=Object(t),xd(Cl(t),function(e){return Bd.call(t,e)}))}:Pd;function Ud(t,e,n){var r=e(t);return fn(t)?r:yd(r,n(t))}function da(t){return Ud(t,jh,Gd)}var pa=gn(qt,"DataView"),ga=gn(qt,"Promise"),ma=gn(qt,"Set"),Dl="[object Map]",kd="[object Object]",Ml="[object Promise]",xl="[object Set]",Pl="[object WeakMap]",ql="[object DataView]",Fd=pn(pa),$d=pn(Cr),Vd=pn(ga),Hd=pn(ma),jd=pn(fa),at=Qn;(pa&&at(new pa(new ArrayBuffer(1)))!=ql||Cr&&at(new Cr)!=Dl||ga&&at(ga.resolve())!=Ml||ma&&at(new ma)!=xl||fa&&at(new fa)!=Pl)&&(at=function(t){var e=Qn(t),n=e==kd?t.constructor:void 0,r=n?pn(n):"";if(r)switch(r){case Fd:return ql;case $d:return Dl;case Vd:return Ml;case Hd:return xl;case jd:return Pl}return e});var zd=Object.prototype,Wd=zd.hasOwnProperty;function Yd(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Wd.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var xs=qt.Uint8Array;function Wa(t){var e=new t.constructor(t.byteLength);return new xs(e).set(new xs(t)),e}function Xd(t,e){var n=Wa(t.buffer);return new t.constructor(n,t.byteOffset,t.byteLength)}var Kd=/\w*$/;function Zd(t){var e=new t.constructor(t.source,Kd.exec(t));return e.lastIndex=t.lastIndex,e}var Bl=Ds?Ds.prototype:void 0,Gl=Bl?Bl.valueOf:void 0;function Qd(t){return Gl?Object(Gl.call(t)):{}}function qc(t,e){var n=e?Wa(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Jd="[object Boolean]",ep="[object Date]",tp="[object Map]",np="[object Number]",rp="[object RegExp]",sp="[object Set]",ip="[object String]",ap="[object Symbol]",lp="[object ArrayBuffer]",op="[object DataView]",cp="[object Float32Array]",up="[object Float64Array]",fp="[object Int8Array]",hp="[object Int16Array]",dp="[object Int32Array]",pp="[object Uint8Array]",gp="[object Uint8ClampedArray]",mp="[object Uint16Array]",Ep="[object Uint32Array]";function Tp(t,e,n){var r=t.constructor;switch(e){case lp:return Wa(t);case Jd:case ep:return new r(+t);case op:return Xd(t);case cp:case up:case fp:case hp:case dp:case pp:case gp:case mp:case Ep:return qc(t,n);case tp:return new r;case np:case ip:return new r(t);case rp:return Zd(t);case sp:return new r;case ap:return Qd(t)}}function Bc(t){return typeof t.constructor=="function"&&!Ha(t)?Gf(Dc(t)):{}}var _p="[object Map]";function yp(t){return Ct(t)&&at(t)==_p}var Ul=zn&&zn.isMap,bp=Ul?ja(Ul):yp,Ip="[object Set]";function Ap(t){return Ct(t)&&at(t)==Ip}var kl=zn&&zn.isSet,vp=kl?ja(kl):Ap,Rp=1,Gc="[object Arguments]",Op="[object Array]",wp="[object Boolean]",Sp="[object Date]",Np="[object Error]",Uc="[object Function]",Lp="[object GeneratorFunction]",Cp="[object Map]",Dp="[object Number]",kc="[object Object]",Mp="[object RegExp]",xp="[object Set]",Pp="[object String]",qp="[object Symbol]",Bp="[object WeakMap]",Gp="[object ArrayBuffer]",Up="[object DataView]",kp="[object Float32Array]",Fp="[object Float64Array]",$p="[object Int8Array]",Vp="[object Int16Array]",Hp="[object Int32Array]",jp="[object Uint8Array]",zp="[object Uint8ClampedArray]",Wp="[object Uint16Array]",Yp="[object Uint32Array]",he={};he[Gc]=he[Op]=he[Gp]=he[Up]=he[wp]=he[Sp]=he[kp]=he[Fp]=he[$p]=he[Vp]=he[Hp]=he[Cp]=he[Dp]=he[kc]=he[Mp]=he[xp]=he[Pp]=he[qp]=he[jp]=he[zp]=he[Wp]=he[Yp]=!0;he[Np]=he[Uc]=he[Bp]=!1;function ws(t,e,n,r,s,i){var a,l=e&Rp;if(a!==void 0)return a;if(!Yt(t))return t;var o=fn(t);if(o)a=Yd(t);else{var u=at(t),f=u==Uc||u==Lp;if(Nr(t))return Pc(t,l);if(u==kc||u==Gc||f&&!s)a=f?{}:Bc(t);else{if(!he[u])return s?t:{};a=Tp(t,u,l)}}i||(i=new It);var m=i.get(t);if(m)return m;i.set(t,a),vp(t)?t.forEach(function(d){a.add(ws(d,e,n,d,t,i))}):bp(t)&&t.forEach(function(d,T){a.set(T,ws(d,e,n,T,t,i))});var h=da,g=o?void 0:h(t);return Yf(g||t,function(d,T){g&&(T=d,d=t[T]),vc(a,T,ws(d,e,n,T,t,i))}),a}var Xp=1,Kp=4;function $n(t){return ws(t,Xp|Kp)}var Zp="__lodash_hash_undefined__";function Qp(t){return this.__data__.set(t,Zp),this}function Jp(t){return this.__data__.has(t)}function Ps(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new mn;++e<n;)this.add(t[e])}Ps.prototype.add=Ps.prototype.push=Qp;Ps.prototype.has=Jp;function eg(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function tg(t,e){return t.has(e)}var ng=1,rg=2;function Fc(t,e,n,r,s,i){var a=n&ng,l=t.length,o=e.length;if(l!=o&&!(a&&o>l))return!1;var u=i.get(t),f=i.get(e);if(u&&f)return u==e&&f==t;var m=-1,h=!0,g=n&rg?new Ps:void 0;for(i.set(t,e),i.set(e,t);++m<l;){var d=t[m],T=e[m];if(r)var y=a?r(T,d,m,e,t,i):r(d,T,m,t,e,i);if(y!==void 0){if(y)continue;h=!1;break}if(g){if(!eg(e,function(A,_){if(!tg(g,_)&&(d===A||s(d,A,n,r,i)))return g.push(_)})){h=!1;break}}else if(!(d===T||s(d,T,n,r,i))){h=!1;break}}return i.delete(t),i.delete(e),h}function sg(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}function ig(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var ag=1,lg=2,og="[object Boolean]",cg="[object Date]",ug="[object Error]",fg="[object Map]",hg="[object Number]",dg="[object RegExp]",pg="[object Set]",gg="[object String]",mg="[object Symbol]",Eg="[object ArrayBuffer]",Tg="[object DataView]",Fl=Ds?Ds.prototype:void 0,ji=Fl?Fl.valueOf:void 0;function _g(t,e,n,r,s,i,a){switch(n){case Tg:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Eg:return!(t.byteLength!=e.byteLength||!i(new xs(t),new xs(e)));case og:case cg:case hg:return Br(+t,+e);case ug:return t.name==e.name&&t.message==e.message;case dg:case gg:return t==e+"";case fg:var l=sg;case pg:var o=r&ag;if(l||(l=ig),t.size!=e.size&&!o)return!1;var u=a.get(t);if(u)return u==e;r|=lg,a.set(t,e);var f=Fc(l(t),l(e),r,s,i,a);return a.delete(t),f;case mg:if(ji)return ji.call(t)==ji.call(e)}return!1}var yg=1,bg=Object.prototype,Ig=bg.hasOwnProperty;function Ag(t,e,n,r,s,i){var a=n&yg,l=da(t),o=l.length,u=da(e),f=u.length;if(o!=f&&!a)return!1;for(var m=o;m--;){var h=l[m];if(!(a?h in e:Ig.call(e,h)))return!1}var g=i.get(t),d=i.get(e);if(g&&d)return g==e&&d==t;var T=!0;i.set(t,e),i.set(e,t);for(var y=a;++m<o;){h=l[m];var A=t[h],_=e[h];if(r)var v=a?r(_,A,h,e,t,i):r(A,_,h,t,e,i);if(!(v===void 0?A===_||s(A,_,n,r,i):v)){T=!1;break}y||(y=h=="constructor")}if(T&&!y){var L=t.constructor,N=e.constructor;L!=N&&"constructor"in t&&"constructor"in e&&!(typeof L=="function"&&L instanceof L&&typeof N=="function"&&N instanceof N)&&(T=!1)}return i.delete(t),i.delete(e),T}var vg=1,$l="[object Arguments]",Vl="[object Array]",os="[object Object]",Rg=Object.prototype,Hl=Rg.hasOwnProperty;function Og(t,e,n,r,s,i){var a=fn(t),l=fn(e),o=a?Vl:at(t),u=l?Vl:at(e);o=o==$l?os:o,u=u==$l?os:u;var f=o==os,m=u==os,h=o==u;if(h&&Nr(t)){if(!Nr(e))return!1;a=!0,f=!1}if(h&&!f)return i||(i=new It),a||za(t)?Fc(t,e,n,r,s,i):_g(t,e,o,n,r,s,i);if(!(n&vg)){var g=f&&Hl.call(t,"__wrapped__"),d=m&&Hl.call(e,"__wrapped__");if(g||d){var T=g?t.value():t,y=d?e.value():e;return i||(i=new It),s(T,y,n,r,i)}}return h?(i||(i=new It),Ag(t,e,n,r,s,i)):!1}function $c(t,e,n,r,s){return t===e?!0:t==null||e==null||!Ct(t)&&!Ct(e)?t!==t&&e!==e:Og(t,e,n,r,$c,s)}function wg(t){return function(e,n,r){for(var s=-1,i=Object(e),a=r(e),l=a.length;l--;){var o=a[++s];if(n(i[o],o,i)===!1)break}return e}}var Sg=wg();function Ea(t,e,n){(n!==void 0&&!Br(t[e],n)||n===void 0&&!(e in t))&&Va(t,e,n)}function Ng(t){return Ct(t)&&Fs(t)}function Ta(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Lg(t){return Jf(t,Cc(t))}function Cg(t,e,n,r,s,i,a){var l=Ta(t,n),o=Ta(e,n),u=a.get(o);if(u){Ea(t,n,u);return}var f=i?i(l,o,n+"",t,e,a):void 0,m=f===void 0;if(m){var h=fn(o),g=!h&&Nr(o),d=!h&&!g&&za(o);f=o,h||g||d?fn(l)?f=l:Ng(l)?f=kf(l):g?(m=!1,f=Pc(o,!0)):d?(m=!1,f=qc(o,!0)):f=[]:Od(o)||ha(o)?(f=l,ha(l)?f=Lg(l):(!Yt(l)||$a(l))&&(f=Bc(o))):m=!1}m&&(a.set(o,f),s(f,o,r,i,a),a.delete(o)),Ea(t,n,f)}function Vc(t,e,n,r,s){t!==e&&Sg(e,function(i,a){if(s||(s=new It),Yt(i))Cg(t,e,a,n,Vc,r,s);else{var l=r?r(Ta(t,a),i,a+"",t,e,s):void 0;l===void 0&&(l=i),Ea(t,a,l)}},Cc)}function Ya(t,e){return $c(t,e)}var zt=sh(function(t,e,n){Vc(t,e,n)}),Y=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(Y||{});class vt{constructor(e,n,r={}){this.attrName=e,this.keyName=n;const s=Y.TYPE&Y.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Y.LEVEL|s:Y.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(e){return Array.from(e.attributes).map(n=>n.name)}add(e,n){return this.canAdd(e,n)?(e.setAttribute(this.keyName,n),!0):!1}canAdd(e,n){return this.whitelist==null?!0:typeof n=="string"?this.whitelist.indexOf(n.replace(/["']/g,""))>-1:this.whitelist.indexOf(n)>-1}remove(e){e.removeAttribute(this.keyName)}value(e){const n=e.getAttribute(this.keyName);return this.canAdd(e,n)&&n?n:""}}class Vn extends Error{constructor(e){e="[Parchment] "+e,super(e),this.message=e,this.name=this.constructor.name}}const Hc=class _a{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(e,n=!1){if(e==null)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(n){let r=null;try{r=e.parentNode}catch{return null}return this.find(r,n)}return null}create(e,n,r){const s=this.query(n);if(s==null)throw new Vn(`Unable to create ${n} blot`);const i=s,a=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:i.create(r),l=new i(e,a,r);return _a.blots.set(l.domNode,l),l}find(e,n=!1){return _a.find(e,n)}query(e,n=Y.ANY){let r;return typeof e=="string"?r=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?r=this.types.text:typeof e=="number"?e&Y.LEVEL&Y.BLOCK?r=this.types.block:e&Y.LEVEL&Y.INLINE&&(r=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some(s=>(r=this.classes[s],!!r)),r=r||this.tags[e.tagName]),r==null?null:"scope"in r&&n&Y.LEVEL&r.scope&&n&Y.TYPE&r.scope?r:null}register(...e){return e.map(n=>{const r="blotName"in n,s="attrName"in n;if(!r&&!s)throw new Vn("Invalid definition");if(r&&n.blotName==="abstract")throw new Vn("Cannot register abstract class");const i=r?n.blotName:s?n.attrName:void 0;return this.types[i]=n,s?typeof n.keyName=="string"&&(this.attributes[n.keyName]=n):r&&(n.className&&(this.classes[n.className]=n),n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(a=>a.toUpperCase()):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(a=>{(this.tags[a]==null||n.className==null)&&(this.tags[a]=n)}))),n})}};Hc.blots=new WeakMap;let Wn=Hc;function jl(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(n=>n.indexOf(`${e}-`)===0)}class Dg extends vt{static keys(e){return(e.getAttribute("class")||"").split(/\s+/).map(n=>n.split("-").slice(0,-1).join("-"))}add(e,n){return this.canAdd(e,n)?(this.remove(e),e.classList.add(`${this.keyName}-${n}`),!0):!1}remove(e){jl(e,this.keyName).forEach(n=>{e.classList.remove(n)}),e.classList.length===0&&e.removeAttribute("class")}value(e){const n=(jl(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,n)?n:""}}const ht=Dg;function zi(t){const e=t.split("-"),n=e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return e[0]+n}class Mg extends vt{static keys(e){return(e.getAttribute("style")||"").split(";").map(n=>n.split(":")[0].trim())}add(e,n){return this.canAdd(e,n)?(e.style[zi(this.keyName)]=n,!0):!1}remove(e){e.style[zi(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")}value(e){const n=e.style[zi(this.keyName)];return this.canAdd(e,n)?n:""}}const Xt=Mg;class xg{constructor(e){this.attributes={},this.domNode=e,this.build()}attribute(e,n){n?e.add(this.domNode,n)&&(e.value(this.domNode)!=null?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])}build(){this.attributes={};const e=Wn.find(this.domNode);if(e==null)return;const n=vt.keys(this.domNode),r=ht.keys(this.domNode),s=Xt.keys(this.domNode);n.concat(r).concat(s).forEach(i=>{const a=e.scroll.query(i,Y.ATTRIBUTE);a instanceof vt&&(this.attributes[a.attrName]=a)})}copy(e){Object.keys(this.attributes).forEach(n=>{const r=this.attributes[n].value(this.domNode);e.format(n,r)})}move(e){this.copy(e),Object.keys(this.attributes).forEach(n=>{this.attributes[n].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((e,n)=>(e[n]=this.attributes[n].value(this.domNode),e),{})}}const Hs=xg,jc=class{constructor(e,n){this.scroll=e,this.domNode=n,Wn.blots.set(n,this),this.prev=null,this.next=null}static create(e){if(this.tagName==null)throw new Vn("Blot definition missing tagName");let n,r;return Array.isArray(this.tagName)?(typeof e=="string"?(r=e.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof e=="number"&&(r=e),typeof r=="number"?n=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?n=document.createElement(r):n=document.createElement(this.tagName[0])):n=document.createElement(this.tagName),this.className&&n.classList.add(this.className),n}get statics(){return this.constructor}attach(){}clone(){const e=this.domNode.cloneNode(!1);return this.scroll.create(e)}detach(){this.parent!=null&&this.parent.removeChild(this),Wn.blots.delete(this.domNode)}deleteAt(e,n){this.isolate(e,n).remove()}formatAt(e,n,r,s){const i=this.isolate(e,n);if(this.scroll.query(r,Y.BLOT)!=null&&s)i.wrap(r,s);else if(this.scroll.query(r,Y.ATTRIBUTE)!=null){const a=this.scroll.create(this.statics.scope);i.wrap(a),a.format(r,s)}}insertAt(e,n,r){const s=r==null?this.scroll.create("text",n):this.scroll.create(n,r),i=this.split(e);this.parent.insertBefore(s,i||void 0)}isolate(e,n){const r=this.split(e);if(r==null)throw new Error("Attempt to isolate at end");return r.split(n),r}length(){return 1}offset(e=this.parent){return this.parent==null||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)}optimize(e){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(e,n){return e===0?this:this.next}update(e,n){}wrap(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new Vn(`Cannot wrap ${e}`);return r.appendChild(this),r}};jc.blotName="abstract";let zc=jc;const Wc=class extends zc{static value(e){return!0}index(e,n){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(n,1):-1}position(e,n){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Wc.scope=Y.INLINE_BLOT;let Pg=Wc;const Ce=Pg;class qg{constructor(){this.head=null,this.tail=null,this.length=0}append(...e){if(this.insertBefore(e[0],null),e.length>1){const n=e.slice(1);this.append(...n)}}at(e){const n=this.iterator();let r=n();for(;r&&e>0;)e-=1,r=n();return r}contains(e){const n=this.iterator();let r=n();for(;r;){if(r===e)return!0;r=n()}return!1}indexOf(e){const n=this.iterator();let r=n(),s=0;for(;r;){if(r===e)return s;s+=1,r=n()}return-1}insertBefore(e,n){e!=null&&(this.remove(e),e.next=n,n!=null?(e.prev=n.prev,n.prev!=null&&(n.prev.next=e),n.prev=e,n===this.head&&(this.head=e)):this.tail!=null?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)}offset(e){let n=0,r=this.head;for(;r!=null;){if(r===e)return n;n+=r.length(),r=r.next}return-1}remove(e){this.contains(e)&&(e.prev!=null&&(e.prev.next=e.next),e.next!=null&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)}iterator(e=this.head){return()=>{const n=e;return e!=null&&(e=e.next),n}}find(e,n=!1){const r=this.iterator();let s=r();for(;s;){const i=s.length();if(e<i||n&&e===i&&(s.next==null||s.next.length()!==0))return[s,e];e-=i,s=r()}return[null,0]}forEach(e){const n=this.iterator();let r=n();for(;r;)e(r),r=n()}forEachAt(e,n,r){if(n<=0)return;const[s,i]=this.find(e);let a=e-i;const l=this.iterator(s);let o=l();for(;o&&a<e+n;){const u=o.length();e>a?r(o,e-a,Math.min(n,a+u-e)):r(o,0,Math.min(u,e+n-a)),a+=u,o=l()}}map(e){return this.reduce((n,r)=>(n.push(e(r)),n),[])}reduce(e,n){const r=this.iterator();let s=r();for(;s;)n=e(n,s),s=r();return n}}function zl(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const r=e.create(Y.INLINE);return Array.from(t.childNodes).forEach(s=>{r.domNode.appendChild(s)}),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}const Yc=class $t extends zc{constructor(e,n){super(e,n),this.uiNode=null,this.build()}appendChild(e){this.insertBefore(e)}attach(){super.attach(),this.children.forEach(e=>{e.attach()})}attachUI(e){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=e,$t.uiClass&&this.uiNode.classList.add($t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new qg,Array.from(this.domNode.childNodes).filter(e=>e!==this.uiNode).reverse().forEach(e=>{try{const n=zl(e,this.scroll);this.insertBefore(n,this.children.head||void 0)}catch(n){if(n instanceof Vn)return;throw n}})}deleteAt(e,n){if(e===0&&n===this.length())return this.remove();this.children.forEachAt(e,n,(r,s,i)=>{r.deleteAt(s,i)})}descendant(e,n=0){const[r,s]=this.children.find(n);return e.blotName==null&&e(r)||e.blotName!=null&&r instanceof e?[r,s]:r instanceof $t?r.descendant(e,s):[null,-1]}descendants(e,n=0,r=Number.MAX_VALUE){let s=[],i=r;return this.children.forEachAt(n,r,(a,l,o)=>{(e.blotName==null&&e(a)||e.blotName!=null&&a instanceof e)&&s.push(a),a instanceof $t&&(s=s.concat(a.descendants(e,l,i))),i-=o}),s}detach(){this.children.forEach(e=>{e.detach()}),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach(n=>{e||this.statics.allowedChildren.some(r=>n instanceof r)||(n.statics.scope===Y.BLOCK_BLOT?(n.next!=null&&this.splitAfter(n),n.prev!=null&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof $t?n.unwrap():n.remove())})}formatAt(e,n,r,s){this.children.forEachAt(e,n,(i,a,l)=>{i.formatAt(a,l,r,s)})}insertAt(e,n,r){const[s,i]=this.children.find(e);if(s)s.insertAt(i,n,r);else{const a=r==null?this.scroll.create("text",n):this.scroll.create(n,r);this.appendChild(a)}}insertBefore(e,n){e.parent!=null&&e.parent.children.remove(e);let r=null;this.children.insertBefore(e,n||null),e.parent=this,n!=null&&(r=n.domNode),(this.domNode.parentNode!==e.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(e.domNode,r),e.attach()}length(){return this.children.reduce((e,n)=>e+n.length(),0)}moveChildren(e,n){this.children.forEach(r=>{e.insertBefore(r,n)})}optimize(e){if(super.optimize(e),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()}path(e,n=!1){const[r,s]=this.children.find(e,n),i=[[this,e]];return r instanceof $t?i.concat(r.path(s,n)):(r!=null&&i.push([r,s]),i)}removeChild(e){this.children.remove(e)}replaceWith(e,n){const r=typeof e=="string"?this.scroll.create(e,n):e;return r instanceof $t&&this.moveChildren(r),super.replaceWith(r)}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(e,this.length(),(s,i,a)=>{const l=s.split(i,n);l!=null&&r.appendChild(l)}),r}splitAfter(e){const n=this.clone();for(;e.next!=null;)n.appendChild(e.next);return this.parent&&this.parent.insertBefore(n,this.next||void 0),n}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(e,n){const r=[],s=[];e.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(r.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const a=this.scroll.find(i);a!=null&&(a.domNode.parentNode==null||a.domNode.parentNode===this.domNode)&&a.detach()}),r.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,a)=>i===a?0:i.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let a=null;i.nextSibling!=null&&(a=this.scroll.find(i.nextSibling));const l=zl(i,this.scroll);(l.next!==a||l.next==null)&&(l.parent!=null&&l.parent.removeChild(this),this.insertBefore(l,a||void 0))}),this.enforceAllowedChildren()}};Yc.uiClass="";let Bg=Yc;const ut=Bg;function Gg(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}const Mn=class xn extends ut{static create(e){return super.create(e)}static formats(e,n){const r=n.query(xn.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Hs(this.domNode)}format(e,n){if(e===this.statics.blotName&&!n)this.children.forEach(r=>{r instanceof xn||(r=r.wrap(xn.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(e,Y.INLINE);if(r==null)return;r instanceof vt?this.attributes.attribute(r,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,s){this.formats()[r]!=null||this.scroll.query(r,Y.ATTRIBUTE)?this.isolate(e,n).format(r,s):super.formatAt(e,n,r,s)}optimize(e){super.optimize(e);const n=this.formats();if(Object.keys(n).length===0)return this.unwrap();const r=this.next;r instanceof xn&&r.prev===this&&Gg(n,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(e,n){const r=super.wrap(e,n);return r instanceof xn&&this.attributes.move(r),r}};Mn.allowedChildren=[Mn,Ce],Mn.blotName="inline",Mn.scope=Y.INLINE_BLOT,Mn.tagName="SPAN";let Ug=Mn;const Xa=Ug,Pn=class ya extends ut{static create(e){return super.create(e)}static formats(e,n){const r=n.query(ya.blotName);if(!(r!=null&&e.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(e,n){super(e,n),this.attributes=new Hs(this.domNode)}format(e,n){const r=this.scroll.query(e,Y.BLOCK);r!=null&&(r instanceof vt?this.attributes.attribute(r,n):e===this.statics.blotName&&!n?this.replaceWith(ya.blotName):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n))}formats(){const e=this.attributes.values(),n=this.statics.formats(this.domNode,this.scroll);return n!=null&&(e[this.statics.blotName]=n),e}formatAt(e,n,r,s){this.scroll.query(r,Y.BLOCK)!=null?this.format(r,s):super.formatAt(e,n,r,s)}insertAt(e,n,r){if(r==null||this.scroll.query(n,Y.INLINE)!=null)super.insertAt(e,n,r);else{const s=this.split(e);if(s!=null){const i=this.scroll.create(n,r);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(e,n){const r=super.replaceWith(e,n);return this.attributes.copy(r),r}update(e,n){super.update(e,n),e.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};Pn.blotName="block",Pn.scope=Y.BLOCK_BLOT,Pn.tagName="P",Pn.allowedChildren=[Xa,Pn,Ce];let kg=Pn;const Dr=kg,ba=class extends ut{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(e,n){super.deleteAt(e,n),this.enforceAllowedChildren()}formatAt(e,n,r,s){super.formatAt(e,n,r,s),this.enforceAllowedChildren()}insertAt(e,n,r){super.insertAt(e,n,r),this.enforceAllowedChildren()}optimize(e){super.optimize(e),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};ba.blotName="container",ba.scope=Y.BLOCK_BLOT;let Fg=ba;const js=Fg;class $g extends Ce{static formats(e,n){}format(e,n){super.formatAt(0,this.length(),e,n)}formatAt(e,n,r,s){e===0&&n===this.length()?this.format(r,s):super.formatAt(e,n,r,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const He=$g,Vg={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Hg=100,qn=class extends ut{constructor(e,n){super(null,n),this.registry=e,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,Vg),this.attach()}create(e,n){return this.registry.create(this,e,n)}find(e,n=!1){const r=this.registry.find(e,n);return r?r.scroll===this?r:n?this.find(r.scroll.domNode.parentNode,!0):null:null}query(e,n=Y.ANY){return this.registry.query(e,n)}register(...e){return this.registry.register(...e)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(e,n){this.update(),e===0&&n===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(e,n)}formatAt(e,n,r,s){this.update(),super.formatAt(e,n,r,s)}insertAt(e,n,r){this.update(),super.insertAt(e,n,r)}optimize(e=[],n={}){super.optimize(n);const r=n.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)e.push(s.pop());const i=(o,u=!0)=>{o==null||o===this||o.domNode.parentNode!=null&&(r.has(o.domNode)||r.set(o.domNode,[]),u&&i(o.parent))},a=o=>{r.has(o.domNode)&&(o instanceof ut&&o.children.forEach(a),r.delete(o.domNode),o.optimize(n))};let l=e;for(let o=0;l.length>0;o+=1){if(o>=Hg)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach(u=>{const f=this.find(u.target,!0);f!=null&&(f.domNode===u.target&&(u.type==="childList"?(i(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(m=>{const h=this.find(m,!1);i(h,!1),h instanceof ut&&h.children.forEach(g=>{i(g,!1)})})):u.type==="attributes"&&i(f.prev)),i(f))}),this.children.forEach(a),l=Array.from(this.observer.takeRecords()),s=l.slice();s.length>0;)e.push(s.pop())}}update(e,n={}){e=e||this.observer.takeRecords();const r=new WeakMap;e.map(s=>{const i=this.find(s.target,!0);return i==null?null:r.has(i.domNode)?(r.get(i.domNode).push(s),null):(r.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&r.has(s.domNode)&&s.update(r.get(s.domNode)||[],n)}),n.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),n),this.optimize(e,n)}};qn.blotName="scroll",qn.defaultChild=Dr,qn.allowedChildren=[Dr,js],qn.scope=Y.BLOCK_BLOT,qn.tagName="DIV";let jg=qn;const Ka=jg,Ia=class Xc extends Ce{static create(e){return document.createTextNode(e)}static value(e){return e.data}constructor(e,n){super(e,n),this.text=this.statics.value(this.domNode)}deleteAt(e,n){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+n)}index(e,n){return this.domNode===e?n:-1}insertAt(e,n,r){r==null?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):super.insertAt(e,n,r)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Xc&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(e,n=!1){return[this.domNode,e]}split(e,n=!1){if(!n){if(e===0)return this;if(e===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(e,n){e.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Ia.blotName="text",Ia.scope=Y.INLINE_BLOT;let zg=Ia;const qs=zg,Wg=Object.freeze(Object.defineProperty({__proto__:null,Attributor:vt,AttributorStore:Hs,BlockBlot:Dr,ClassAttributor:ht,ContainerBlot:js,EmbedBlot:He,InlineBlot:Xa,LeafBlot:Ce,ParentBlot:ut,Registry:Wn,Scope:Y,ScrollBlot:Ka,StyleAttributor:Xt,TextBlot:qs},Symbol.toStringTag,{value:"Module"}));var cs={exports:{}},Wi,Wl;function Yg(){if(Wl)return Wi;Wl=1;var t=-1,e=1,n=0;function r(E,S,R,w,M){if(E===S)return E?[[n,E]]:[];if(R!=null){var I=F(E,S,R);if(I)return I}var O=l(E,S),D=E.substring(0,O);E=E.substring(O),S=S.substring(O),O=u(E,S);var P=E.substring(E.length-O);E=E.substring(0,E.length-O),S=S.substring(0,S.length-O);var U=s(E,S);return D&&U.unshift([n,D]),P&&U.push([n,P]),_(U,M),w&&m(U),U}function s(E,S){var R;if(!E)return[[e,S]];if(!S)return[[t,E]];var w=E.length>S.length?E:S,M=E.length>S.length?S:E,I=w.indexOf(M);if(I!==-1)return R=[[e,w.substring(0,I)],[n,M],[e,w.substring(I+M.length)]],E.length>S.length&&(R[0][0]=R[2][0]=t),R;if(M.length===1)return[[t,E],[e,S]];var O=f(E,S);if(O){var D=O[0],P=O[1],U=O[2],k=O[3],Z=O[4],ne=r(D,U),J=r(P,k);return ne.concat([[n,Z]],J)}return i(E,S)}function i(E,S){for(var R=E.length,w=S.length,M=Math.ceil((R+w)/2),I=M,O=2*M,D=new Array(O),P=new Array(O),U=0;U<O;U++)D[U]=-1,P[U]=-1;D[I+1]=0,P[I+1]=0;for(var k=R-w,Z=k%2!==0,ne=0,J=0,X=0,W=0,se=0;se<M;se++){for(var Q=-se+ne;Q<=se-J;Q+=2){var ie=I+Q,ee;Q===-se||Q!==se&&D[ie-1]<D[ie+1]?ee=D[ie+1]:ee=D[ie-1]+1;for(var ae=ee-Q;ee<R&&ae<w&&E.charAt(ee)===S.charAt(ae);)ee++,ae++;if(D[ie]=ee,ee>R)J+=2;else if(ae>w)ne+=2;else if(Z){var ue=I+k-Q;if(ue>=0&&ue<O&&P[ue]!==-1){var fe=R-P[ue];if(ee>=fe)return a(E,S,ee,ae)}}}for(var Ee=-se+X;Ee<=se-W;Ee+=2){var ue=I+Ee,fe;Ee===-se||Ee!==se&&P[ue-1]<P[ue+1]?fe=P[ue+1]:fe=P[ue-1]+1;for(var we=fe-Ee;fe<R&&we<w&&E.charAt(R-fe-1)===S.charAt(w-we-1);)fe++,we++;if(P[ue]=fe,fe>R)W+=2;else if(we>w)X+=2;else if(!Z){var ie=I+k-Ee;if(ie>=0&&ie<O&&D[ie]!==-1){var ee=D[ie],ae=I+ee-ie;if(fe=R-fe,ee>=fe)return a(E,S,ee,ae)}}}}return[[t,E],[e,S]]}function a(E,S,R,w){var M=E.substring(0,R),I=S.substring(0,w),O=E.substring(R),D=S.substring(w),P=r(M,I),U=r(O,D);return P.concat(U)}function l(E,S){if(!E||!S||E.charAt(0)!==S.charAt(0))return 0;for(var R=0,w=Math.min(E.length,S.length),M=w,I=0;R<M;)E.substring(I,M)==S.substring(I,M)?(R=M,I=R):w=M,M=Math.floor((w-R)/2+R);return v(E.charCodeAt(M-1))&&M--,M}function o(E,S){var R=E.length,w=S.length;if(R==0||w==0)return 0;R>w?E=E.substring(R-w):R<w&&(S=S.substring(0,R));var M=Math.min(R,w);if(E==S)return M;for(var I=0,O=1;;){var D=E.substring(M-O),P=S.indexOf(D);if(P==-1)return I;O+=P,(P==0||E.substring(M-O)==S.substring(0,O))&&(I=O,O++)}}function u(E,S){if(!E||!S||E.slice(-1)!==S.slice(-1))return 0;for(var R=0,w=Math.min(E.length,S.length),M=w,I=0;R<M;)E.substring(E.length-M,E.length-I)==S.substring(S.length-M,S.length-I)?(R=M,I=R):w=M,M=Math.floor((w-R)/2+R);return L(E.charCodeAt(E.length-M))&&M--,M}function f(E,S){var R=E.length>S.length?E:S,w=E.length>S.length?S:E;if(R.length<4||w.length*2<R.length)return null;function M(J,X,W){for(var se=J.substring(W,W+Math.floor(J.length/4)),Q=-1,ie="",ee,ae,ue,fe;(Q=X.indexOf(se,Q+1))!==-1;){var Ee=l(J.substring(W),X.substring(Q)),we=u(J.substring(0,W),X.substring(0,Q));ie.length<we+Ee&&(ie=X.substring(Q-we,Q)+X.substring(Q,Q+Ee),ee=J.substring(0,W-we),ae=J.substring(W+Ee),ue=X.substring(0,Q-we),fe=X.substring(Q+Ee))}return ie.length*2>=J.length?[ee,ae,ue,fe,ie]:null}var I=M(R,w,Math.ceil(R.length/4)),O=M(R,w,Math.ceil(R.length/2)),D;if(!I&&!O)return null;O?I?D=I[4].length>O[4].length?I:O:D=O:D=I;var P,U,k,Z;E.length>S.length?(P=D[0],U=D[1],k=D[2],Z=D[3]):(k=D[0],Z=D[1],P=D[2],U=D[3]);var ne=D[4];return[P,U,k,Z,ne]}function m(E){for(var S=!1,R=[],w=0,M=null,I=0,O=0,D=0,P=0,U=0;I<E.length;)E[I][0]==n?(R[w++]=I,O=P,D=U,P=0,U=0,M=E[I][1]):(E[I][0]==e?P+=E[I][1].length:U+=E[I][1].length,M&&M.length<=Math.max(O,D)&&M.length<=Math.max(P,U)&&(E.splice(R[w-1],0,[t,M]),E[R[w-1]+1][0]=e,w--,w--,I=w>0?R[w-1]:-1,O=0,D=0,P=0,U=0,M=null,S=!0)),I++;for(S&&_(E),A(E),I=1;I<E.length;){if(E[I-1][0]==t&&E[I][0]==e){var k=E[I-1][1],Z=E[I][1],ne=o(k,Z),J=o(Z,k);ne>=J?(ne>=k.length/2||ne>=Z.length/2)&&(E.splice(I,0,[n,Z.substring(0,ne)]),E[I-1][1]=k.substring(0,k.length-ne),E[I+1][1]=Z.substring(ne),I++):(J>=k.length/2||J>=Z.length/2)&&(E.splice(I,0,[n,k.substring(0,J)]),E[I-1][0]=e,E[I-1][1]=Z.substring(0,Z.length-J),E[I+1][0]=t,E[I+1][1]=k.substring(J),I++),I++}I++}}var h=/[^a-zA-Z0-9]/,g=/\s/,d=/[\r\n]/,T=/\n\r?\n$/,y=/^\r?\n\r?\n/;function A(E){function S(J,X){if(!J||!X)return 6;var W=J.charAt(J.length-1),se=X.charAt(0),Q=W.match(h),ie=se.match(h),ee=Q&&W.match(g),ae=ie&&se.match(g),ue=ee&&W.match(d),fe=ae&&se.match(d),Ee=ue&&J.match(T),we=fe&&X.match(y);return Ee||we?5:ue||fe?4:Q&&!ee&&ae?3:ee||ae?2:Q||ie?1:0}for(var R=1;R<E.length-1;){if(E[R-1][0]==n&&E[R+1][0]==n){var w=E[R-1][1],M=E[R][1],I=E[R+1][1],O=u(w,M);if(O){var D=M.substring(M.length-O);w=w.substring(0,w.length-O),M=D+M.substring(0,M.length-O),I=D+I}for(var P=w,U=M,k=I,Z=S(w,M)+S(M,I);M.charAt(0)===I.charAt(0);){w+=M.charAt(0),M=M.substring(1)+I.charAt(0),I=I.substring(1);var ne=S(w,M)+S(M,I);ne>=Z&&(Z=ne,P=w,U=M,k=I)}E[R-1][1]!=P&&(P?E[R-1][1]=P:(E.splice(R-1,1),R--),E[R][1]=U,k?E[R+1][1]=k:(E.splice(R+1,1),R--))}R++}}function _(E,S){E.push([n,""]);for(var R=0,w=0,M=0,I="",O="",D;R<E.length;){if(R<E.length-1&&!E[R][1]){E.splice(R,1);continue}switch(E[R][0]){case e:M++,O+=E[R][1],R++;break;case t:w++,I+=E[R][1],R++;break;case n:var P=R-M-w-1;if(S){if(P>=0&&G(E[P][1])){var U=E[P][1].slice(-1);if(E[P][1]=E[P][1].slice(0,-1),I=U+I,O=U+O,!E[P][1]){E.splice(P,1),R--;var k=P-1;E[k]&&E[k][0]===e&&(M++,O=E[k][1]+O,k--),E[k]&&E[k][0]===t&&(w++,I=E[k][1]+I,k--),P=k}}if(N(E[R][1])){var U=E[R][1].charAt(0);E[R][1]=E[R][1].slice(1),I+=U,O+=U}}if(R<E.length-1&&!E[R][1]){E.splice(R,1);break}if(I.length>0||O.length>0){I.length>0&&O.length>0&&(D=l(O,I),D!==0&&(P>=0?E[P][1]+=O.substring(0,D):(E.splice(0,0,[n,O.substring(0,D)]),R++),O=O.substring(D),I=I.substring(D)),D=u(O,I),D!==0&&(E[R][1]=O.substring(O.length-D)+E[R][1],O=O.substring(0,O.length-D),I=I.substring(0,I.length-D)));var Z=M+w;I.length===0&&O.length===0?(E.splice(R-Z,Z),R=R-Z):I.length===0?(E.splice(R-Z,Z,[e,O]),R=R-Z+1):O.length===0?(E.splice(R-Z,Z,[t,I]),R=R-Z+1):(E.splice(R-Z,Z,[t,I],[e,O]),R=R-Z+2)}R!==0&&E[R-1][0]===n?(E[R-1][1]+=E[R][1],E.splice(R,1)):R++,M=0,w=0,I="",O="";break}}E[E.length-1][1]===""&&E.pop();var ne=!1;for(R=1;R<E.length-1;)E[R-1][0]===n&&E[R+1][0]===n&&(E[R][1].substring(E[R][1].length-E[R-1][1].length)===E[R-1][1]?(E[R][1]=E[R-1][1]+E[R][1].substring(0,E[R][1].length-E[R-1][1].length),E[R+1][1]=E[R-1][1]+E[R+1][1],E.splice(R-1,1),ne=!0):E[R][1].substring(0,E[R+1][1].length)==E[R+1][1]&&(E[R-1][1]+=E[R+1][1],E[R][1]=E[R][1].substring(E[R+1][1].length)+E[R+1][1],E.splice(R+1,1),ne=!0)),R++;ne&&_(E,S)}function v(E){return E>=55296&&E<=56319}function L(E){return E>=56320&&E<=57343}function N(E){return L(E.charCodeAt(0))}function G(E){return v(E.charCodeAt(E.length-1))}function $(E){for(var S=[],R=0;R<E.length;R++)E[R][1].length>0&&S.push(E[R]);return S}function q(E,S,R,w){return G(E)||N(w)?null:$([[n,E],[t,S],[e,R],[n,w]])}function F(E,S,R){var w=typeof R=="number"?{index:R,length:0}:R.oldRange,M=typeof R=="number"?null:R.newRange,I=E.length,O=S.length;if(w.length===0&&(M===null||M.length===0)){var D=w.index,P=E.slice(0,D),U=E.slice(D),k=M?M.index:null;e:{var Z=D+O-I;if(k!==null&&k!==Z||Z<0||Z>O)break e;var ne=S.slice(0,Z),J=S.slice(Z);if(J!==U)break e;var X=Math.min(D,Z),W=P.slice(0,X),se=ne.slice(0,X);if(W!==se)break e;var Q=P.slice(X),ie=ne.slice(X);return q(W,Q,ie,U)}e:{if(k!==null&&k!==D)break e;var ee=D,ne=S.slice(0,ee),J=S.slice(ee);if(ne!==P)break e;var ae=Math.min(I-ee,O-ee),ue=U.slice(U.length-ae),fe=J.slice(J.length-ae);if(ue!==fe)break e;var Q=U.slice(0,U.length-ae),ie=J.slice(0,J.length-ae);return q(P,Q,ie,ue)}}if(w.length>0&&M&&M.length===0)e:{var W=E.slice(0,w.index),ue=E.slice(w.index+w.length),X=W.length,ae=ue.length;if(O<X+ae)break e;var se=S.slice(0,X),fe=S.slice(O-ae);if(W!==se||ue!==fe)break e;var Q=E.slice(X,I-ae),ie=S.slice(X,O-ae);return q(W,Q,ie,ue)}return null}function j(E,S,R,w){return r(E,S,R,w,!0)}return j.INSERT=e,j.DELETE=t,j.EQUAL=n,Wi=j,Wi}var yr={exports:{}};yr.exports;var Yl;function Kc(){return Yl||(Yl=1,function(t,e){var n=200,r="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",o="[object Date]",u="[object Error]",f="[object Function]",m="[object GeneratorFunction]",h="[object Map]",g="[object Number]",d="[object Object]",T="[object Promise]",y="[object RegExp]",A="[object Set]",_="[object String]",v="[object Symbol]",L="[object WeakMap]",N="[object ArrayBuffer]",G="[object DataView]",$="[object Float32Array]",q="[object Float64Array]",F="[object Int8Array]",j="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",R="[object Uint8ClampedArray]",w="[object Uint16Array]",M="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,O=/\w*$/,D=/^\[object .+?Constructor\]$/,P=/^(?:0|[1-9]\d*)$/,U={};U[i]=U[a]=U[N]=U[G]=U[l]=U[o]=U[$]=U[q]=U[F]=U[j]=U[E]=U[h]=U[g]=U[d]=U[y]=U[A]=U[_]=U[v]=U[S]=U[R]=U[w]=U[M]=!0,U[u]=U[f]=U[L]=!1;var k=typeof Vt=="object"&&Vt&&Vt.Object===Object&&Vt,Z=typeof self=="object"&&self&&self.Object===Object&&self,ne=k||Z||Function("return this")(),J=e&&!e.nodeType&&e,X=J&&!0&&t&&!t.nodeType&&t,W=X&&X.exports===J;function se(c,p){return c.set(p[0],p[1]),c}function Q(c,p){return c.add(p),c}function ie(c,p){for(var b=-1,C=c?c.length:0;++b<C&&p(c[b],b,c)!==!1;);return c}function ee(c,p){for(var b=-1,C=p.length,re=c.length;++b<C;)c[re+b]=p[b];return c}function ae(c,p,b,C){for(var re=-1,K=c?c.length:0;++re<K;)b=p(b,c[re],re,c);return b}function ue(c,p){for(var b=-1,C=Array(c);++b<c;)C[b]=p(b);return C}function fe(c,p){return c==null?void 0:c[p]}function Ee(c){var p=!1;if(c!=null&&typeof c.toString!="function")try{p=!!(c+"")}catch{}return p}function we(c){var p=-1,b=Array(c.size);return c.forEach(function(C,re){b[++p]=[re,C]}),b}function er(c,p){return function(b){return c(p(b))}}function Vr(c){var p=-1,b=Array(c.size);return c.forEach(function(C){b[++p]=C}),b}var ni=Array.prototype,ri=Function.prototype,In=Object.prototype,tr=ne["__core-js_shared__"],Hr=function(){var c=/[^.]+$/.exec(tr&&tr.keys&&tr.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),jr=ri.toString,gt=In.hasOwnProperty,An=In.toString,si=RegExp("^"+jr.call(gt).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=W?ne.Buffer:void 0,vn=ne.Symbol,nr=ne.Uint8Array,je=er(Object.getPrototypeOf,Object),zr=Object.create,Wr=In.propertyIsEnumerable,ii=ni.splice,rr=Object.getOwnPropertySymbols,Rn=Kt?Kt.isBuffer:void 0,Yr=er(Object.keys,Object),On=nt(ne,"DataView"),Zt=nt(ne,"Map"),tt=nt(ne,"Promise"),wn=nt(ne,"Set"),sr=nt(ne,"WeakMap"),Qt=nt(Object,"create"),ir=Me(On),Jt=Me(Zt),ar=Me(tt),lr=Me(wn),or=Me(sr),Ut=vn?vn.prototype:void 0,Xr=Ut?Ut.valueOf:void 0;function Ot(c){var p=-1,b=c?c.length:0;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function ai(){this.__data__=Qt?Qt(null):{}}function li(c){return this.has(c)&&delete this.__data__[c]}function oi(c){var p=this.__data__;if(Qt){var b=p[c];return b===r?void 0:b}return gt.call(p,c)?p[c]:void 0}function Kr(c){var p=this.__data__;return Qt?p[c]!==void 0:gt.call(p,c)}function cr(c,p){var b=this.__data__;return b[c]=Qt&&p===void 0?r:p,this}Ot.prototype.clear=ai,Ot.prototype.delete=li,Ot.prototype.get=oi,Ot.prototype.has=Kr,Ot.prototype.set=cr;function ve(c){var p=-1,b=c?c.length:0;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function ci(){this.__data__=[]}function ui(c){var p=this.__data__,b=Nn(p,c);if(b<0)return!1;var C=p.length-1;return b==C?p.pop():ii.call(p,b,1),!0}function fi(c){var p=this.__data__,b=Nn(p,c);return b<0?void 0:p[b][1]}function hi(c){return Nn(this.__data__,c)>-1}function di(c,p){var b=this.__data__,C=Nn(b,c);return C<0?b.push([c,p]):b[C][1]=p,this}ve.prototype.clear=ci,ve.prototype.delete=ui,ve.prototype.get=fi,ve.prototype.has=hi,ve.prototype.set=di;function Se(c){var p=-1,b=c?c.length:0;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function pi(){this.__data__={hash:new Ot,map:new(Zt||ve),string:new Ot}}function gi(c){return tn(this,c).delete(c)}function mi(c){return tn(this,c).get(c)}function Ei(c){return tn(this,c).has(c)}function Ti(c,p){return tn(this,c).set(c,p),this}Se.prototype.clear=pi,Se.prototype.delete=gi,Se.prototype.get=mi,Se.prototype.has=Ei,Se.prototype.set=Ti;function Be(c){this.__data__=new ve(c)}function _i(){this.__data__=new ve}function yi(c){return this.__data__.delete(c)}function bi(c){return this.__data__.get(c)}function Ii(c){return this.__data__.has(c)}function Ai(c,p){var b=this.__data__;if(b instanceof ve){var C=b.__data__;if(!Zt||C.length<n-1)return C.push([c,p]),this;b=this.__data__=new Se(C)}return b.set(c,p),this}Be.prototype.clear=_i,Be.prototype.delete=yi,Be.prototype.get=bi,Be.prototype.has=Ii,Be.prototype.set=Ai;function Sn(c,p){var b=dr(c)||Cn(c)?ue(c.length,String):[],C=b.length,re=!!C;for(var K in c)gt.call(c,K)&&!(re&&(K=="length"||Bi(K,C)))&&b.push(K);return b}function Zr(c,p,b){var C=c[p];(!(gt.call(c,p)&&ns(C,b))||b===void 0&&!(p in c))&&(c[p]=b)}function Nn(c,p){for(var b=c.length;b--;)if(ns(c[b][0],p))return b;return-1}function mt(c,p){return c&&hr(p,gr(p),c)}function ur(c,p,b,C,re,K,oe){var le;if(C&&(le=K?C(c,re,K,oe):C(c)),le!==void 0)return le;if(!Tt(c))return c;var Te=dr(c);if(Te){if(le=Pi(c),!p)return Di(c,le)}else{var ce=St(c),Ne=ce==f||ce==m;if(rs(c))return Ln(c,p);if(ce==d||ce==i||Ne&&!K){if(Ee(c))return K?c:{};if(le=Et(Ne?{}:c),!p)return Mi(c,mt(le,c))}else{if(!U[ce])return K?c:{};le=qi(c,ce,ur,p)}}oe||(oe=new Be);var Ge=oe.get(c);if(Ge)return Ge;if(oe.set(c,le),!Te)var ye=b?xi(c):gr(c);return ie(ye||c,function(Le,Re){ye&&(Re=Le,Le=c[Re]),Zr(le,Re,ur(Le,p,b,C,Re,c,oe))}),le}function vi(c){return Tt(c)?zr(c):{}}function Ri(c,p,b){var C=p(c);return dr(c)?C:ee(C,b(c))}function Oi(c){return An.call(c)}function wi(c){if(!Tt(c)||Ui(c))return!1;var p=pr(c)||Ee(c)?si:D;return p.test(Me(c))}function Si(c){if(!es(c))return Yr(c);var p=[];for(var b in Object(c))gt.call(c,b)&&b!="constructor"&&p.push(b);return p}function Ln(c,p){if(p)return c.slice();var b=new c.constructor(c.length);return c.copy(b),b}function fr(c){var p=new c.constructor(c.byteLength);return new nr(p).set(new nr(c)),p}function en(c,p){var b=p?fr(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function Qr(c,p,b){var C=p?b(we(c),!0):we(c);return ae(C,se,new c.constructor)}function Jr(c){var p=new c.constructor(c.source,O.exec(c));return p.lastIndex=c.lastIndex,p}function Ni(c,p,b){var C=p?b(Vr(c),!0):Vr(c);return ae(C,Q,new c.constructor)}function Li(c){return Xr?Object(Xr.call(c)):{}}function Ci(c,p){var b=p?fr(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function Di(c,p){var b=-1,C=c.length;for(p||(p=Array(C));++b<C;)p[b]=c[b];return p}function hr(c,p,b,C){b||(b={});for(var re=-1,K=p.length;++re<K;){var oe=p[re],le=void 0;Zr(b,oe,le===void 0?c[oe]:le)}return b}function Mi(c,p){return hr(c,wt(c),p)}function xi(c){return Ri(c,gr,wt)}function tn(c,p){var b=c.__data__;return Gi(p)?b[typeof p=="string"?"string":"hash"]:b.map}function nt(c,p){var b=fe(c,p);return wi(b)?b:void 0}var wt=rr?er(rr,Object):Fi,St=Oi;(On&&St(new On(new ArrayBuffer(1)))!=G||Zt&&St(new Zt)!=h||tt&&St(tt.resolve())!=T||wn&&St(new wn)!=A||sr&&St(new sr)!=L)&&(St=function(c){var p=An.call(c),b=p==d?c.constructor:void 0,C=b?Me(b):void 0;if(C)switch(C){case ir:return G;case Jt:return h;case ar:return T;case lr:return A;case or:return L}return p});function Pi(c){var p=c.length,b=c.constructor(p);return p&&typeof c[0]=="string"&&gt.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function Et(c){return typeof c.constructor=="function"&&!es(c)?vi(je(c)):{}}function qi(c,p,b,C){var re=c.constructor;switch(p){case N:return fr(c);case l:case o:return new re(+c);case G:return en(c,C);case $:case q:case F:case j:case E:case S:case R:case w:case M:return Ci(c,C);case h:return Qr(c,C,b);case g:case _:return new re(c);case y:return Jr(c);case A:return Ni(c,C,b);case v:return Li(c)}}function Bi(c,p){return p=p??s,!!p&&(typeof c=="number"||P.test(c))&&c>-1&&c%1==0&&c<p}function Gi(c){var p=typeof c;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?c!=="__proto__":c===null}function Ui(c){return!!Hr&&Hr in c}function es(c){var p=c&&c.constructor,b=typeof p=="function"&&p.prototype||In;return c===b}function Me(c){if(c!=null){try{return jr.call(c)}catch{}try{return c+""}catch{}}return""}function ts(c){return ur(c,!0,!0)}function ns(c,p){return c===p||c!==c&&p!==p}function Cn(c){return ki(c)&&gt.call(c,"callee")&&(!Wr.call(c,"callee")||An.call(c)==i)}var dr=Array.isArray;function Dn(c){return c!=null&&ss(c.length)&&!pr(c)}function ki(c){return is(c)&&Dn(c)}var rs=Rn||$i;function pr(c){var p=Tt(c)?An.call(c):"";return p==f||p==m}function ss(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=s}function Tt(c){var p=typeof c;return!!c&&(p=="object"||p=="function")}function is(c){return!!c&&typeof c=="object"}function gr(c){return Dn(c)?Sn(c):Si(c)}function Fi(){return[]}function $i(){return!1}t.exports=ts}(yr,yr.exports)),yr.exports}var br={exports:{}};br.exports;var Xl;function Zc(){return Xl||(Xl=1,function(t,e){var n=200,r="__lodash_hash_undefined__",s=1,i=2,a=9007199254740991,l="[object Arguments]",o="[object Array]",u="[object AsyncFunction]",f="[object Boolean]",m="[object Date]",h="[object Error]",g="[object Function]",d="[object GeneratorFunction]",T="[object Map]",y="[object Number]",A="[object Null]",_="[object Object]",v="[object Promise]",L="[object Proxy]",N="[object RegExp]",G="[object Set]",$="[object String]",q="[object Symbol]",F="[object Undefined]",j="[object WeakMap]",E="[object ArrayBuffer]",S="[object DataView]",R="[object Float32Array]",w="[object Float64Array]",M="[object Int8Array]",I="[object Int16Array]",O="[object Int32Array]",D="[object Uint8Array]",P="[object Uint8ClampedArray]",U="[object Uint16Array]",k="[object Uint32Array]",Z=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,J=/^(?:0|[1-9]\d*)$/,X={};X[R]=X[w]=X[M]=X[I]=X[O]=X[D]=X[P]=X[U]=X[k]=!0,X[l]=X[o]=X[E]=X[f]=X[S]=X[m]=X[h]=X[g]=X[T]=X[y]=X[_]=X[N]=X[G]=X[$]=X[j]=!1;var W=typeof Vt=="object"&&Vt&&Vt.Object===Object&&Vt,se=typeof self=="object"&&self&&self.Object===Object&&self,Q=W||se||Function("return this")(),ie=e&&!e.nodeType&&e,ee=ie&&!0&&t&&!t.nodeType&&t,ae=ee&&ee.exports===ie,ue=ae&&W.process,fe=function(){try{return ue&&ue.binding&&ue.binding("util")}catch{}}(),Ee=fe&&fe.isTypedArray;function we(c,p){for(var b=-1,C=c==null?0:c.length,re=0,K=[];++b<C;){var oe=c[b];p(oe,b,c)&&(K[re++]=oe)}return K}function er(c,p){for(var b=-1,C=p.length,re=c.length;++b<C;)c[re+b]=p[b];return c}function Vr(c,p){for(var b=-1,C=c==null?0:c.length;++b<C;)if(p(c[b],b,c))return!0;return!1}function ni(c,p){for(var b=-1,C=Array(c);++b<c;)C[b]=p(b);return C}function ri(c){return function(p){return c(p)}}function In(c,p){return c.has(p)}function tr(c,p){return c==null?void 0:c[p]}function Hr(c){var p=-1,b=Array(c.size);return c.forEach(function(C,re){b[++p]=[re,C]}),b}function jr(c,p){return function(b){return c(p(b))}}function gt(c){var p=-1,b=Array(c.size);return c.forEach(function(C){b[++p]=C}),b}var An=Array.prototype,si=Function.prototype,Kt=Object.prototype,vn=Q["__core-js_shared__"],nr=si.toString,je=Kt.hasOwnProperty,zr=function(){var c=/[^.]+$/.exec(vn&&vn.keys&&vn.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Wr=Kt.toString,ii=RegExp("^"+nr.call(je).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=ae?Q.Buffer:void 0,Rn=Q.Symbol,Yr=Q.Uint8Array,On=Kt.propertyIsEnumerable,Zt=An.splice,tt=Rn?Rn.toStringTag:void 0,wn=Object.getOwnPropertySymbols,sr=rr?rr.isBuffer:void 0,Qt=jr(Object.keys,Object),ir=wt(Q,"DataView"),Jt=wt(Q,"Map"),ar=wt(Q,"Promise"),lr=wt(Q,"Set"),or=wt(Q,"WeakMap"),Ut=wt(Object,"create"),Xr=Me(ir),Ot=Me(Jt),ai=Me(ar),li=Me(lr),oi=Me(or),Kr=Rn?Rn.prototype:void 0,cr=Kr?Kr.valueOf:void 0;function ve(c){var p=-1,b=c==null?0:c.length;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function ci(){this.__data__=Ut?Ut(null):{},this.size=0}function ui(c){var p=this.has(c)&&delete this.__data__[c];return this.size-=p?1:0,p}function fi(c){var p=this.__data__;if(Ut){var b=p[c];return b===r?void 0:b}return je.call(p,c)?p[c]:void 0}function hi(c){var p=this.__data__;return Ut?p[c]!==void 0:je.call(p,c)}function di(c,p){var b=this.__data__;return this.size+=this.has(c)?0:1,b[c]=Ut&&p===void 0?r:p,this}ve.prototype.clear=ci,ve.prototype.delete=ui,ve.prototype.get=fi,ve.prototype.has=hi,ve.prototype.set=di;function Se(c){var p=-1,b=c==null?0:c.length;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function pi(){this.__data__=[],this.size=0}function gi(c){var p=this.__data__,b=Ln(p,c);if(b<0)return!1;var C=p.length-1;return b==C?p.pop():Zt.call(p,b,1),--this.size,!0}function mi(c){var p=this.__data__,b=Ln(p,c);return b<0?void 0:p[b][1]}function Ei(c){return Ln(this.__data__,c)>-1}function Ti(c,p){var b=this.__data__,C=Ln(b,c);return C<0?(++this.size,b.push([c,p])):b[C][1]=p,this}Se.prototype.clear=pi,Se.prototype.delete=gi,Se.prototype.get=mi,Se.prototype.has=Ei,Se.prototype.set=Ti;function Be(c){var p=-1,b=c==null?0:c.length;for(this.clear();++p<b;){var C=c[p];this.set(C[0],C[1])}}function _i(){this.size=0,this.__data__={hash:new ve,map:new(Jt||Se),string:new ve}}function yi(c){var p=nt(this,c).delete(c);return this.size-=p?1:0,p}function bi(c){return nt(this,c).get(c)}function Ii(c){return nt(this,c).has(c)}function Ai(c,p){var b=nt(this,c),C=b.size;return b.set(c,p),this.size+=b.size==C?0:1,this}Be.prototype.clear=_i,Be.prototype.delete=yi,Be.prototype.get=bi,Be.prototype.has=Ii,Be.prototype.set=Ai;function Sn(c){var p=-1,b=c==null?0:c.length;for(this.__data__=new Be;++p<b;)this.add(c[p])}function Zr(c){return this.__data__.set(c,r),this}function Nn(c){return this.__data__.has(c)}Sn.prototype.add=Sn.prototype.push=Zr,Sn.prototype.has=Nn;function mt(c){var p=this.__data__=new Se(c);this.size=p.size}function ur(){this.__data__=new Se,this.size=0}function vi(c){var p=this.__data__,b=p.delete(c);return this.size=p.size,b}function Ri(c){return this.__data__.get(c)}function Oi(c){return this.__data__.has(c)}function wi(c,p){var b=this.__data__;if(b instanceof Se){var C=b.__data__;if(!Jt||C.length<n-1)return C.push([c,p]),this.size=++b.size,this;b=this.__data__=new Be(C)}return b.set(c,p),this.size=b.size,this}mt.prototype.clear=ur,mt.prototype.delete=vi,mt.prototype.get=Ri,mt.prototype.has=Oi,mt.prototype.set=wi;function Si(c,p){var b=Cn(c),C=!b&&ns(c),re=!b&&!C&&Dn(c),K=!b&&!C&&!re&&is(c),oe=b||C||re||K,le=oe?ni(c.length,String):[],Te=le.length;for(var ce in c)je.call(c,ce)&&!(oe&&(ce=="length"||re&&(ce=="offset"||ce=="parent")||K&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||qi(ce,Te)))&&le.push(ce);return le}function Ln(c,p){for(var b=c.length;b--;)if(ts(c[b][0],p))return b;return-1}function fr(c,p,b){var C=p(c);return Cn(c)?C:er(C,b(c))}function en(c){return c==null?c===void 0?F:A:tt&&tt in Object(c)?St(c):es(c)}function Qr(c){return Tt(c)&&en(c)==l}function Jr(c,p,b,C,re){return c===p?!0:c==null||p==null||!Tt(c)&&!Tt(p)?c!==c&&p!==p:Ni(c,p,b,C,Jr,re)}function Ni(c,p,b,C,re,K){var oe=Cn(c),le=Cn(p),Te=oe?o:Et(c),ce=le?o:Et(p);Te=Te==l?_:Te,ce=ce==l?_:ce;var Ne=Te==_,Ge=ce==_,ye=Te==ce;if(ye&&Dn(c)){if(!Dn(p))return!1;oe=!0,Ne=!1}if(ye&&!Ne)return K||(K=new mt),oe||is(c)?hr(c,p,b,C,re,K):Mi(c,p,Te,b,C,re,K);if(!(b&s)){var Le=Ne&&je.call(c,"__wrapped__"),Re=Ge&&je.call(p,"__wrapped__");if(Le||Re){var kt=Le?c.value():c,Nt=Re?p.value():p;return K||(K=new mt),re(kt,Nt,b,C,K)}}return ye?(K||(K=new mt),xi(c,p,b,C,re,K)):!1}function Li(c){if(!ss(c)||Gi(c))return!1;var p=rs(c)?ii:ne;return p.test(Me(c))}function Ci(c){return Tt(c)&&pr(c.length)&&!!X[en(c)]}function Di(c){if(!Ui(c))return Qt(c);var p=[];for(var b in Object(c))je.call(c,b)&&b!="constructor"&&p.push(b);return p}function hr(c,p,b,C,re,K){var oe=b&s,le=c.length,Te=p.length;if(le!=Te&&!(oe&&Te>le))return!1;var ce=K.get(c);if(ce&&K.get(p))return ce==p;var Ne=-1,Ge=!0,ye=b&i?new Sn:void 0;for(K.set(c,p),K.set(p,c);++Ne<le;){var Le=c[Ne],Re=p[Ne];if(C)var kt=oe?C(Re,Le,Ne,p,c,K):C(Le,Re,Ne,c,p,K);if(kt!==void 0){if(kt)continue;Ge=!1;break}if(ye){if(!Vr(p,function(Nt,nn){if(!In(ye,nn)&&(Le===Nt||re(Le,Nt,b,C,K)))return ye.push(nn)})){Ge=!1;break}}else if(!(Le===Re||re(Le,Re,b,C,K))){Ge=!1;break}}return K.delete(c),K.delete(p),Ge}function Mi(c,p,b,C,re,K,oe){switch(b){case S:if(c.byteLength!=p.byteLength||c.byteOffset!=p.byteOffset)return!1;c=c.buffer,p=p.buffer;case E:return!(c.byteLength!=p.byteLength||!K(new Yr(c),new Yr(p)));case f:case m:case y:return ts(+c,+p);case h:return c.name==p.name&&c.message==p.message;case N:case $:return c==p+"";case T:var le=Hr;case G:var Te=C&s;if(le||(le=gt),c.size!=p.size&&!Te)return!1;var ce=oe.get(c);if(ce)return ce==p;C|=i,oe.set(c,p);var Ne=hr(le(c),le(p),C,re,K,oe);return oe.delete(c),Ne;case q:if(cr)return cr.call(c)==cr.call(p)}return!1}function xi(c,p,b,C,re,K){var oe=b&s,le=tn(c),Te=le.length,ce=tn(p),Ne=ce.length;if(Te!=Ne&&!oe)return!1;for(var Ge=Te;Ge--;){var ye=le[Ge];if(!(oe?ye in p:je.call(p,ye)))return!1}var Le=K.get(c);if(Le&&K.get(p))return Le==p;var Re=!0;K.set(c,p),K.set(p,c);for(var kt=oe;++Ge<Te;){ye=le[Ge];var Nt=c[ye],nn=p[ye];if(C)var yl=oe?C(nn,Nt,ye,p,c,K):C(Nt,nn,ye,c,p,K);if(!(yl===void 0?Nt===nn||re(Nt,nn,b,C,K):yl)){Re=!1;break}kt||(kt=ye=="constructor")}if(Re&&!kt){var as=c.constructor,ls=p.constructor;as!=ls&&"constructor"in c&&"constructor"in p&&!(typeof as=="function"&&as instanceof as&&typeof ls=="function"&&ls instanceof ls)&&(Re=!1)}return K.delete(c),K.delete(p),Re}function tn(c){return fr(c,gr,Pi)}function nt(c,p){var b=c.__data__;return Bi(p)?b[typeof p=="string"?"string":"hash"]:b.map}function wt(c,p){var b=tr(c,p);return Li(b)?b:void 0}function St(c){var p=je.call(c,tt),b=c[tt];try{c[tt]=void 0;var C=!0}catch{}var re=Wr.call(c);return C&&(p?c[tt]=b:delete c[tt]),re}var Pi=wn?function(c){return c==null?[]:(c=Object(c),we(wn(c),function(p){return On.call(c,p)}))}:Fi,Et=en;(ir&&Et(new ir(new ArrayBuffer(1)))!=S||Jt&&Et(new Jt)!=T||ar&&Et(ar.resolve())!=v||lr&&Et(new lr)!=G||or&&Et(new or)!=j)&&(Et=function(c){var p=en(c),b=p==_?c.constructor:void 0,C=b?Me(b):"";if(C)switch(C){case Xr:return S;case Ot:return T;case ai:return v;case li:return G;case oi:return j}return p});function qi(c,p){return p=p??a,!!p&&(typeof c=="number"||J.test(c))&&c>-1&&c%1==0&&c<p}function Bi(c){var p=typeof c;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?c!=="__proto__":c===null}function Gi(c){return!!zr&&zr in c}function Ui(c){var p=c&&c.constructor,b=typeof p=="function"&&p.prototype||Kt;return c===b}function es(c){return Wr.call(c)}function Me(c){if(c!=null){try{return nr.call(c)}catch{}try{return c+""}catch{}}return""}function ts(c,p){return c===p||c!==c&&p!==p}var ns=Qr(function(){return arguments}())?Qr:function(c){return Tt(c)&&je.call(c,"callee")&&!On.call(c,"callee")},Cn=Array.isArray;function dr(c){return c!=null&&pr(c.length)&&!rs(c)}var Dn=sr||$i;function ki(c,p){return Jr(c,p)}function rs(c){if(!ss(c))return!1;var p=en(c);return p==g||p==d||p==u||p==L}function pr(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=a}function ss(c){var p=typeof c;return c!=null&&(p=="object"||p=="function")}function Tt(c){return c!=null&&typeof c=="object"}var is=Ee?ri(Ee):Ci;function gr(c){return dr(c)?Si(c):Di(c)}function Fi(){return[]}function $i(){return!1}t.exports=ki}(br,br.exports)),br.exports}var us={},Kl;function Xg(){if(Kl)return us;Kl=1,Object.defineProperty(us,"__esModule",{value:!0});const t=Kc(),e=Zc();var n;return function(r){function s(o={},u={},f=!1){typeof o!="object"&&(o={}),typeof u!="object"&&(u={});let m=t(u);f||(m=Object.keys(m).reduce((h,g)=>(m[g]!=null&&(h[g]=m[g]),h),{}));for(const h in o)o[h]!==void 0&&u[h]===void 0&&(m[h]=o[h]);return Object.keys(m).length>0?m:void 0}r.compose=s;function i(o={},u={}){typeof o!="object"&&(o={}),typeof u!="object"&&(u={});const f=Object.keys(o).concat(Object.keys(u)).reduce((m,h)=>(e(o[h],u[h])||(m[h]=u[h]===void 0?null:u[h]),m),{});return Object.keys(f).length>0?f:void 0}r.diff=i;function a(o={},u={}){o=o||{};const f=Object.keys(u).reduce((m,h)=>(u[h]!==o[h]&&o[h]!==void 0&&(m[h]=u[h]),m),{});return Object.keys(o).reduce((m,h)=>(o[h]!==u[h]&&u[h]===void 0&&(m[h]=null),m),f)}r.invert=a;function l(o,u,f=!1){if(typeof o!="object")return u;if(typeof u!="object")return;if(!f)return u;const m=Object.keys(u).reduce((h,g)=>(o[g]===void 0&&(h[g]=u[g]),h),{});return Object.keys(m).length>0?m:void 0}r.transform=l}(n||(n={})),us.default=n,us}var fs={},Zl;function Qc(){if(Zl)return fs;Zl=1,Object.defineProperty(fs,"__esModule",{value:!0});var t;return function(e){function n(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}e.length=n}(t||(t={})),fs.default=t,fs}var hs={},Ql;function Kg(){if(Ql)return hs;Ql=1,Object.defineProperty(hs,"__esModule",{value:!0});const t=Qc();class e{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const s=this.ops[this.index];if(s){const i=this.offset,a=t.default.length(s);if(r>=a-i?(r=a-i,this.index+=1,this.offset=0):this.offset+=r,typeof s.delete=="number")return{delete:r};{const l={};return s.attributes&&(l.attributes=s.attributes),typeof s.retain=="number"?l.retain=r:typeof s.retain=="object"&&s.retain!==null?l.retain=s.retain:typeof s.insert=="string"?l.insert=s.insert.substr(i,r):l.insert=s.insert,l}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,s=this.index,i=this.next(),a=this.ops.slice(this.index);return this.offset=r,this.index=s,[i].concat(a)}}else return[]}}return hs.default=e,hs}var Jl;function Zg(){return Jl||(Jl=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const n=Yg(),r=Kc(),s=Zc(),i=Xg();e.AttributeMap=i.default;const a=Qc();e.Op=a.default;const l=Kg();e.OpIterator=l.default;const o="\0",u=(m,h)=>{if(typeof m!="object"||m===null)throw new Error(`cannot retain a ${typeof m}`);if(typeof h!="object"||h===null)throw new Error(`cannot retain a ${typeof h}`);const g=Object.keys(m)[0];if(!g||g!==Object.keys(h)[0])throw new Error(`embed types not matched: ${g} != ${Object.keys(h)[0]}`);return[g,m[g],h[g]]};class f{constructor(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]}static registerEmbed(h,g){this.handlers[h]=g}static unregisterEmbed(h){delete this.handlers[h]}static getHandler(h){const g=this.handlers[h];if(!g)throw new Error(`no handlers for embed type "${h}"`);return g}insert(h,g){const d={};return typeof h=="string"&&h.length===0?this:(d.insert=h,g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(d.attributes=g),this.push(d))}delete(h){return h<=0?this:this.push({delete:h})}retain(h,g){if(typeof h=="number"&&h<=0)return this;const d={retain:h};return g!=null&&typeof g=="object"&&Object.keys(g).length>0&&(d.attributes=g),this.push(d)}push(h){let g=this.ops.length,d=this.ops[g-1];if(h=r(h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[g-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(g-=1,d=this.ops[g-1],typeof d!="object"))return this.ops.unshift(h),this;if(s(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[g-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[g-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[g-1].attributes=h.attributes),this}}return g===this.ops.length?this.ops.push(h):this.ops.splice(g,0,h),this}chop(){const h=this.ops[this.ops.length-1];return h&&typeof h.retain=="number"&&!h.attributes&&this.ops.pop(),this}filter(h){return this.ops.filter(h)}forEach(h){this.ops.forEach(h)}map(h){return this.ops.map(h)}partition(h){const g=[],d=[];return this.forEach(T=>{(h(T)?g:d).push(T)}),[g,d]}reduce(h,g){return this.ops.reduce(h,g)}changeLength(){return this.reduce((h,g)=>g.insert?h+a.default.length(g):g.delete?h-g.delete:h,0)}length(){return this.reduce((h,g)=>h+a.default.length(g),0)}slice(h=0,g=1/0){const d=[],T=new l.default(this.ops);let y=0;for(;y<g&&T.hasNext();){let A;y<h?A=T.next(h-y):(A=T.next(g-y),d.push(A)),y+=a.default.length(A)}return new f(d)}compose(h){const g=new l.default(this.ops),d=new l.default(h.ops),T=[],y=d.peek();if(y!=null&&typeof y.retain=="number"&&y.attributes==null){let _=y.retain;for(;g.peekType()==="insert"&&g.peekLength()<=_;)_-=g.peekLength(),T.push(g.next());y.retain-_>0&&d.next(y.retain-_)}const A=new f(T);for(;g.hasNext()||d.hasNext();)if(d.peekType()==="insert")A.push(d.next());else if(g.peekType()==="delete")A.push(g.next());else{const _=Math.min(g.peekLength(),d.peekLength()),v=g.next(_),L=d.next(_);if(L.retain){const N={};if(typeof v.retain=="number")N.retain=typeof L.retain=="number"?_:L.retain;else if(typeof L.retain=="number")v.retain==null?N.insert=v.insert:N.retain=v.retain;else{const $=v.retain==null?"insert":"retain",[q,F,j]=u(v[$],L.retain),E=f.getHandler(q);N[$]={[q]:E.compose(F,j,$==="retain")}}const G=i.default.compose(v.attributes,L.attributes,typeof v.retain=="number");if(G&&(N.attributes=G),A.push(N),!d.hasNext()&&s(A.ops[A.ops.length-1],N)){const $=new f(g.rest());return A.concat($).chop()}}else typeof L.delete=="number"&&(typeof v.retain=="number"||typeof v.retain=="object"&&v.retain!==null)&&A.push(L)}return A.chop()}concat(h){const g=new f(this.ops.slice());return h.ops.length>0&&(g.push(h.ops[0]),g.ops=g.ops.concat(h.ops.slice(1))),g}diff(h,g){if(this.ops===h.ops)return new f;const d=[this,h].map(v=>v.map(L=>{if(L.insert!=null)return typeof L.insert=="string"?L.insert:o;const N=v===h?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")),T=new f,y=n(d[0],d[1],g,!0),A=new l.default(this.ops),_=new l.default(h.ops);return y.forEach(v=>{let L=v[1].length;for(;L>0;){let N=0;switch(v[0]){case n.INSERT:N=Math.min(_.peekLength(),L),T.push(_.next(N));break;case n.DELETE:N=Math.min(L,A.peekLength()),A.next(N),T.delete(N);break;case n.EQUAL:N=Math.min(A.peekLength(),_.peekLength(),L);const G=A.next(N),$=_.next(N);s(G.insert,$.insert)?T.retain(N,i.default.diff(G.attributes,$.attributes)):T.push($).delete(N);break}L-=N}}),T.chop()}eachLine(h,g=`
`){const d=new l.default(this.ops);let T=new f,y=0;for(;d.hasNext();){if(d.peekType()!=="insert")return;const A=d.peek(),_=a.default.length(A)-d.peekLength(),v=typeof A.insert=="string"?A.insert.indexOf(g,_)-_:-1;if(v<0)T.push(d.next());else if(v>0)T.push(d.next(v));else{if(h(T,d.next(1).attributes||{},y)===!1)return;y+=1,T=new f}}T.length()>0&&h(T,{},y)}invert(h){const g=new f;return this.reduce((d,T)=>{if(T.insert)g.delete(a.default.length(T));else{if(typeof T.retain=="number"&&T.attributes==null)return g.retain(T.retain),d+T.retain;if(T.delete||typeof T.retain=="number"){const y=T.delete||T.retain;return h.slice(d,d+y).forEach(_=>{T.delete?g.push(_):T.retain&&T.attributes&&g.retain(a.default.length(_),i.default.invert(T.attributes,_.attributes))}),d+y}else if(typeof T.retain=="object"&&T.retain!==null){const y=h.slice(d,d+1),A=new l.default(y.ops).next(),[_,v,L]=u(T.retain,A.insert),N=f.getHandler(_);return g.retain({[_]:N.invert(v,L)},i.default.invert(T.attributes,A.attributes)),d+1}}return d},0),g.chop()}transform(h,g=!1){if(g=!!g,typeof h=="number")return this.transformPosition(h,g);const d=h,T=new l.default(this.ops),y=new l.default(d.ops),A=new f;for(;T.hasNext()||y.hasNext();)if(T.peekType()==="insert"&&(g||y.peekType()!=="insert"))A.retain(a.default.length(T.next()));else if(y.peekType()==="insert")A.push(y.next());else{const _=Math.min(T.peekLength(),y.peekLength()),v=T.next(_),L=y.next(_);if(v.delete)continue;if(L.delete)A.push(L);else{const N=v.retain,G=L.retain;let $=typeof G=="object"&&G!==null?G:_;if(typeof N=="object"&&N!==null&&typeof G=="object"&&G!==null){const q=Object.keys(N)[0];if(q===Object.keys(G)[0]){const F=f.getHandler(q);F&&($={[q]:F.transform(N[q],G[q],g)})}}A.retain($,i.default.transform(v.attributes,L.attributes,g))}}return A.chop()}transformPosition(h,g=!1){g=!!g;const d=new l.default(this.ops);let T=0;for(;d.hasNext()&&T<=h;){const y=d.peekLength(),A=d.peekType();if(d.next(),A==="delete"){h-=Math.min(y,h-T);continue}else A==="insert"&&(T<h||!g)&&(h+=y);T+=y}return h}}f.Op=a.default,f.OpIterator=l.default,f.AttributeMap=i.default,f.handlers={},e.default=f,t.exports=f,t.exports.default=f}(cs,cs.exports)),cs.exports}var Je=Zg();const z=bc(Je);class dt extends He{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}dt.blotName="break";dt.tagName="BR";let ft=class extends qs{};const Qg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function zs(t){return t.replace(/[&<>"']/g,e=>Qg[e])}const _t=class _t extends Xa{static compare(e,n){const r=_t.order.indexOf(e),s=_t.order.indexOf(n);return r>=0||s>=0?r-s:e===n?0:e<n?-1:1}formatAt(e,n,r,s){if(_t.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Y.BLOT)){const i=this.isolate(e,n);s&&i.wrap(r,s)}else super.formatAt(e,n,r,s)}optimize(e){if(super.optimize(e),this.parent instanceof _t&&_t.compare(this.statics.blotName,this.parent.statics.blotName)>0){const n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}};V(_t,"allowedChildren",[_t,dt,He,ft]),V(_t,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Rt=_t;const eo=1;class Oe extends Dr{constructor(){super(...arguments);V(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=Jc(this)),this.cache.delta}deleteAt(n,r){super.deleteAt(n,r),this.cache={}}formatAt(n,r,s,i){r<=0||(this.scroll.query(s,Y.BLOCK)?n+r===this.length()&&this.format(s,i):super.formatAt(n,Math.min(r,this.length()-n-1),s,i),this.cache={})}insertAt(n,r,s){if(s!=null){super.insertAt(n,r,s),this.cache={};return}if(r.length===0)return;const i=r.split(`
`),a=i.shift();a.length>0&&(n<this.length()-1||this.children.tail==null?super.insertAt(Math.min(n,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});let l=this;i.reduce((o,u)=>(l=l.split(o,!0),l.insertAt(0,u),u.length),n+a.length)}insertBefore(n,r){const{head:s}=this.children;super.insertBefore(n,r),s instanceof dt&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+eo),this.cache.length}moveChildren(n,r){super.moveChildren(n,r),this.cache={}}optimize(n){super.optimize(n),this.cache={}}path(n){return super.path(n,!0)}removeChild(n){super.removeChild(n),this.cache={}}split(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r&&(n===0||n>=this.length()-eo)){const i=this.clone();return n===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(n,r);return this.cache={},s}}Oe.blotName="block";Oe.tagName="P";Oe.defaultChild=dt;Oe.allowedChildren=[dt,Rt,He,ft];class Qe extends He{attach(){super.attach(),this.attributes=new Hs(this.domNode)}delta(){return new z().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(e,n){const r=this.scroll.query(e,Y.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,n)}formatAt(e,n,r,s){this.format(r,s)}insertAt(e,n,r){if(r!=null){super.insertAt(e,n,r);return}const s=n.split(`
`),i=s.pop(),a=s.map(o=>{const u=this.scroll.create(Oe.blotName);return u.insertAt(0,o),u}),l=this.split(e);a.forEach(o=>{this.parent.insertBefore(o,l)}),i&&this.parent.insertBefore(this.scroll.create("text",i),l)}}Qe.scope=Y.BLOCK_BLOT;function Jc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.descendants(Ce).reduce((n,r)=>r.length()===0?n:n.insert(r.value(),Ke(r,{},e)),new z).insert(`
`,Ke(t))}function Ke(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t==null||("formats"in t&&typeof t.formats=="function"&&(e={...e,...t.formats()},n&&delete e["code-token"]),t.parent==null||t.parent.statics.blotName==="scroll"||t.parent.statics.scope!==t.statics.scope)?e:Ke(t.parent,e,n)}const Xe=class Xe extends He{static value(){}constructor(e,n,r){super(e,n),this.selection=r,this.textNode=document.createTextNode(Xe.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(e,n){if(this.savedLength!==0){super.format(e,n);return}let r=this,s=0;for(;r!=null&&r.statics.scope!==Y.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Xe.CONTENTS.length,r.optimize(),r.formatAt(s,Xe.CONTENTS.length,e,n),this.savedLength=0)}index(e,n){return e===this.textNode?0:super.index(e,n)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const e=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const n=this.prev instanceof ft?this.prev:null,r=n?n.length():0,s=this.next instanceof ft?this.next:null,i=s?s.text:"",{textNode:a}=this,l=a.data.split(Xe.CONTENTS).join("");a.data=Xe.CONTENTS;let o;if(n)o=n,(l||s)&&(n.insertAt(n.length(),l+i),s&&s.remove());else if(s)o=s,s.insertAt(0,l);else{const u=document.createTextNode(l);o=this.scroll.create(u),this.parent.insertBefore(o,this)}if(this.remove(),e){const u=(h,g)=>n&&h===n.domNode?g:h===a?r+g-1:s&&h===s.domNode?r+l.length+g:null,f=u(e.start.node,e.start.offset),m=u(e.end.node,e.end.offset);if(f!==null&&m!==null)return{startNode:o.domNode,startOffset:f,endNode:o.domNode,endOffset:m}}return null}update(e,n){if(e.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(n.range=r)}}optimize(e){super.optimize(e);let{parent:n}=this;for(;n;){if(n.domNode.tagName==="A"){this.savedLength=Xe.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}value(){return""}};V(Xe,"blotName","cursor"),V(Xe,"className","ql-cursor"),V(Xe,"tagName","span"),V(Xe,"CONTENTS","\uFEFF");let Yn=Xe;var Yi={exports:{}},to;function Jg(){return to||(to=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(o,u,f){this.fn=o,this.context=u,this.once=f||!1}function i(o,u,f,m,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,m||o,h),d=n?n+u:u;return o._events[d]?o._events[d].fn?o._events[d]=[o._events[d],g]:o._events[d].push(g):(o._events[d]=g,o._eventsCount++),o}function a(o,u){--o._eventsCount===0?o._events=new r:delete o._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,m;if(this._eventsCount===0)return u;for(m in f=this._events)e.call(f,m)&&u.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,g=m.length,d=new Array(g);h<g;h++)d[h]=m[h].fn;return d},l.prototype.listenerCount=function(u){var f=n?n+u:u,m=this._events[f];return m?m.fn?1:m.length:0},l.prototype.emit=function(u,f,m,h,g,d){var T=n?n+u:u;if(!this._events[T])return!1;var y=this._events[T],A=arguments.length,_,v;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),A){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,m),!0;case 4:return y.fn.call(y.context,f,m,h),!0;case 5:return y.fn.call(y.context,f,m,h,g),!0;case 6:return y.fn.call(y.context,f,m,h,g,d),!0}for(v=1,_=new Array(A-1);v<A;v++)_[v-1]=arguments[v];y.fn.apply(y.context,_)}else{var L=y.length,N;for(v=0;v<L;v++)switch(y[v].once&&this.removeListener(u,y[v].fn,void 0,!0),A){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,f);break;case 3:y[v].fn.call(y[v].context,f,m);break;case 4:y[v].fn.call(y[v].context,f,m,h);break;default:if(!_)for(N=1,_=new Array(A-1);N<A;N++)_[N-1]=arguments[N];y[v].fn.apply(y[v].context,_)}}return!0},l.prototype.on=function(u,f,m){return i(this,u,f,m,!1)},l.prototype.once=function(u,f,m){return i(this,u,f,m,!0)},l.prototype.removeListener=function(u,f,m,h){var g=n?n+u:u;if(!this._events[g])return this;if(!f)return a(this,g),this;var d=this._events[g];if(d.fn)d.fn===f&&(!h||d.once)&&(!m||d.context===m)&&a(this,g);else{for(var T=0,y=[],A=d.length;T<A;T++)(d[T].fn!==f||h&&!d[T].once||m&&d[T].context!==m)&&y.push(d[T]);y.length?this._events[g]=y.length===1?y[0]:y:a(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&a(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l}(Yi)),Yi.exports}var em=Jg();const tm=bc(em),Aa=new WeakMap,va=["error","warn","log","info"];let Ra="warn";function eu(t){if(Ra&&va.indexOf(t)<=va.indexOf(Ra)){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];console[t](...n)}}function Gt(t){return va.reduce((e,n)=>(e[n]=eu.bind(console,n,t),e),{})}Gt.level=t=>{Ra=t};eu.level=Gt.level;const Xi=Gt("quill:events"),nm=["selectionchange","mousedown","mouseup","click"];nm.forEach(t=>{document.addEventListener(t,function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=Aa.get(s);i&&i.emitter&&i.emitter.handleDOM(...n)})})});class H extends tm{constructor(){super(),this.domListeners={},this.on("error",Xi.error)}emit(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Xi.log.call(Xi,...n),super.emit(...n)}handleDOM(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];(this.domListeners[e.type]||[]).forEach(i=>{let{node:a,handler:l}=i;(e.target===a||a.contains(e.target))&&l(e,...r)})}listenDOM(e,n,r){this.domListeners[e]||(this.domListeners[e]=[]),this.domListeners[e].push({node:n,handler:r})}}V(H,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),V(H,"sources",{API:"api",SILENT:"silent",USER:"user"});const Ki=Gt("quill:selection");class dn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=e,this.length=n}}class rm{constructor(e,n){this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new dn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,H.sources.USER),1)}),this.emitter.on(H.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(H.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const a=i.some(l=>l.type==="characterData"||l.type==="childList"||l.type==="attributes"&&l.target===this.root);this.update(a?H.sources.SILENT:s)}catch{}})}),this.emitter.on(H.events.SCROLL_OPTIMIZE,(r,s)=>{if(s.range){const{startNode:i,startOffset:a,endNode:l,endOffset:o}=s.range;this.setNativeRange(i,a,l,o),this.update(H.sources.SILENT)}}),this.update(H.sources.SILENT)}handleComposition(){this.emitter.on(H.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(H.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const e=this.cursor.restore();if(!e)return;setTimeout(()=>{this.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(H.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(e,n){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(e,Y.BLOCK))){if(r.start.node!==this.cursor.textNode){const s=this.scroll.find(r.start.node,!1);if(s==null)return;if(s instanceof Ce){const i=s.split(r.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,n),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;let s,[i,a]=this.scroll.leaf(e);if(i==null)return null;if(n>0&&a===i.length()){const[f]=this.scroll.leaf(e+1);if(f){const[m]=this.scroll.line(e),[h]=this.scroll.line(e+1);m===h&&(i=f,a=0)}}[s,a]=i.position(a,!0);const l=document.createRange();if(n>0)return l.setStart(s,a),[i,a]=this.scroll.leaf(e+n),i==null?null:([s,a]=i.position(a,!0),l.setEnd(s,a),l.getBoundingClientRect());let o="left",u;if(s instanceof Text){if(!s.data.length)return null;a<s.data.length?(l.setStart(s,a),l.setEnd(s,a+1)):(l.setStart(s,a-1),l.setEnd(s,a),o="right"),u=l.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;u=i.domNode.getBoundingClientRect(),a>0&&(o="right")}return{bottom:u.top+u.height,height:u.height,left:u[o],right:u[o],top:u.top,width:0}}getNativeRange(){const e=document.getSelection();if(e==null||e.rangeCount<=0)return null;const n=e.getRangeAt(0);if(n==null)return null;const r=this.normalizeNative(n);return Ki.info("getNativeRange",r),r}getRange(){const e=this.scroll.domNode;if("isConnected"in e&&!e.isConnected)return[null,null];const n=this.getNativeRange();return n==null?[null,null]:[this.normalizedToRange(n),n]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Zi(this.root,document.activeElement)}normalizedToRange(e){const n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);const r=n.map(a=>{const[l,o]=a,u=this.scroll.find(l,!0),f=u.offset(this.scroll);return o===0?f:u instanceof Ce?f+u.index(l,o):f+u.length()}),s=Math.min(Math.max(...r),this.scroll.length()-1),i=Math.min(s,...r);return new dn(i,s-i)}normalizeNative(e){if(!Zi(this.root,e.startContainer)||!e.collapsed&&!Zi(this.root,e.endContainer))return null;const n={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[n.start,n.end].forEach(r=>{let{node:s,offset:i}=r;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;r.node=s,r.offset=i}),n}rangeToNative(e){const n=this.scroll.length(),r=(s,i)=>{s=Math.min(n-1,s);const[a,l]=this.scroll.leaf(s);return a?a.position(l,i):[null,-1]};return[...r(e.index,!1),...r(e.index+e.length,!0)]}setNativeRange(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Ki.info("setNativeRange",e,n,r,s),e!=null&&(this.root.parentNode==null||e.parentNode==null||r.parentNode==null))return;const a=document.getSelection();if(a!=null)if(e!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:l}=this.getNativeRange()||{};if(l==null||i||e!==l.startContainer||n!==l.startOffset||r!==l.endContainer||s!==l.endOffset){e instanceof Element&&e.tagName==="BR"&&(n=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),r instanceof Element&&r.tagName==="BR"&&(s=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const o=document.createRange();o.setStart(e,n),o.setEnd(r,s),a.removeAllRanges(),a.addRange(o)}}else a.removeAllRanges(),this.root.blur()}setRange(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H.sources.API;if(typeof n=="string"&&(r=n,n=!1),Ki.info("setRange",e),e!=null){const s=this.rangeToNative(e);this.setNativeRange(...s,n)}else this.setNativeRange(null);this.update(r)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H.sources.USER;const n=this.lastRange,[r,s]=this.getRange();if(this.lastRange=r,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Ya(n,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const a=this.cursor.restore();a&&this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)}const i=[H.events.SELECTION_CHANGE,$n(this.lastRange),$n(n),e];this.emitter.emit(H.events.EDITOR_CHANGE,...i),e!==H.sources.SILENT&&this.emitter.emit(...i)}}}function Zi(t,e){try{e.parentNode}catch{return!1}return t.contains(e)}const sm=/^[ -~]*$/;class im{constructor(e){this.scroll=e,this.delta=this.getDelta()}applyDelta(e){this.scroll.update();let n=this.scroll.length();this.scroll.batchStart();const r=no(e),s=new z;return lm(r.ops.slice()).reduce((a,l)=>{const o=Je.Op.length(l);let u=l.attributes||{},f=!1,m=!1;if(l.insert!=null){if(s.retain(o),typeof l.insert=="string"){const d=l.insert;m=!d.endsWith(`
`)&&(n<=a||!!this.scroll.descendant(Qe,a)[0]),this.scroll.insertAt(a,d);const[T,y]=this.scroll.line(a);let A=zt({},Ke(T));if(T instanceof Oe){const[_]=T.descendant(Ce,y);_&&(A=zt(A,Ke(_)))}u=Je.AttributeMap.diff(A,u)||{}}else if(typeof l.insert=="object"){const d=Object.keys(l.insert)[0];if(d==null)return a;const T=this.scroll.query(d,Y.INLINE)!=null;if(T)(n<=a||this.scroll.descendant(Qe,a)[0])&&(m=!0);else if(a>0){const[y,A]=this.scroll.descendant(Ce,a-1);y instanceof ft?y.value()[A]!==`
`&&(f=!0):y instanceof He&&y.statics.scope===Y.INLINE_BLOT&&(f=!0)}if(this.scroll.insertAt(a,d,l.insert[d]),T){const[y]=this.scroll.descendant(Ce,a);if(y){const A=zt({},Ke(y));u=Je.AttributeMap.diff(A,u)||{}}}}n+=o}else if(s.push(l),l.retain!==null&&typeof l.retain=="object"){const d=Object.keys(l.retain)[0];if(d==null)return a;this.scroll.updateEmbedAt(a,d,l.retain[d])}Object.keys(u).forEach(d=>{this.scroll.formatAt(a,o,d,u[d])});const h=f?1:0,g=m?1:0;return n+=h+g,s.retain(h),s.delete(g),a+o+h+g},0),s.reduce((a,l)=>typeof l.delete=="number"?(this.scroll.deleteAt(a,l.delete),a):a+Je.Op.length(l),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(e,n){return this.scroll.deleteAt(e,n),this.update(new z().retain(e).delete(n))}formatLine(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(i=>{this.scroll.lines(e,Math.max(n,1)).forEach(a=>{a.format(i,r[i])})}),this.scroll.optimize();const s=new z().retain(e).retain(n,$n(r));return this.update(s)}formatText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(i=>{this.scroll.formatAt(e,n,i,r[i])});const s=new z().retain(e).retain(n,$n(r));return this.update(s)}getContents(e,n){return this.delta.slice(e,e+n)}getDelta(){return this.scroll.lines().reduce((e,n)=>e.concat(n.delta()),new z)}getFormat(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],s=[];n===0?this.scroll.path(e).forEach(l=>{const[o]=l;o instanceof Oe?r.push(o):o instanceof Ce&&s.push(o)}):(r=this.scroll.lines(e,n),s=this.scroll.descendants(Ce,e,n));const[i,a]=[r,s].map(l=>{const o=l.shift();if(o==null)return{};let u=Ke(o);for(;Object.keys(u).length>0;){const f=l.shift();if(f==null)return u;u=am(Ke(f),u)}return u});return{...i,...a}}getHTML(e,n){const[r,s]=this.scroll.line(e);if(r){const i=r.length();return r.length()>=s+n&&!(s===0&&n===i)?Mr(r,s,n,!0):Mr(this.scroll,e,n,!0)}return""}getText(e,n){return this.getContents(e,n).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(e,n){const r=no(n),s=new z().retain(e).concat(r);return this.scroll.insertContents(e,r),this.update(s)}insertEmbed(e,n,r){return this.scroll.insertAt(e,n,r),this.update(new z().retain(e).insert({[n]:r}))}insertText(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n=n.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(e,n),Object.keys(r).forEach(s=>{this.scroll.formatAt(e,n.length,s,r[s])}),this.update(new z().retain(e).insert(n,$n(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const e=this.scroll.children.head;if((e==null?void 0:e.statics.blotName)!==Oe.blotName)return!1;const n=e;return n.children.length>1?!1:n.children.head instanceof dt}removeFormat(e,n){const r=this.getText(e,n),[s,i]=this.scroll.line(e+n);let a=0,l=new z;s!=null&&(a=s.length()-i,l=s.delta().slice(i,i+a-1).insert(`
`));const u=this.getContents(e,n+a).diff(new z().insert(r).concat(l)),f=new z().retain(e).concat(u);return this.applyDelta(f)}update(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(n.length===1&&n[0].type==="characterData"&&n[0].target.data.match(sm)&&this.scroll.find(n[0].target)){const i=this.scroll.find(n[0].target),a=Ke(i),l=i.offset(this.scroll),o=n[0].oldValue.replace(Yn.CONTENTS,""),u=new z().insert(o),f=new z().insert(i.value()),m=r&&{oldRange:ro(r.oldRange,-l),newRange:ro(r.newRange,-l)};e=new z().retain(l).concat(u.diff(f,m)).reduce((g,d)=>d.insert?g.insert(d.insert,a):g.push(d),new z),this.delta=s.compose(e)}else this.delta=this.getDelta(),(!e||!Ya(s.compose(e),this.delta))&&(e=s.diff(this.delta,r));return e}}function Bn(t,e,n){if(t.length===0){const[g]=Qi(n.pop());return e<=0?`</li></${g}>`:`</li></${g}>${Bn([],e-1,n)}`}const[{child:r,offset:s,length:i,indent:a,type:l},...o]=t,[u,f]=Qi(l);if(a>e)return n.push(l),a===e+1?`<${u}><li${f}>${Mr(r,s,i)}${Bn(o,a,n)}`:`<${u}><li>${Bn(t,e+1,n)}`;const m=n[n.length-1];if(a===e&&l===m)return`</li><li${f}>${Mr(r,s,i)}${Bn(o,a,n)}`;const[h]=Qi(n.pop());return`</li></${h}>${Bn(t,e-1,n)}`}function Mr(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in t&&typeof t.html=="function")return t.html(e,n);if(t instanceof ft)return zs(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof ut){if(t.statics.blotName==="list-container"){const u=[];return t.children.forEachAt(e,n,(f,m,h)=>{const g="formats"in f&&typeof f.formats=="function"?f.formats():{};u.push({child:f,offset:m,length:h,indent:g.indent||0,type:g.list})}),Bn(u,-1,[])}const s=[];if(t.children.forEachAt(e,n,(u,f,m)=>{s.push(Mr(u,f,m))}),r||t.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:a}=t.domNode,[l,o]=i.split(`>${a}<`);return l==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${o}`:`${l}>${s.join("")}<${o}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function am(t,e){return Object.keys(e).reduce((n,r)=>{if(t[r]==null)return n;const s=e[r];return s===t[r]?n[r]=s:Array.isArray(s)?s.indexOf(t[r])<0?n[r]=s.concat([t[r]]):n[r]=s:n[r]=[s,t[r]],n},{})}function Qi(t){const e=t==="ordered"?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function no(t){return t.reduce((e,n)=>{if(typeof n.insert=="string"){const r=n.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return e.insert(r,n.attributes)}return e.push(n)},new z)}function ro(t,e){let{index:n,length:r}=t;return new dn(n+e,r)}function lm(t){const e=[];return t.forEach(n=>{typeof n.insert=="string"?n.insert.split(`
`).forEach((s,i)=>{i&&e.push({insert:`
`,attributes:n.attributes}),s&&e.push({insert:s,attributes:n.attributes})}):e.push(n)}),e}class pt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=e,this.options=n}}V(pt,"DEFAULTS",{});const ds="\uFEFF";class Za extends He{constructor(e,n){super(e,n),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(ds),this.rightGuard=document.createTextNode(ds),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:super.index(e,n)}restore(e){let n=null,r;const s=e.data.split(ds).join("");if(e===this.leftGuard)if(this.prev instanceof ft){const i=this.prev.length();this.prev.insertAt(i,s),n={startNode:this.prev.domNode,startOffset:i+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this),n={startNode:r,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof ft?(this.next.insertAt(0,s),n={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(r),this.next),n={startNode:r,startOffset:s.length}));return e.data=ds,n}update(e,n){e.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const s=this.restore(r.target);s&&(n.range=s)}})}}class om{constructor(e,n){V(this,"isComposing",!1);this.scroll=e,this.emitter=n,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",e=>{this.isComposing||this.handleCompositionStart(e)}),this.scroll.domNode.addEventListener("compositionend",e=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(e)})})}handleCompositionStart(e){const n=e.target instanceof Node?this.scroll.find(e.target,!0):null;n&&!(n instanceof Za)&&(this.emitter.emit(H.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(H.events.COMPOSITION_START,e),this.isComposing=!0)}handleCompositionEnd(e){this.emitter.emit(H.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(H.events.COMPOSITION_END,e),this.isComposing=!1}}const wr=class wr{constructor(e,n){V(this,"modules",{});this.quill=e,this.options=n}init(){Object.keys(this.options.modules).forEach(e=>{this.modules[e]==null&&this.addModule(e)})}addModule(e){const n=this.quill.constructor.import(`modules/${e}`);return this.modules[e]=new n(this.quill,this.options.modules[e]||{}),this.modules[e]}};V(wr,"DEFAULTS",{modules:{}}),V(wr,"themes",{default:wr});let Xn=wr;const cm=t=>t.parentElement||t.getRootNode().host||null,um=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},ps=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},so=(t,e,n,r,s,i)=>t<n&&e>r?0:t<n?-(n-t+s):e>r?e-t>r-n?t+s-n:e-r+i:0,fm=(t,e)=>{var i,a,l;const n=t.ownerDocument;let r=e,s=t;for(;s;){const o=s===n.body,u=o?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??n.documentElement.clientWidth,bottom:((a=window.visualViewport)==null?void 0:a.height)??n.documentElement.clientHeight,left:0}:um(s),f=getComputedStyle(s),m=so(r.left,r.right,u.left,u.right,ps(f.scrollPaddingLeft),ps(f.scrollPaddingRight)),h=so(r.top,r.bottom,u.top,u.bottom,ps(f.scrollPaddingTop),ps(f.scrollPaddingBottom));if(m||h)if(o)(l=n.defaultView)==null||l.scrollBy(m,h);else{const{scrollLeft:g,scrollTop:d}=s;h&&(s.scrollTop+=h),m&&(s.scrollLeft+=m);const T=s.scrollLeft-g,y=s.scrollTop-d;r={left:r.left-T,top:r.top-y,right:r.right-T,bottom:r.bottom-y}}s=o||f.position==="fixed"?null:cm(s)}},hm=100,dm=["block","break","cursor","inline","scroll","text"],pm=(t,e,n)=>{const r=new Wn;return dm.forEach(s=>{const i=e.query(s);i&&r.register(i)}),t.forEach(s=>{let i=e.query(s);i||n.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let a=0;for(;i;)if(r.register(i),i="blotName"in i?i.requiredContainer??null:null,a+=1,a>hm){n.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),r},Hn=Gt("quill"),gs=new Wn;ut.uiClass="ql-ui";const st=class st{static debug(e){e===!0&&(e="log"),Gt.level(e)}static find(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Aa.get(e)||gs.find(e,n)}static import(e){return this.imports[e]==null&&Hn.error(`Cannot import ${e}. Are you sure it was registered?`),this.imports[e]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const e=arguments.length<=0?void 0:arguments[0],n=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in e?e.attrName:e.blotName;typeof r=="string"?this.register(`formats/${r}`,e,n):Object.keys(e).forEach(s=>{this.register(s,e[s],n)})}else{const e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[e]!=null&&!r&&Hn.warn(`Overwriting ${e} with`,n),this.imports[e]=n,(e.startsWith("blots/")||e.startsWith("formats/"))&&n&&typeof n!="boolean"&&n.blotName!=="abstract"&&gs.register(n),typeof n.register=="function"&&n.register(gs)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=gm(e,n),this.container=this.options.container,this.container==null){Hn.error("Invalid Quill container",e);return}this.options.debug&&st.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Aa.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new H;const s=Ka.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new im(this.scroll),this.selection=new rm(this.scroll,this.emitter),this.composition=new om(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(H.events.EDITOR_CHANGE,a=>{a===H.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(H.events.SCROLL_UPDATE,(a,l)=>{const o=this.selection.lastRange,[u]=this.selection.getRange(),f=o&&u?{oldRange:o,newRange:u}:void 0;rt.call(this,()=>this.editor.update(null,l,f),a)}),this.emitter.on(H.events.SCROLL_EMBED_UPDATE,(a,l)=>{const o=this.selection.lastRange,[u]=this.selection.getRange(),f=o&&u?{oldRange:o,newRange:u}:void 0;rt.call(this,()=>{const m=new z().retain(a.offset(this)).retain({[a.statics.blotName]:l});return this.editor.update(m,[],f)},st.sources.USER)}),r){const a=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof e=="string"){const r=e;e=document.createElement("div"),e.classList.add(r)}return this.container.insertBefore(e,n),e}blur(){this.selection.setRange(null)}deleteText(e,n,r){return[e,n,,r]=Lt(e,n,r),rt.call(this,()=>this.editor.deleteText(e,n),r,e,-1*n)}disable(){this.enable(!1)}editReadOnly(e){this.allowReadOnlyEdits=!0;const n=e();return this.allowReadOnlyEdits=!1,n}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}focus(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),e.preventScroll||this.scrollSelectionIntoView()}format(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:H.sources.API;return rt.call(this,()=>{const s=this.getSelection(!0);let i=new z;if(s==null)return i;if(this.scroll.query(e,Y.BLOCK))i=this.editor.formatLine(s.index,s.length,{[e]:n});else{if(s.length===0)return this.selection.format(e,n),i;i=this.editor.formatText(s.index,s.length,{[e]:n})}return this.setSelection(s,H.sources.SILENT),i},r)}formatLine(e,n,r,s,i){let a;return[e,n,a,i]=Lt(e,n,r,s,i),rt.call(this,()=>this.editor.formatLine(e,n,a),i,e,0)}formatText(e,n,r,s,i){let a;return[e,n,a,i]=Lt(e,n,r,s,i),rt.call(this,()=>this.editor.formatText(e,n,a),i,e,0)}getBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof e=="number"?r=this.selection.getBounds(e,n):r=this.selection.getBounds(e.index,e.length),!r)return null;const s=this.container.getBoundingClientRect();return{bottom:r.bottom-s.top,height:r.height,left:r.left-s.left,right:r.right-s.left,top:r.top-s.top,width:r.width}}getContents(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-e;return[e,n]=Lt(e,n),this.editor.getContents(e,n)}getFormat(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof e=="number"?this.editor.getFormat(e,n):this.editor.getFormat(e.index,e.length)}getIndex(e){return e.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(e){return this.scroll.leaf(e)}getLine(e){return this.scroll.line(e)}getLines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof e!="number"?this.scroll.lines(e.index,e.length):this.scroll.lines(e,n)}getModule(e){return this.theme.modules[e]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Lt(e,n),this.editor.getHTML(e,n)}getText(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;return typeof e=="number"&&(n=n??this.getLength()-e),[e,n]=Lt(e,n),this.editor.getText(e,n)}hasFocus(){return this.selection.hasFocus()}insertEmbed(e,n,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:st.sources.API;return rt.call(this,()=>this.editor.insertEmbed(e,n,r),s,e)}insertText(e,n,r,s,i){let a;return[e,,a,i]=Lt(e,0,r,s,i),rt.call(this,()=>this.editor.insertText(e,n,a),i,e,n.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(e,n,r){return[e,n,,r]=Lt(e,n,r),rt.call(this,()=>this.editor.removeFormat(e,n),r,e)}scrollRectIntoView(e){fm(this.root,e)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const e=this.selection.lastRange,n=e&&this.selection.getBounds(e.index,e.length);n&&this.scrollRectIntoView(n)}setContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API;return rt.call(this,()=>{e=new z(e);const r=this.getLength(),s=this.editor.deleteText(0,r),i=this.editor.insertContents(0,e),a=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(a)},n)}setSelection(e,n,r){e==null?this.selection.setRange(null,n||st.sources.API):([e,n,,r]=Lt(e,n,r),this.selection.setRange(new dn(Math.max(0,e),n),r),r!==H.sources.SILENT&&this.scrollSelectionIntoView())}setText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API;const r=new z().insert(e);return this.setContents(r,n)}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H.sources.USER;const n=this.scroll.update(e);return this.selection.update(e),n}updateContents(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:H.sources.API;return rt.call(this,()=>(e=new z(e),this.editor.applyDelta(e)),n,!0)}};V(st,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:gs,theme:"default"}),V(st,"events",H.events),V(st,"sources",H.sources),V(st,"version","2.0.3"),V(st,"imports",{delta:z,parchment:Wg,"core/module":pt,"core/theme":Xn});let x=st;function io(t){return typeof t=="string"?document.querySelector(t):t}function Ji(t){return Object.entries(t??{}).reduce((e,n)=>{let[r,s]=n;return{...e,[r]:s===!0?{}:s}},{})}function ao(t){return Object.fromEntries(Object.entries(t).filter(e=>e[1]!==void 0))}function gm(t,e){const n=io(t);if(!n)throw new Error("Invalid Quill container");const s=!e.theme||e.theme===x.DEFAULTS.theme?Xn:x.import(`themes/${e.theme}`);if(!s)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:i,...a}=x.DEFAULTS,{modules:l,...o}=s.DEFAULTS;let u=Ji(e.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const f=zt({},Ji(i),Ji(l),u),m={...a,...ao(o),...ao(e)};let h=e.registry;return h?e.formats&&Hn.warn('Ignoring "formats" option because "registry" is specified'):h=e.formats?pm(e.formats,m.registry,Hn):m.registry,{...m,registry:h,container:n,theme:s,modules:Object.entries(f).reduce((g,d)=>{let[T,y]=d;if(!y)return g;const A=x.import(`modules/${T}`);return A==null?(Hn.error(`Cannot load ${T} module. Are you sure you registered it?`),g):{...g,[T]:zt({},A.DEFAULTS||{},y)}},{}),bounds:io(m.bounds)}}function rt(t,e,n,r){if(!this.isEnabled()&&e===H.sources.USER&&!this.allowReadOnlyEdits)return new z;let s=n==null?null:this.getSelection();const i=this.editor.delta,a=t();if(s!=null&&(n===!0&&(n=s.index),r==null?s=lo(s,a,e):r!==0&&(s=lo(s,n,r,e)),this.setSelection(s,H.sources.SILENT)),a.length()>0){const l=[H.events.TEXT_CHANGE,a,i,e];this.emitter.emit(H.events.EDITOR_CHANGE,...l),e!==H.sources.SILENT&&this.emitter.emit(...l)}return a}function Lt(t,e,n,r,s){let i={};return typeof t.index=="number"&&typeof t.length=="number"?typeof e!="number"?(s=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):typeof e!="number"&&(s=r,r=n,n=e,e=0),typeof n=="object"?(i=n,s=r):typeof n=="string"&&(r!=null?i[n]=r:s=n),s=s||H.sources.API,[t,e,i,s]}function lo(t,e,n,r){const s=typeof n=="number"?n:0;if(t==null)return null;let i,a;return e&&typeof e.transformPosition=="function"?[i,a]=[t.index,t.index+t.length].map(l=>e.transformPosition(l,r!==H.sources.USER)):[i,a]=[t.index,t.index+t.length].map(l=>l<e||l===e&&r===H.sources.USER?l:s>=0?l+s:Math.max(e,l+s)),new dn(i,a-i)}class En extends js{}function oo(t){return t instanceof Oe||t instanceof Qe}function co(t){return typeof t.updateContent=="function"}class Gn extends Ka{constructor(e,n,r){let{emitter:s}=r;super(e,n),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const e=this.batch;this.batch=!1,this.update(e)}emitMount(e){this.emitter.emit(H.events.SCROLL_BLOT_MOUNT,e)}emitUnmount(e){this.emitter.emit(H.events.SCROLL_BLOT_UNMOUNT,e)}emitEmbedUpdate(e,n){this.emitter.emit(H.events.SCROLL_EMBED_UPDATE,e,n)}deleteAt(e,n){const[r,s]=this.line(e),[i]=this.line(e+n);if(super.deleteAt(e,n),i!=null&&r!==i&&s>0){if(r instanceof Qe||i instanceof Qe){this.optimize();return}const a=i.children.head instanceof dt?null:i.children.head;r.moveChildren(i,a),r.remove()}this.optimize()}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",e?"true":"false")}formatAt(e,n,r,s){super.formatAt(e,n,r,s),this.optimize()}insertAt(e,n,r){if(e>=this.length())if(r==null||this.scroll.query(n,Y.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),r==null&&n.endsWith(`
`)?s.insertAt(0,n.slice(0,-1),r):s.insertAt(0,n,r)}else{const s=this.scroll.create(n,r);this.appendChild(s)}else super.insertAt(e,n,r);this.optimize()}insertBefore(e,n){if(e.statics.scope===Y.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),super.insertBefore(r,n)}else super.insertBefore(e,n)}insertContents(e,n){const r=this.deltaToRenderBlocks(n.concat(new z().insert(`
`))),s=r.pop();if(s==null)return;this.batchStart();const i=r.shift();if(i){const o=i.type==="block"&&(i.delta.length()===0||!this.descendant(Qe,e)[0]&&e<this.length()),u=i.type==="block"?i.delta:new z().insert({[i.key]:i.value});ea(this,e,u);const f=i.type==="block"?1:0,m=e+u.length()+f;o&&this.insertAt(m-1,`
`);const h=Ke(this.line(e)[0]),g=Je.AttributeMap.diff(h,i.attributes)||{};Object.keys(g).forEach(d=>{this.formatAt(m-1,1,d,g[d])}),e=m}let[a,l]=this.children.find(e);if(r.length&&(a&&(a=a.split(l),l=0),r.forEach(o=>{if(o.type==="block"){const u=this.createBlock(o.attributes,a||void 0);ea(u,0,o.delta)}else{const u=this.create(o.key,o.value);this.insertBefore(u,a||void 0),Object.keys(o.attributes).forEach(f=>{u.format(f,o.attributes[f])})}})),s.type==="block"&&s.delta.length()){const o=a?a.offset(a.scroll)+l:this.length();ea(this,o,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(e){const n=this.path(e).pop();if(!n)return[null,-1];const[r,s]=n;return r instanceof Ce?[r,s]:[null,-1]}line(e){return e===this.length()?this.line(e-1):this.descendant(oo,e)}lines(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(s,i,a)=>{let l=[],o=a;return s.children.forEachAt(i,a,(u,f,m)=>{oo(u)?l.push(u):u instanceof js&&(l=l.concat(r(u,f,o))),o-=m}),l};return r(this,e,n)}optimize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(e,n),e.length>0&&this.emitter.emit(H.events.SCROLL_OPTIMIZE,e,n))}path(e){return super.path(e).slice(1)}remove(){}update(e){if(this.batch){Array.isArray(e)&&(this.batch=this.batch.concat(e));return}let n=H.sources.USER;typeof e=="string"&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e=e.filter(r=>{let{target:s}=r;const i=this.find(s,!0);return i&&!co(i)}),e.length>0&&this.emitter.emit(H.events.SCROLL_BEFORE_UPDATE,n,e),super.update(e.concat([])),e.length>0&&this.emitter.emit(H.events.SCROLL_UPDATE,n,e)}updateEmbedAt(e,n,r){const[s]=this.descendant(i=>i instanceof Qe,e);s&&s.statics.blotName===n&&co(s)&&s.updateContent(r)}handleDragStart(e){e.preventDefault()}deltaToRenderBlocks(e){const n=[];let r=new z;return e.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const a=i.split(`
`);a.slice(0,-1).forEach(o=>{r.insert(o,s.attributes),n.push({type:"block",delta:r,attributes:s.attributes??{}}),r=new z});const l=a[a.length-1];l&&r.insert(l,s.attributes)}else{const a=Object.keys(i)[0];if(!a)return;this.query(a,Y.INLINE)?r.push(s):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new z,n.push({type:"blockEmbed",key:a,value:i[a],attributes:s.attributes??{}}))}}),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n}createBlock(e,n){let r;const s={};Object.entries(e).forEach(l=>{let[o,u]=l;this.query(o,Y.BLOCK&Y.BLOT)!=null?r=o:s[o]=u});const i=this.create(r||this.statics.defaultChild.blotName,r?e[r]:void 0);this.insertBefore(i,n||void 0);const a=i.length();return Object.entries(s).forEach(l=>{let[o,u]=l;i.formatAt(0,a,o,u)}),i}}V(Gn,"blotName","scroll"),V(Gn,"className","ql-editor"),V(Gn,"tagName","DIV"),V(Gn,"defaultChild",Oe),V(Gn,"allowedChildren",[Oe,Qe,En]);function ea(t,e,n){n.reduce((r,s)=>{const i=Je.Op.length(s);let a=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const l=s.insert;t.insertAt(r,l);const[o]=t.descendant(Ce,r),u=Ke(o);a=Je.AttributeMap.diff(u,a)||{}}else if(typeof s.insert=="object"){const l=Object.keys(s.insert)[0];if(l==null)return r;if(t.insertAt(r,l,s.insert[l]),t.scroll.query(l,Y.INLINE)!=null){const[u]=t.descendant(Ce,r),f=Ke(u);a=Je.AttributeMap.diff(f,a)||{}}}}return Object.keys(a).forEach(l=>{t.formatAt(r,i,l,a[l])}),r+i},e)}const Qa={scope:Y.BLOCK,whitelist:["right","center","justify"]},mm=new vt("align","align",Qa),tu=new ht("align","ql-align",Qa),nu=new Xt("align","text-align",Qa);class ru extends Xt{value(e){let n=super.value(e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${n.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):n}}const Em=new ht("color","ql-color",{scope:Y.INLINE}),Ja=new ru("color","color",{scope:Y.INLINE}),Tm=new ht("background","ql-bg",{scope:Y.INLINE}),el=new ru("background","background-color",{scope:Y.INLINE});class Tn extends En{static create(e){const n=super.create(e);return n.setAttribute("spellcheck","false"),n}code(e,n){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(e,e+n)}html(e,n){return`<pre>
${zs(this.code(e,n))}
</pre>`}}class De extends Oe{static register(){x.register(Tn)}}V(De,"TAB","  ");class tl extends Rt{}tl.blotName="code";tl.tagName="CODE";De.blotName="code-block";De.className="ql-code-block";De.tagName="DIV";Tn.blotName="code-block-container";Tn.className="ql-code-block-container";Tn.tagName="DIV";Tn.allowedChildren=[De];De.allowedChildren=[ft,dt,Yn];De.requiredContainer=Tn;const nl={scope:Y.BLOCK,whitelist:["rtl"]},su=new vt("direction","dir",nl),iu=new ht("direction","ql-direction",nl),au=new Xt("direction","direction",nl),lu={scope:Y.INLINE,whitelist:["serif","monospace"]},ou=new ht("font","ql-font",lu);class _m extends Xt{value(e){return super.value(e).replace(/["']/g,"")}}const cu=new _m("font","font-family",lu),uu=new ht("size","ql-size",{scope:Y.INLINE,whitelist:["small","large","huge"]}),fu=new Xt("size","font-size",{scope:Y.INLINE,whitelist:["10px","18px","32px"]}),ym=Gt("quill:keyboard"),bm=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Ws extends pt{static match(e,n){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!n[r]!==e[r]&&n[r]!==null)?!1:n.key===e.key||n.key===e.which}constructor(e,n){super(e,n),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=Am(e);if(s==null){ym.warn("Attempted to add invalid keyboard binding",s);return}typeof n=="function"&&(n={handler:n}),typeof r=="function"&&(r={handler:r}),(Array.isArray(s.key)?s.key:[s.key]).forEach(a=>{const l={...s,key:a,...n,...r};this.bindings[l.key]=this.bindings[l.key]||[],this.bindings[l.key].push(l)})}listen(){this.quill.root.addEventListener("keydown",e=>{if(e.defaultPrevented||e.isComposing||e.keyCode===229&&(e.key==="Enter"||e.key==="Backspace"))return;const s=(this.bindings[e.key]||[]).concat(this.bindings[e.which]||[]).filter(A=>Ws.match(e,A));if(s.length===0)return;const i=x.find(e.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const a=this.quill.getSelection();if(a==null||!this.quill.hasFocus())return;const[l,o]=this.quill.getLine(a.index),[u,f]=this.quill.getLeaf(a.index),[m,h]=a.length===0?[u,f]:this.quill.getLeaf(a.index+a.length),g=u instanceof qs?u.value().slice(0,f):"",d=m instanceof qs?m.value().slice(h):"",T={collapsed:a.length===0,empty:a.length===0&&l.length()<=1,format:this.quill.getFormat(a),line:l,offset:o,prefix:g,suffix:d,event:e};s.some(A=>{if(A.collapsed!=null&&A.collapsed!==T.collapsed||A.empty!=null&&A.empty!==T.empty||A.offset!=null&&A.offset!==T.offset)return!1;if(Array.isArray(A.format)){if(A.format.every(_=>T.format[_]==null))return!1}else if(typeof A.format=="object"&&!Object.keys(A.format).every(_=>A.format[_]===!0?T.format[_]!=null:A.format[_]===!1?T.format[_]==null:Ya(A.format[_],T.format[_])))return!1;return A.prefix!=null&&!A.prefix.test(T.prefix)||A.suffix!=null&&!A.suffix.test(T.suffix)?!1:A.handler.call(this,a,T,A)!==!0})&&e.preventDefault()})}handleBackspace(e,n){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(n.prefix)?2:1;if(e.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(e.index);let a=new z().retain(e.index-r).delete(r);if(n.offset===0){const[l]=this.quill.getLine(e.index-1);if(l&&!(l.statics.blotName==="block"&&l.length()<=1)){const u=i.formats(),f=this.quill.getFormat(e.index-1,1);if(s=Je.AttributeMap.diff(u,f)||{},Object.keys(s).length>0){const m=new z().retain(e.index+i.length()-2).retain(1,s);a=a.compose(m)}}}this.quill.updateContents(a,x.sources.USER),this.quill.focus()}handleDelete(e,n){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(n.suffix)?2:1;if(e.index>=this.quill.getLength()-r)return;let s={};const[i]=this.quill.getLine(e.index);let a=new z().retain(e.index).delete(r);if(n.offset>=i.length()-1){const[l]=this.quill.getLine(e.index+1);if(l){const o=i.formats(),u=this.quill.getFormat(e.index,1);s=Je.AttributeMap.diff(o,u)||{},Object.keys(s).length>0&&(a=a.retain(l.length()-1).retain(1,s))}}this.quill.updateContents(a,x.sources.USER),this.quill.focus()}handleDeleteRange(e){rl({range:e,quill:this.quill}),this.quill.focus()}handleEnter(e,n){const r=Object.keys(n.format).reduce((i,a)=>(this.quill.scroll.query(a,Y.BLOCK)&&!Array.isArray(n.format[a])&&(i[a]=n.format[a]),i),{}),s=new z().retain(e.index).delete(e.length).insert(`
`,r);this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(e.index+1,x.sources.SILENT),this.quill.focus()}}const Im={bindings:{bold:ta("bold"),italic:ta("italic"),underline:ta("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","+1",x.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return e.collapsed&&e.offset!==0?!0:(this.quill.format("indent","-1",x.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){e.format.indent!=null?this.quill.format("indent","-1",x.sources.USER):e.format.list!=null&&this.quill.format("list",!1,x.sources.USER)}},"indent code-block":uo(!0),"outdent code-block":uo(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,x.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=new z().retain(t.index).delete(t.length).insert("	");return this.quill.updateContents(n,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,x.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,x.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,x.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),r={...e.formats(),list:"checked"},s=new z().retain(t.index).insert(`
`,r).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(t.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,r]=this.quill.getLine(t.index),s=new z().retain(t.index).insert(`
`,e.format).retain(n.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(t.index+1,x.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,r,s,i]=e.getTable(t),a=vm(n,r,s,i);if(a==null)return;let l=n.offset();if(a<0){const o=new z().retain(l).insert(`
`);this.quill.updateContents(o,x.sources.USER),this.quill.setSelection(t.index+1,t.length,x.sources.SILENT)}else if(a>0){l+=n.length();const o=new z().retain(l).insert(`
`);this.quill.updateContents(o,x.sources.USER),this.quill.setSelection(l,x.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:r}=e,s=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(s-1,x.sources.USER):this.quill.setSelection(s+r.length(),x.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(this.quill.scroll.query("list")==null)return!0;const{length:n}=e.prefix,[r,s]=this.quill.getLine(t.index);if(s>n)return!0;let i;switch(e.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(t.index," ",x.sources.USER),this.quill.history.cutoff();const a=new z().retain(t.index-s).delete(n+1).retain(r.length()-2-s).retain(1,{list:i});return this.quill.updateContents(a,x.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,x.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let r=2,s=e;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,r-=1,r<=0){const i=new z().retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,x.sources.USER),this.quill.setSelection(t.index-1,x.sources.SILENT),!1}return!0}},"embed left":ms("ArrowLeft",!1),"embed left shift":ms("ArrowLeft",!0),"embed right":ms("ArrowRight",!1),"embed right shift":ms("ArrowRight",!0),"table down":fo(!1),"table up":fo(!0)}};Ws.DEFAULTS=Im;function uo(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:r}=n;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(e.length===0&&!r.shiftKey){this.quill.insertText(e.index,i,x.sources.USER),this.quill.setSelection(e.index+i.length,x.sources.SILENT);return}const a=e.length===0?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:l,length:o}=e;a.forEach((u,f)=>{t?(u.insertAt(0,i),f===0?l+=i.length:o+=i.length):u.domNode.textContent.startsWith(i)&&(u.deleteAt(0,i.length),f===0?l-=i.length:o-=i.length)}),this.quill.update(x.sources.USER),this.quill.setSelection(l,o,x.sources.SILENT)}}}function ms(t,e){return{key:t,shiftKey:e,altKey:null,[t==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:s}=r;t==="ArrowRight"&&(s+=r.length+1);const[i]=this.quill.getLeaf(s);return i instanceof He?(t==="ArrowLeft"?e?this.quill.setSelection(r.index-1,r.length+1,x.sources.USER):this.quill.setSelection(r.index-1,x.sources.USER):e?this.quill.setSelection(r.index,r.length+1,x.sources.USER):this.quill.setSelection(r.index+r.length+1,x.sources.USER),!1):!0}}}function ta(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],x.sources.USER)}}}function fo(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const r=t?"prev":"next",s=n.line,i=s.parent[r];if(i!=null){if(i.statics.blotName==="table-row"){let a=i.children.head,l=s;for(;l.prev!=null;)l=l.prev,a=a.next;const o=a.offset(this.quill.scroll)+Math.min(n.offset,a.length()-1);this.quill.setSelection(o,0,x.sources.USER)}}else{const a=s.table()[r];a!=null&&(t?this.quill.setSelection(a.offset(this.quill.scroll)+a.length()-1,0,x.sources.USER):this.quill.setSelection(a.offset(this.quill.scroll),0,x.sources.USER))}return!1}}}function Am(t){if(typeof t=="string"||typeof t=="number")t={key:t};else if(typeof t=="object")t=$n(t);else return null;return t.shortKey&&(t[bm]=t.shortKey,delete t.shortKey),t}function rl(t){let{quill:e,range:n}=t;const r=e.getLines(n);let s={};if(r.length>1){const i=r[0].formats(),a=r[r.length-1].formats();s=Je.AttributeMap.diff(a,i)||{}}e.deleteText(n,x.sources.USER),Object.keys(s).length>0&&e.formatLine(n.index,1,s,x.sources.USER),e.setSelection(n.index,x.sources.SILENT)}function vm(t,e,n,r){return e.prev==null&&e.next==null?n.prev==null&&n.next==null?r===0?-1:1:n.prev==null?-1:1:e.prev==null?-1:e.next==null?1:null}const Rm=/font-weight:\s*normal/,Om=["P","OL","UL"],ho=t=>t&&Om.includes(t.tagName),wm=t=>{Array.from(t.querySelectorAll("br")).filter(e=>ho(e.previousElementSibling)&&ho(e.nextElementSibling)).forEach(e=>{var n;(n=e.parentNode)==null||n.removeChild(e)})},Sm=t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter(e=>{var n;return(n=e.getAttribute("style"))==null?void 0:n.match(Rm)}).forEach(e=>{var r;const n=t.createDocumentFragment();n.append(...e.childNodes),(r=e.parentNode)==null||r.replaceChild(n,e)})};function Nm(t){t.querySelector('[id^="docs-internal-guid-"]')&&(Sm(t),wm(t))}const Lm=/\bmso-list:[^;]*ignore/i,Cm=/\bmso-list:[^;]*\bl(\d+)/i,Dm=/\bmso-list:[^;]*\blevel(\d+)/i,Mm=(t,e)=>{const n=t.getAttribute("style"),r=n==null?void 0:n.match(Cm);if(!r)return null;const s=Number(r[1]),i=n==null?void 0:n.match(Dm),a=i?Number(i[1]):1,l=new RegExp(`@list l${s}:level${a}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),o=e.match(l),u=o&&o[1]==="bullet"?"bullet":"ordered";return{id:s,indent:a,type:u,element:t}},xm=t=>{var a,l;const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach(o=>{(o.getAttribute("style")||"").match(Lm)?n.push(o):r.push(o)}),n.forEach(o=>{var u;return(u=o.parentNode)==null?void 0:u.removeChild(o)});const s=t.documentElement.innerHTML,i=r.map(o=>Mm(o,s)).filter(o=>o);for(;i.length;){const o=[];let u=i.shift();for(;u;)o.push(u),u=i.length&&((a=i[0])==null?void 0:a.element)===u.element.nextElementSibling&&i[0].id===u.id?i.shift():null;const f=document.createElement("ul");o.forEach(g=>{const d=document.createElement("li");d.setAttribute("data-list",g.type),g.indent>1&&d.setAttribute("class",`ql-indent-${g.indent-1}`),d.innerHTML=g.element.innerHTML,f.appendChild(d)});const m=(l=o[0])==null?void 0:l.element,{parentNode:h}=m??{};m&&(h==null||h.replaceChild(f,m)),o.slice(1).forEach(g=>{let{element:d}=g;h==null||h.removeChild(d)})}};function Pm(t){t.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&xm(t)}const qm=[Pm,Nm],Bm=t=>{t.documentElement&&qm.forEach(e=>{e(t)})},Gm=Gt("quill:clipboard"),Um=[[Node.TEXT_NODE,Zm],[Node.TEXT_NODE,go],["br",Hm],[Node.ELEMENT_NODE,go],[Node.ELEMENT_NODE,Vm],[Node.ELEMENT_NODE,$m],[Node.ELEMENT_NODE,Xm],["li",Wm],["ol, ul",Ym],["pre",jm],["tr",Km],["b",na("bold")],["i",na("italic")],["strike",na("strike")],["style",zm]],km=[mm,su].reduce((t,e)=>(t[e.keyName]=e,t),{}),po=[nu,el,Ja,au,cu,fu].reduce((t,e)=>(t[e.keyName]=e,t),{});class hu extends pt{constructor(e,n){super(e,n),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Um.concat(this.options.matchers??[]).forEach(r=>{let[s,i]=r;this.addMatcher(s,i)})}addMatcher(e,n){this.matchers.push([e,n])}convert(e){let{html:n,text:r}=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[De.blotName])return new z().insert(r||"",{[De.blotName]:s[De.blotName]});if(!n)return new z().insert(r||"",s);const i=this.convertHTML(n);return Gr(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new z().retain(i.length()-1).delete(1)):i}normalizeHTML(e){Bm(e)}convertHTML(e){const n=new DOMParser().parseFromString(e,"text/html");this.normalizeHTML(n);const r=n.body,s=new WeakMap,[i,a]=this.prepareMatching(r,s);return sl(this.quill.scroll,r,i,a,s)}dangerouslyPasteHTML(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.sources.API;if(typeof e=="string"){const s=this.convert({html:e,text:""});this.quill.setContents(s,n),this.quill.setSelection(0,x.sources.SILENT)}else{const s=this.convert({html:n,text:""});this.quill.updateContents(new z().retain(e).concat(s),r),this.quill.setSelection(e+s.length(),x.sources.SILENT)}}onCaptureCopy(e){var a,l;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.defaultPrevented)return;e.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:s,text:i}=this.onCopy(r,n);(a=e.clipboardData)==null||a.setData("text/plain",i),(l=e.clipboardData)==null||l.setData("text/html",s),n&&rl({range:r,quill:this.quill})}normalizeURIList(e){return e.split(/\r?\n/).filter(n=>n[0]!=="#").join(`
`)}onCapturePaste(e){var a,l,o,u,f;if(e.defaultPrevented||!this.quill.isEnabled())return;e.preventDefault();const n=this.quill.getSelection(!0);if(n==null)return;const r=(a=e.clipboardData)==null?void 0:a.getData("text/html");let s=(l=e.clipboardData)==null?void 0:l.getData("text/plain");if(!r&&!s){const m=(o=e.clipboardData)==null?void 0:o.getData("text/uri-list");m&&(s=this.normalizeURIList(m))}const i=Array.from(((u=e.clipboardData)==null?void 0:u.files)||[]);if(!r&&i.length>0){this.quill.uploader.upload(n,i);return}if(r&&i.length>0){const m=new DOMParser().parseFromString(r,"text/html");if(m.body.childElementCount===1&&((f=m.body.firstElementChild)==null?void 0:f.tagName)==="IMG"){this.quill.uploader.upload(n,i);return}}this.onPaste(n,{html:r,text:s})}onCopy(e){const n=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:n}}onPaste(e,n){let{text:r,html:s}=n;const i=this.quill.getFormat(e.index),a=this.convert({text:r,html:s},i);Gm.log("onPaste",a,{text:r,html:s});const l=new z().retain(e.index).delete(e.length).concat(a);this.quill.updateContents(l,x.sources.USER),this.quill.setSelection(l.length()-e.length,x.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(e,n){const r=[],s=[];return this.matchers.forEach(i=>{const[a,l]=i;switch(a){case Node.TEXT_NODE:s.push(l);break;case Node.ELEMENT_NODE:r.push(l);break;default:Array.from(e.querySelectorAll(a)).forEach(o=>{if(n.has(o)){const u=n.get(o);u==null||u.push(l)}else n.set(o,[l])});break}}),[r,s]}}V(hu,"DEFAULTS",{matchers:[]});function _n(t,e,n,r){return r.query(e)?t.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[e])return s.push(i);const a=n?{[e]:n}:{};return s.insert(i.insert,{...a,...i.attributes})},new z):t}function Gr(t,e){let n="";for(let r=t.ops.length-1;r>=0&&n.length<e.length;--r){const s=t.ops[r];if(typeof s.insert!="string")break;n=s.insert+n}return n.slice(-1*e.length)===e}function Ht(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return n&&n.prototype instanceof He?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}function Fm(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Ht(t.previousElementSibling,e)&&!Ht(t.nextElementSibling,e)}const Es=new WeakMap;function du(t){return t==null?!1:(Es.has(t)||(t.tagName==="PRE"?Es.set(t,!0):Es.set(t,du(t.parentNode))),Es.get(t))}function sl(t,e,n,r,s){return e.nodeType===e.TEXT_NODE?r.reduce((i,a)=>a(e,i,t),new z):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((i,a)=>{let l=sl(t,a,n,r,s);return a.nodeType===e.ELEMENT_NODE&&(l=n.reduce((o,u)=>u(a,o,t),l),l=(s.get(a)||[]).reduce((o,u)=>u(a,o,t),l)),i.concat(l)},new z):new z}function na(t){return(e,n,r)=>_n(n,t,!0,r)}function $m(t,e,n){const r=vt.keys(t),s=ht.keys(t),i=Xt.keys(t),a={};return r.concat(s).concat(i).forEach(l=>{let o=n.query(l,Y.ATTRIBUTE);o!=null&&(a[o.attrName]=o.value(t),a[o.attrName])||(o=km[l],o!=null&&(o.attrName===l||o.keyName===l)&&(a[o.attrName]=o.value(t)||void 0),o=po[l],o!=null&&(o.attrName===l||o.keyName===l)&&(o=po[l],a[o.attrName]=o.value(t)||void 0))}),Object.entries(a).reduce((l,o)=>{let[u,f]=o;return _n(l,u,f,n)},e)}function Vm(t,e,n){const r=n.query(t);if(r==null)return e;if(r.prototype instanceof He){const s={},i=r.value(t);if(i!=null)return s[r.blotName]=i,new z().insert(s,r.formats(t,n))}else if(r.prototype instanceof Dr&&!Gr(e,`
`)&&e.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return _n(e,r.blotName,r.formats(t,n),n);return e}function Hm(t,e){return Gr(e,`
`)||e.insert(`
`),e}function jm(t,e,n){const r=n.query("code-block"),s=r&&"formats"in r&&typeof r.formats=="function"?r.formats(t,n):!0;return _n(e,"code-block",s,n)}function zm(){return new z}function Wm(t,e,n){const r=n.query(t);if(r==null||r.blotName!=="list"||!Gr(e,`
`))return e;let s=-1,i=t.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?e:e.reduce((a,l)=>l.insert?l.attributes&&typeof l.attributes.indent=="number"?a.push(l):a.insert(l.insert,{indent:s,...l.attributes||{}}):a,new z)}function Ym(t,e,n){const r=t;let s=r.tagName==="OL"?"ordered":"bullet";const i=r.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),_n(e,"list",s,n)}function go(t,e,n){if(!Gr(e,`
`)){if(Ht(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert(`
`);if(e.length()>0&&t.nextSibling){let r=t.nextSibling;for(;r!=null;){if(Ht(r,n))return e.insert(`
`);const s=n.query(r);if(s&&s.prototype instanceof Qe)return e.insert(`
`);r=r.firstChild}}}return e}function Xm(t,e,n){var i;const r={},s=t.style||{};return s.fontStyle==="italic"&&(r.italic=!0),s.textDecoration==="underline"&&(r.underline=!0),s.textDecoration==="line-through"&&(r.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(r.bold=!0),e=Object.entries(r).reduce((a,l)=>{let[o,u]=l;return _n(a,o,u,n)},e),parseFloat(s.textIndent||0)>0?new z().insert("	").concat(e):e}function Km(t,e,n){var s,i;const r=((s=t.parentElement)==null?void 0:s.tagName)==="TABLE"?t.parentElement:(i=t.parentElement)==null?void 0:i.parentElement;if(r!=null){const l=Array.from(r.querySelectorAll("tr")).indexOf(t)+1;return _n(e,"table",l,n)}return e}function Zm(t,e,n){var s;let r=t.data;if(((s=t.parentElement)==null?void 0:s.tagName)==="O:P")return e.insert(r.trim());if(!du(t)){if(r.trim().length===0&&r.includes(`
`)&&!Fm(t,n))return e;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(t.previousSibling==null&&t.parentElement!=null&&Ht(t.parentElement,n)||t.previousSibling instanceof Element&&Ht(t.previousSibling,n))&&(r=r.replace(/^ /,"")),(t.nextSibling==null&&t.parentElement!=null&&Ht(t.parentElement,n)||t.nextSibling instanceof Element&&Ht(t.nextSibling,n))&&(r=r.replace(/ $/,"")),r=r.replaceAll(" "," ")}return e.insert(r)}class pu extends pt{constructor(n,r){super(n,r);V(this,"lastRecorded",0);V(this,"ignoreChange",!1);V(this,"stack",{undo:[],redo:[]});V(this,"currentRange",null);this.quill.on(x.events.EDITOR_CHANGE,(s,i,a,l)=>{s===x.events.SELECTION_CHANGE?i&&l!==x.sources.SILENT&&(this.currentRange=i):s===x.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||l===x.sources.USER?this.record(i,a):this.transform(i)),this.currentRange=Oa(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(n,r){if(this.stack[n].length===0)return;const s=this.stack[n].pop();if(!s)return;const i=this.quill.getContents(),a=s.delta.invert(i);this.stack[r].push({delta:a,range:Oa(s.range,a)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,x.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(n,r){if(n.ops.length===0)return;this.stack.redo=[];let s=n.invert(r),i=this.currentRange;const a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){const l=this.stack.undo.pop();l&&(s=s.compose(l.delta),i=l.range)}else this.lastRecorded=a;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(n){mo(this.stack.undo,n),mo(this.stack.redo,n)}undo(){this.change("undo","redo")}restoreSelection(n){if(n.range)this.quill.setSelection(n.range,x.sources.USER);else{const r=Jm(this.quill.scroll,n.delta);this.quill.setSelection(r,x.sources.USER)}}}V(pu,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function mo(t,e){let n=e;for(let r=t.length-1;r>=0;r-=1){const s=t[r];t[r]={delta:n.transform(s.delta,!0),range:s.range&&Oa(s.range,n)},n=s.delta.transform(n),t[r].delta.length()===0&&t.splice(r,1)}}function Qm(t,e){const n=e.ops[e.ops.length-1];return n==null?!1:n.insert!=null?typeof n.insert=="string"&&n.insert.endsWith(`
`):n.attributes!=null?Object.keys(n.attributes).some(r=>t.query(r,Y.BLOCK)!=null):!1}function Jm(t,e){const n=e.reduce((s,i)=>s+(i.delete||0),0);let r=e.length()-n;return Qm(t,e)&&(r-=1),r}function Oa(t,e){if(!t)return t;const n=e.transformPosition(t.index),r=e.transformPosition(t.index+t.length);return{index:n,length:r-n}}class gu extends pt{constructor(e,n){super(e,n),e.root.addEventListener("drop",r=>{var a;r.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const l=document.caretPositionFromPoint(r.clientX,r.clientY);s=document.createRange(),s.setStart(l.offsetNode,l.offset),s.setEnd(l.offsetNode,l.offset)}const i=s&&e.selection.normalizeNative(s);if(i){const l=e.selection.normalizedToRange(i);(a=r.dataTransfer)!=null&&a.files&&this.upload(l,r.dataTransfer.files)}})}upload(e,n){const r=[];Array.from(n).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&r.push(s)}),r.length>0&&this.options.handler.call(this,e,r)}}gu.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map(r=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(r)}));Promise.all(n).then(r=>{const s=r.reduce((i,a)=>i.insert({image:a}),new z().retain(t.index).delete(t.length));this.quill.updateContents(s,H.sources.USER),this.quill.setSelection(t.index+r.length,H.sources.SILENT)})}};const eE=["insertText","insertReplacementText"];class tE extends pt{constructor(e,n){super(e,n),e.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||e.on(x.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(e){rl({range:e,quill:this.quill})}replaceText(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e.length===0)return!1;if(n){const r=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents(new z().retain(e.index).insert(n,r),x.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+n.length,0,x.sources.SILENT),!0}handleBeforeInput(e){if(this.quill.composition.isComposing||e.defaultPrevented||!eE.includes(e.inputType))return;const n=e.getTargetRanges?e.getTargetRanges()[0]:null;if(!n||n.collapsed===!0)return;const r=nE(e);if(r==null)return;const s=this.quill.selection.normalizeNative(n),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,r)&&e.preventDefault()}handleCompositionStart(){const e=this.quill.getSelection();e&&this.replaceText(e)}}function nE(t){var e;return typeof t.data=="string"?t.data:(e=t.dataTransfer)!=null&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}const rE=/Mac/i.test(navigator.platform),sE=100,iE=t=>!!(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="ArrowUp"||t.key==="ArrowDown"||t.key==="Home"||rE&&t.key==="a"&&t.ctrlKey===!0);class aE extends pt{constructor(n,r){super(n,r);V(this,"isListening",!1);V(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(n,r){let{line:s,event:i}=r;if(!(s instanceof ut)||!s.uiNode)return!0;const a=getComputedStyle(s.domNode).direction==="rtl";return a&&i.key!=="ArrowRight"||!a&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(n.index-1,n.length+(i.shiftKey?1:0),x.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",n=>{!n.defaultPrevented&&iE(n)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+sE,this.isListening)return;this.isListening=!0;const n=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",n,{once:!0})}handleSelectionChange(){const n=document.getSelection();if(!n)return;const r=n.getRangeAt(0);if(r.collapsed!==!0||r.startOffset!==0)return;const s=this.quill.scroll.find(r.startContainer);if(!(s instanceof ut)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),n.removeAllRanges(),n.addRange(i)}}x.register({"blots/block":Oe,"blots/block/embed":Qe,"blots/break":dt,"blots/container":En,"blots/cursor":Yn,"blots/embed":Za,"blots/inline":Rt,"blots/scroll":Gn,"blots/text":ft,"modules/clipboard":hu,"modules/history":pu,"modules/keyboard":Ws,"modules/uploader":gu,"modules/input":tE,"modules/uiNode":aE});class lE extends ht{add(e,n){let r=0;if(n==="+1"||n==="-1"){const s=this.value(e)||0;r=n==="+1"?s+1:s-1}else typeof n=="number"&&(r=n);return r===0?(this.remove(e),!0):super.add(e,r.toString())}canAdd(e,n){return super.canAdd(e,n)||super.canAdd(e,parseInt(n,10))}value(e){return parseInt(super.value(e),10)||void 0}}const oE=new lE("indent","ql-indent",{scope:Y.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class wa extends Oe{}V(wa,"blotName","blockquote"),V(wa,"tagName","blockquote");class Sa extends Oe{static formats(e){return this.tagName.indexOf(e.tagName)+1}}V(Sa,"blotName","header"),V(Sa,"tagName",["H1","H2","H3","H4","H5","H6"]);class Ur extends En{}Ur.blotName="list-container";Ur.tagName="OL";class kr extends Oe{static create(e){const n=super.create();return n.setAttribute("data-list",e),n}static formats(e){return e.getAttribute("data-list")||void 0}static register(){x.register(Ur)}constructor(e,n){super(e,n);const r=n.ownerDocument.createElement("span"),s=i=>{if(!e.isEnabled())return;const a=this.statics.formats(n,e);a==="checked"?(this.format("list","unchecked"),i.preventDefault()):a==="unchecked"&&(this.format("list","checked"),i.preventDefault())};r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),this.attachUI(r)}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):super.format(e,n)}}kr.blotName="list";kr.tagName="LI";Ur.allowedChildren=[kr];kr.requiredContainer=Ur;class xr extends Rt{static create(){return super.create()}static formats(){return!0}optimize(e){super.optimize(e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}V(xr,"blotName","bold"),V(xr,"tagName",["STRONG","B"]);class Na extends xr{}V(Na,"blotName","italic"),V(Na,"tagName",["EM","I"]);class jt extends Rt{static create(e){const n=super.create(e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}static formats(e){return e.getAttribute("href")}static sanitize(e){return mu(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}format(e,n){e!==this.statics.blotName||!n?super.format(e,n):this.domNode.setAttribute("href",this.constructor.sanitize(n))}}V(jt,"blotName","link"),V(jt,"tagName","A"),V(jt,"SANITIZED_URL","about:blank"),V(jt,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function mu(t,e){const n=document.createElement("a");n.href=t;const r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}class La extends Rt{static create(e){return e==="super"?document.createElement("sup"):e==="sub"?document.createElement("sub"):super.create(e)}static formats(e){if(e.tagName==="SUB")return"sub";if(e.tagName==="SUP")return"super"}}V(La,"blotName","script"),V(La,"tagName",["SUB","SUP"]);class Ca extends xr{}V(Ca,"blotName","strike"),V(Ca,"tagName",["S","STRIKE"]);class Da extends Rt{}V(Da,"blotName","underline"),V(Da,"tagName","U");class Ss extends Za{static create(e){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const n=super.create(e);return typeof e=="string"&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}static value(e){return e.getAttribute("data-value")}html(){const{formula:e}=this.value();return`<span>${e}</span>`}}V(Ss,"blotName","formula"),V(Ss,"className","ql-formula"),V(Ss,"tagName","SPAN");const Eo=["alt","height","width"];var Os;let cE=(Os=class extends He{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("src",this.sanitize(e)),n}static formats(e){return Eo.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static match(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}static sanitize(e){return mu(e,["http","https","data"])?e:"//:0"}static value(e){return e.getAttribute("src")}format(e,n){Eo.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}},V(Os,"blotName","image"),V(Os,"tagName","IMG"),Os);const To=["height","width"];class Ns extends Qe{static create(e){const n=super.create(e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n}static formats(e){return To.reduce((n,r)=>(e.hasAttribute(r)&&(n[r]=e.getAttribute(r)),n),{})}static sanitize(e){return jt.sanitize(e)}static value(e){return e.getAttribute("src")}format(e,n){To.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):super.format(e,n)}html(){const{video:e}=this.value();return`<a href="${e}">${e}</a>`}}V(Ns,"blotName","video"),V(Ns,"className","ql-video"),V(Ns,"tagName","IFRAME");const Ir=new ht("code-token","hljs",{scope:Y.INLINE});class Dt extends Rt{static formats(e,n){for(;e!=null&&e!==n.domNode;){if(e.classList&&e.classList.contains(De.className))return super.formats(e,n);e=e.parentNode}}constructor(e,n,r){super(e,n,r),Ir.add(this.domNode,r)}format(e,n){e!==Dt.blotName?super.format(e,n):n?Ir.add(this.domNode,n):(Ir.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ir.value(this.domNode)||this.unwrap()}}Dt.blotName="code-token";Dt.className="ql-token";class Ze extends De{static create(e){const n=super.create(e);return typeof e=="string"&&n.setAttribute("data-language",e),n}static formats(e){return e.getAttribute("data-language")||"plain"}static register(){}format(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):super.format(e,n)}replaceWith(e,n){return this.formatAt(0,this.length(),Dt.blotName,!1),super.replaceWith(e,n)}}class vr extends Tn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(e,n){e===Ze.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(e,n)}))}formatAt(e,n,r,s){r===Ze.blotName&&(this.forceNext=!0),super.formatAt(e,n,r,s)}highlight(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).map(a=>a.textContent).join(`
`)}
`,i=Ze.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const a=this.children.reduce((o,u)=>o.concat(Jc(u,!1)),new z),l=e(s,i);a.diff(l).reduce((o,u)=>{let{retain:f,attributes:m}=u;return f?(m&&Object.keys(m).forEach(h=>{[Ze.blotName,Dt.blotName].includes(h)&&this.formatAt(o,f,h,m[h])}),o+f):o},0)}this.cachedText=s,this.forceNext=!1}}html(e,n){const[r]=this.children.find(e);return`<pre data-language="${r?Ze.formats(r.domNode):"plain"}">
${zs(this.code(e,n))}
</pre>`}optimize(e){if(super.optimize(e),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const n=Ze.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}vr.allowedChildren=[Ze];Ze.requiredContainer=vr;Ze.allowedChildren=[Dt,Yn,ft,dt];const uE=(t,e,n)=>{if(typeof t.versionString=="string"){const r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value};class Eu extends pt{static register(){x.register(Dt,!0),x.register(Ze,!0),x.register(vr,!0)}constructor(e,n){if(super(e,n),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,s)=>{let{key:i}=s;return r[i]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(x.events.SCROLL_BLOT_MOUNT,e=>{if(!(e instanceof vr))return;const n=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:s,label:i}=r;const a=n.ownerDocument.createElement("option");a.textContent=i,a.setAttribute("value",s),n.appendChild(a)}),n.addEventListener("change",()=>{e.format(Ze.blotName,n.value),this.quill.root.focus(),this.highlight(e,!0)}),e.uiNode==null&&(e.attachUI(n),e.children.head&&(n.value=Ze.formats(e.children.head.domNode)))})}initTimer(){let e=null;this.quill.on(x.events.SCROLL_OPTIMIZE,()=>{e&&clearTimeout(e),e=setTimeout(()=>{this.highlight(),e=null},this.options.interval)})}highlight(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(x.sources.USER);const r=this.quill.getSelection();(e==null?this.quill.scroll.descendants(vr):[e]).forEach(i=>{i.highlight(this.highlightBlot,n)}),this.quill.update(x.sources.SILENT),r!=null&&this.quill.setSelection(r,x.sources.SILENT)}highlightBlot(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(n=this.languages[n]?n:"plain",n==="plain")return zs(e).split(`
`).reduce((s,i,a)=>(a!==0&&s.insert(`
`,{[De.blotName]:n}),s.insert(i)),new z);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(De.className),r.innerHTML=uE(this.options.hljs,n,e),sl(this.quill.scroll,r,[(s,i)=>{const a=Ir.value(s);return a?i.compose(new z().retain(i.length(),{[Dt.blotName]:a})):i}],[(s,i)=>s.data.split(`
`).reduce((a,l,o)=>(o!==0&&a.insert(`
`,{[De.blotName]:n}),a.insert(l)),i)],new WeakMap)}}Eu.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Sr=class Sr extends Oe{static create(e){const n=super.create();return e?n.setAttribute("data-row",e):n.setAttribute("data-row",il()),n}static formats(e){if(e.hasAttribute("data-row"))return e.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(e,n){e===Sr.blotName&&n?this.domNode.setAttribute("data-row",n):super.format(e,n)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};V(Sr,"blotName","table"),V(Sr,"tagName","TD");let lt=Sr;class Mt extends En{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),s=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===s.table}return!1}optimize(e){super.optimize(e),this.children.forEach(n=>{if(n.next==null)return;const r=n.formats(),s=n.next.formats();if(r.table!==s.table){const i=this.splitAfter(n);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}V(Mt,"blotName","table-row"),V(Mt,"tagName","TR");class At extends En{}V(At,"blotName","table-body"),V(At,"tagName","TBODY");class Kn extends En{balanceCells(){const e=this.descendants(Mt),n=e.reduce((r,s)=>Math.max(s.children.length,r),0);e.forEach(r=>{new Array(n-r.children.length).fill(0).forEach(()=>{let s;r.children.head!=null&&(s=lt.formats(r.children.head.domNode));const i=this.scroll.create(lt.blotName,s);r.appendChild(i),i.optimize()})})}cells(e){return this.rows().map(n=>n.children.at(e))}deleteColumn(e){const[n]=this.descendant(At);n==null||n.children.head==null||n.children.forEach(r=>{const s=r.children.at(e);s!=null&&s.remove()})}insertColumn(e){const[n]=this.descendant(At);n==null||n.children.head==null||n.children.forEach(r=>{const s=r.children.at(e),i=lt.formats(r.children.head.domNode),a=this.scroll.create(lt.blotName,i);r.insertBefore(a,s)})}insertRow(e){const[n]=this.descendant(At);if(n==null||n.children.head==null)return;const r=il(),s=this.scroll.create(Mt.blotName);n.children.head.children.forEach(()=>{const a=this.scroll.create(lt.blotName,r);s.appendChild(a)});const i=n.children.at(e);n.insertBefore(s,i)}rows(){const e=this.children.head;return e==null?[]:e.children.map(n=>n)}}V(Kn,"blotName","table-container"),V(Kn,"tagName","TABLE");Kn.allowedChildren=[At];At.requiredContainer=Kn;At.allowedChildren=[Mt];Mt.requiredContainer=At;Mt.allowedChildren=[lt];lt.requiredContainer=Mt;function il(){return`row-${Math.random().toString(36).slice(2,6)}`}class fE extends pt{static register(){x.register(lt),x.register(Mt),x.register(At),x.register(Kn)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Kn).forEach(e=>{e.balanceCells()})}deleteColumn(){const[e,,n]=this.getTable();n!=null&&(e.deleteColumn(n.cellOffset()),this.quill.update(x.sources.USER))}deleteRow(){const[,e]=this.getTable();e!=null&&(e.remove(),this.quill.update(x.sources.USER))}deleteTable(){const[e]=this.getTable();if(e==null)return;const n=e.offset();e.remove(),this.quill.update(x.sources.USER),this.quill.setSelection(n,x.sources.SILENT)}getTable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(e==null)return[null,null,null,-1];const[n,r]=this.quill.getLine(e.index);if(n==null||n.statics.blotName!==lt.blotName)return[null,null,null,-1];const s=n.parent;return[s.parent.parent,s,n,r]}insertColumn(e){const n=this.quill.getSelection();if(!n)return;const[r,s,i]=this.getTable(n);if(i==null)return;const a=i.cellOffset();r.insertColumn(a+e),this.quill.update(x.sources.USER);let l=s.rowOffset();e===0&&(l+=1),this.quill.setSelection(n.index+l,n.length,x.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){const n=this.quill.getSelection();if(!n)return;const[r,s,i]=this.getTable(n);if(i==null)return;const a=s.rowOffset();r.insertRow(a+e),this.quill.update(x.sources.USER),e>0?this.quill.setSelection(n,x.sources.SILENT):this.quill.setSelection(n.index+s.children.length,n.length,x.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(e,n){const r=this.quill.getSelection();if(r==null)return;const s=new Array(e).fill(0).reduce(i=>{const a=new Array(n).fill(`
`).join("");return i.insert(a,{table:il()})},new z().retain(r.index));this.quill.updateContents(s,x.sources.USER),this.quill.setSelection(r.index,x.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(x.events.SCROLL_OPTIMIZE,e=>{e.some(n=>["TD","TR","TBODY","TABLE"].includes(n.target.tagName)?(this.quill.once(x.events.TEXT_CHANGE,(r,s,i)=>{i===x.sources.USER&&this.balanceTables()}),!0):!1)})}}const _o=Gt("quill:toolbar");class al extends pt{constructor(e,n){var r,s;if(super(e,n),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),hE(i,this.options.container),(s=(r=e.container)==null?void 0:r.parentNode)==null||s.insertBefore(i,e.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){_o.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var l;const a=(l=this.options.handlers)==null?void 0:l[i];a&&this.addHandler(i,a)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(x.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(e,n){this.handlers[e]=n}attach(e){let n=Array.from(e.classList).find(s=>s.indexOf("ql-")===0);if(!n)return;if(n=n.slice(3),e.tagName==="BUTTON"&&e.setAttribute("type","button"),this.handlers[n]==null&&this.quill.scroll.query(n)==null){_o.warn("ignoring attaching to nonexistent format",n,e);return}const r=e.tagName==="SELECT"?"change":"click";e.addEventListener(r,s=>{let i;if(e.tagName==="SELECT"){if(e.selectedIndex<0)return;const l=e.options[e.selectedIndex];l.hasAttribute("selected")?i=!1:i=l.value||!1}else e.classList.contains("ql-active")?i=!1:i=e.value||!e.hasAttribute("value"),s.preventDefault();this.quill.focus();const[a]=this.quill.selection.getRange();if(this.handlers[n]!=null)this.handlers[n].call(this,i);else if(this.quill.scroll.query(n).prototype instanceof He){if(i=prompt(`Enter ${n}`),!i)return;this.quill.updateContents(new z().retain(a.index).delete(a.length).insert({[n]:i}),x.sources.USER)}else this.quill.format(n,i,x.sources.USER);this.update(a)}),this.controls.push([n,e])}update(e){const n=e==null?{}:this.quill.getFormat(e);this.controls.forEach(r=>{const[s,i]=r;if(i.tagName==="SELECT"){let a=null;if(e==null)a=null;else if(n[s]==null)a=i.querySelector("option[selected]");else if(!Array.isArray(n[s])){let l=n[s];typeof l=="string"&&(l=l.replace(/"/g,'\\"')),a=i.querySelector(`option[value="${l}"]`)}a==null?(i.value="",i.selectedIndex=-1):a.selected=!0}else if(e==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const a=n[s],l=a===i.getAttribute("value")||a!=null&&a.toString()===i.getAttribute("value")||a==null&&!i.getAttribute("value");i.classList.toggle("ql-active",l),i.setAttribute("aria-pressed",l.toString())}else{const a=n[s]!=null;i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}})}}al.DEFAULTS={};function yo(t,e,n){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${e}`),r.setAttribute("aria-pressed","false"),n!=null?(r.value=n,r.setAttribute("aria-label",`${e}: ${n}`)):r.setAttribute("aria-label",e),t.appendChild(r)}function hE(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(n=>{const r=document.createElement("span");r.classList.add("ql-formats"),n.forEach(s=>{if(typeof s=="string")yo(r,s);else{const i=Object.keys(s)[0],a=s[i];Array.isArray(a)?dE(r,i,a):yo(r,i,a)}}),t.appendChild(r)})}function dE(t,e,n){const r=document.createElement("select");r.classList.add(`ql-${e}`),n.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),r.appendChild(i)}),t.appendChild(r)}al.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(t!=null)if(t.length===0){const e=this.quill.getFormat();Object.keys(e).forEach(n=>{this.quill.scroll.query(n,Y.INLINE)!=null&&this.quill.format(n,!1,x.sources.USER)})}else this.quill.removeFormat(t.index,t.length,x.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();t==="rtl"&&e==null?this.quill.format("align","right",x.sources.USER):!t&&e==="right"&&this.quill.format("align",!1,x.sources.USER),this.quill.format("direction",t,x.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if(t==="+1"||t==="-1"){let s=t==="+1"?1:-1;n.direction==="rtl"&&(s*=-1),this.quill.format("indent",r+s,x.sources.USER)}},link(t){t===!0&&(t=prompt("Enter link URL:")),this.quill.format("link",t,x.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);t==="check"?n.list==="checked"||n.list==="unchecked"?this.quill.format("list",!1,x.sources.USER):this.quill.format("list","unchecked",x.sources.USER):this.quill.format("list",t,x.sources.USER)}}};const pE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',gE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',mE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',EE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',TE='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',_E='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',yE='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',bE='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',bo='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',IE='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',AE='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',vE='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',RE='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',OE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',wE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',SE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',NE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',LE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',CE='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',DE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',ME='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',xE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',PE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',qE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',BE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',GE='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',UE='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',kE='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',FE='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',$E='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',VE='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',HE='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',jE='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Pr={align:{"":pE,center:gE,right:mE,justify:EE},background:TE,blockquote:_E,bold:yE,clean:bE,code:bo,"code-block":bo,color:IE,direction:{"":AE,rtl:vE},formula:RE,header:{1:OE,2:wE,3:SE,4:NE,5:LE,6:CE},italic:DE,image:ME,indent:{"+1":xE,"-1":PE},link:qE,list:{bullet:BE,check:GE,ordered:UE},script:{sub:kE,super:FE},strike:$E,table:VE,underline:HE,video:jE},zE='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let Io=0;function Ao(t,e){t.setAttribute(e,`${t.getAttribute(e)!=="true"}`)}class Ys{constructor(e){this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",n=>{switch(n.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),n.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),Ao(this.label,"aria-expanded"),Ao(this.options,"aria-hidden")}buildItem(e){const n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");const r=e.getAttribute("value");return r&&n.setAttribute("data-value",r),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",()=>{this.selectItem(n,!0)}),n.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(n,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),n}buildLabel(){const e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=zE,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}buildOptions(){const e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id=`ql-picker-options-${Io}`,Io+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach(n=>{const r=this.buildItem(n);e.appendChild(r),n.selected===!0&&this.selectItem(r)}),this.container.appendChild(e)}buildPicker(){Array.from(this.select.attributes).forEach(e=>{this.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");e!==r&&(r!=null&&r.classList.remove("ql-selected"),e!=null&&(e.classList.add("ql-selected"),this.select.selectedIndex=Array.from(e.parentNode.children).indexOf(e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),n&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let e;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const n=e!=null&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}class Tu extends Ys{constructor(e,n){super(e),this.label.innerHTML=n,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(e){const n=super.buildItem(e);return n.style.backgroundColor=e.getAttribute("value")||"",n}selectItem(e,n){super.selectItem(e,n);const r=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=s:r.style.fill=s)}}class _u extends Ys{constructor(e,n){super(e),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=n[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(e,n){super.selectItem(e,n);const r=e||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const WE=t=>{const{overflowY:e}=getComputedStyle(t,null);return e!=="visible"&&e!=="clip"};class yu{constructor(e,n){this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,WE(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(e){const n=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=`${n}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let a=0;if(i.right>s.right&&(a=s.right-i.right,this.root.style.left=`${n+a}px`),i.left<s.left&&(a=s.left-i.left,this.root.style.left=`${n+a}px`),i.bottom>s.bottom){const l=i.bottom-i.top,o=e.bottom-e.top+l;this.root.style.top=`${r-o}px`,this.root.classList.add("ql-flip")}return a}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const YE=[!1,"center","right","justify"],XE=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],KE=[!1,"serif","monospace"],ZE=["1","2","3",!1],QE=["small",!1,"large","huge"];class Fr extends Xn{constructor(e,n){super(e,n);const r=s=>{if(!document.body.contains(e.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};e.emitter.listenDOM("click",document.body,r)}addModule(e){const n=super.addModule(e);return e==="toolbar"&&this.extendToolbar(n),n}buildButtons(e,n){Array.from(e).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),n[i]!=null))if(i==="direction")r.innerHTML=n[i][""]+n[i].rtl;else if(typeof n[i]=="string")r.innerHTML=n[i];else{const a=r.value||"";a!=null&&n[i][a]&&(r.innerHTML=n[i][a])}})})}buildPickers(e,n){this.pickers=Array.from(e).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&mr(s,YE),typeof n.align=="object"))return new _u(s,n.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&mr(s,XE,i==="background"?"#ffffff":"#000000"),new Tu(s,n[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?mr(s,KE):s.classList.contains("ql-header")?mr(s,ZE):s.classList.contains("ql-size")&&mr(s,QE)),new Ys(s)});const r=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on(H.events.EDITOR_CHANGE,r)}}Fr.DEFAULTS=zt({},Xn.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");t==null&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""}),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class bu extends yu{constructor(e,n){super(e,n),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",e=>{e.key==="Enter"?(this.save(),e.preventDefault()):e.key==="Escape"&&(this.cancel(),e.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;n!=null?this.textbox.value=n:e!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${e}`)||""),this.root.setAttribute("data-mode",e)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:e}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:n}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,H.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,H.sources.USER)),this.quill.root.scrollTop=n;break}case"video":e=JE(e);case"formula":{if(!e)break;const n=this.quill.getSelection(!0);if(n!=null){const r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,H.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",H.sources.USER),this.quill.setSelection(r+2,H.sources.USER)}break}}this.textbox.value="",this.hide()}}function JE(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}function mr(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;e.forEach(r=>{const s=document.createElement("option");r===n?s.setAttribute("selected","selected"):s.setAttribute("value",String(r)),t.appendChild(s)})}const e1=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Iu extends bu{constructor(e,n){super(e,n),this.quill.on(H.events.EDITOR_CHANGE,(r,s,i,a)=>{if(r===H.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&a===H.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const l=this.quill.getLines(s.index,s.length);if(l.length===1){const o=this.quill.getBounds(s);o!=null&&this.position(o)}else{const o=l[l.length-1],u=this.quill.getIndex(o),f=Math.min(o.length()-1,s.index+s.length-u),m=this.quill.getBounds(new dn(u,f));m!=null&&this.position(m)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(H.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const e=this.quill.getSelection();if(e!=null){const n=this.quill.getBounds(e);n!=null&&this.position(n)}},1)})}cancel(){this.show()}position(e){const n=super.position(e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",n!==0&&(r.style.marginLeft=`${-1*n-r.offsetWidth/2}px`),n}}V(Iu,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Au extends Fr{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=e1),super(e,n),this.quill.container.classList.add("ql-bubble")}extendToolbar(e){this.tooltip=new Iu(this.quill,this.options.bounds),e.container!=null&&(this.tooltip.root.appendChild(e.container),this.buildButtons(e.container.querySelectorAll("button"),Pr),this.buildPickers(e.container.querySelectorAll("select"),Pr))}}Au.DEFAULTS=zt({},Fr.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,x.sources.USER)}}}}});const t1=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class vu extends bu{constructor(){super(...arguments);V(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",n=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),n.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",n=>{if(this.linkRange!=null){const r=this.linkRange;this.restoreFocus(),this.quill.formatText(r,"link",!1,H.sources.USER),delete this.linkRange}n.preventDefault(),this.hide()}),this.quill.on(H.events.SELECTION_CHANGE,(n,r,s)=>{if(n!=null){if(n.length===0&&s===H.sources.USER){const[i,a]=this.quill.scroll.descendant(jt,n.index);if(i!=null){this.linkRange=new dn(n.index-a,i.length());const l=jt.formats(i.domNode);this.preview.textContent=l,this.preview.setAttribute("href",l),this.show();const o=this.quill.getBounds(this.linkRange);o!=null&&this.position(o);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}V(vu,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class Ru extends Fr{constructor(e,n){n.modules.toolbar!=null&&n.modules.toolbar.container==null&&(n.modules.toolbar.container=t1),super(e,n),this.quill.container.classList.add("ql-snow")}extendToolbar(e){e.container!=null&&(e.container.classList.add("ql-snow"),this.buildButtons(e.container.querySelectorAll("button"),Pr),this.buildPickers(e.container.querySelectorAll("select"),Pr),this.tooltip=new vu(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(n,r)=>{e.handlers.link.call(e,!r.format.link)}))}}Ru.DEFAULTS=zt({},Fr.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const e=this.quill.getSelection();if(e==null||e.length===0)return;let n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&n.indexOf("mailto:")!==0&&(n=`mailto:${n}`);const{tooltip:r}=this.quill.theme;r.edit("link",n)}else this.quill.format("link",!1,x.sources.USER)}}}}});x.register({"attributors/attribute/direction":su,"attributors/class/align":tu,"attributors/class/background":Tm,"attributors/class/color":Em,"attributors/class/direction":iu,"attributors/class/font":ou,"attributors/class/size":uu,"attributors/style/align":nu,"attributors/style/background":el,"attributors/style/color":Ja,"attributors/style/direction":au,"attributors/style/font":cu,"attributors/style/size":fu},!0);x.register({"formats/align":tu,"formats/direction":iu,"formats/indent":oE,"formats/background":el,"formats/color":Ja,"formats/font":ou,"formats/size":uu,"formats/blockquote":wa,"formats/code-block":De,"formats/header":Sa,"formats/list":kr,"formats/bold":xr,"formats/code":tl,"formats/italic":Na,"formats/link":jt,"formats/script":La,"formats/strike":Ca,"formats/underline":Da,"formats/formula":Ss,"formats/image":cE,"formats/video":Ns,"modules/syntax":Eu,"modules/table":fE,"modules/toolbar":al,"themes/bubble":Au,"themes/snow":Ru,"ui/icons":Pr,"ui/picker":Ys,"ui/icon-picker":_u,"ui/color-picker":Tu,"ui/tooltip":yu},!0);/*!
 * FilePond 4.32.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const n1=t=>t instanceof HTMLElement,r1=(t,e=[],n=[])=>{const r={...t},s=[],i=[],a=()=>({...r}),l=()=>{const d=[...s];return s.length=0,d},o=()=>{const d=[...i];i.length=0,d.forEach(({type:T,data:y})=>{u(T,y)})},u=(d,T,y)=>{if(y&&!document.hidden){i.push({type:d,data:T});return}g[d]&&g[d](T),s.push({type:d,data:T})},f=(d,...T)=>h[d]?h[d](...T):null,m={getState:a,processActionQueue:l,processDispatchQueue:o,dispatch:u,query:f};let h={};e.forEach(d=>{h={...d(r),...h}});let g={};return n.forEach(d=>{g={...d(u,f,r),...g}}),m},s1=(t,e,n)=>{if(typeof n=="function"){t[e]=n;return}Object.defineProperty(t,e,{...n})},pe=(t,e)=>{for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])},Wt=t=>{const e={};return pe(t,n=>{s1(e,n,t[n])}),e},be=(t,e,n=null)=>{if(n===null)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,n)},i1="http://www.w3.org/2000/svg",a1=["svg","path"],vo=t=>a1.includes(t),Bs=(t,e,n={})=>{typeof e=="object"&&(n=e,e=null);const r=vo(t)?document.createElementNS(i1,t):document.createElement(t);return e&&(vo(t)?be(r,"class",e):r.className=e),pe(n,(s,i)=>{be(r,s,i)}),r},l1=t=>(e,n)=>{typeof n<"u"&&t.children[n]?t.insertBefore(e,t.children[n]):t.appendChild(e)},o1=(t,e)=>(n,r)=>(typeof r<"u"?e.splice(r,0,n):e.push(n),n),c1=(t,e)=>n=>(e.splice(e.indexOf(n),1),n.element.parentNode&&t.removeChild(n.element),n),u1=typeof window<"u"&&typeof window.document<"u",Ou=()=>u1,f1=Ou()?Bs("svg"):{},h1="children"in f1?t=>t.children.length:t=>t.childNodes.length,wu=(t,e,n,r)=>{const s=n[0]||t.left,i=n[1]||t.top,a=s+t.width,l=i+t.height*(r[1]||1),o={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:s,top:i,right:a,bottom:l}};return e.filter(u=>!u.isRectIgnored()).map(u=>u.rect).forEach(u=>{Ro(o.inner,{...u.inner}),Ro(o.outer,{...u.outer})}),Oo(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,Oo(o.outer),o},Ro=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},Oo=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},rn=t=>typeof t=="number",d1=(t,e,n,r=.001)=>Math.abs(t-e)<r&&Math.abs(n)<r,p1=({stiffness:t=.5,damping:e=.75,mass:n=10}={})=>{let r=null,s=null,i=0,a=!1;const u=Wt({interpolate:(f,m)=>{if(a)return;if(!(rn(r)&&rn(s))){a=!0,i=0;return}const h=-(s-r)*t;i+=h/n,s+=i,i*=e,d1(s,r,i)||m?(s=r,i=0,a=!0,u.onupdate(s),u.oncomplete(s)):u.onupdate(s)},target:{set:f=>{if(rn(f)&&!rn(s)&&(s=f),r===null&&(r=f,s=f),r=f,s===r||typeof r>"u"){a=!0,i=0,u.onupdate(s),u.oncomplete(s);return}a=!1},get:()=>r},resting:{get:()=>a},onupdate:f=>{},oncomplete:f=>{}});return u},g1=t=>t<.5?2*t*t:-1+(4-2*t)*t,m1=({duration:t=500,easing:e=g1,delay:n=0}={})=>{let r=null,s,i,a=!0,l=!1,o=null;const f=Wt({interpolate:(m,h)=>{a||o===null||(r===null&&(r=m),!(m-r<n)&&(s=m-r-n,s>=t||h?(s=1,i=l?0:1,f.onupdate(i*o),f.oncomplete(i*o),a=!0):(i=s/t,f.onupdate((s>=0?e(l?1-i:i):0)*o))))},target:{get:()=>l?0:o,set:m=>{if(o===null){o=m,f.onupdate(m),f.oncomplete(m);return}m<o?(o=1,l=!0):(l=!1,o=m),a=!1,r=null}},resting:{get:()=>a},onupdate:m=>{},oncomplete:m=>{}});return f},wo={spring:p1,tween:m1},E1=(t,e,n)=>{const r=t[e]&&typeof t[e][n]=="object"?t[e][n]:t[e]||t,s=typeof r=="string"?r:r.type,i=typeof r=="object"?{...r}:{};return wo[s]?wo[s](i):null},ll=(t,e,n,r=!1)=>{e=Array.isArray(e)?e:[e],e.forEach(s=>{t.forEach(i=>{let a=i,l=()=>n[i],o=u=>n[i]=u;typeof i=="object"&&(a=i.key,l=i.getter||l,o=i.setter||o),!(s[a]&&!r)&&(s[a]={get:l,set:o})})})},T1=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r})=>{const s={...e},i=[];return pe(t,(a,l)=>{const o=E1(l);if(!o)return;o.onupdate=f=>{e[a]=f},o.target=s[a],ll([{key:a,setter:f=>{o.target!==f&&(o.target=f)},getter:()=>e[a]}],[n,r],e,!0),i.push(o)}),{write:a=>{let l=document.hidden,o=!0;return i.forEach(u=>{u.resting||(o=!1),u.interpolate(a,l)}),o},destroy:()=>{}}},_1=t=>(e,n)=>{t.addEventListener(e,n)},y1=t=>(e,n)=>{t.removeEventListener(e,n)},b1=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,viewState:s,view:i})=>{const a=[],l=_1(i.element),o=y1(i.element);return r.on=(u,f)=>{a.push({type:u,fn:f}),l(u,f)},r.off=(u,f)=>{a.splice(a.findIndex(m=>m.type===u&&m.fn===f),1),o(u,f)},{write:()=>!0,destroy:()=>{a.forEach(u=>{o(u.type,u.fn)})}}},I1=({mixinConfig:t,viewProps:e,viewExternalAPI:n})=>{ll(t,n,e)},xe=t=>t!=null,A1={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},v1=({mixinConfig:t,viewProps:e,viewInternalAPI:n,viewExternalAPI:r,view:s})=>{const i={...e},a={};ll(t,[n,r],e);const l=()=>[e.translateX||0,e.translateY||0],o=()=>[e.scaleX||0,e.scaleY||0],u=()=>s.rect?wu(s.rect,s.childViews,l(),o()):null;return n.rect={get:u},r.rect={get:u},t.forEach(f=>{e[f]=typeof i[f]>"u"?A1[f]:i[f]}),{write:()=>{if(R1(a,e))return O1(s.element,e),Object.assign(a,{...e}),!0},destroy:()=>{}}},R1=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in e)if(e[n]!==t[n])return!0;return!1},O1=(t,{opacity:e,perspective:n,translateX:r,translateY:s,scaleX:i,scaleY:a,rotateX:l,rotateY:o,rotateZ:u,originX:f,originY:m,width:h,height:g})=>{let d="",T="";(xe(f)||xe(m))&&(T+=`transform-origin: ${f||0}px ${m||0}px;`),xe(n)&&(d+=`perspective(${n}px) `),(xe(r)||xe(s))&&(d+=`translate3d(${r||0}px, ${s||0}px, 0) `),(xe(i)||xe(a))&&(d+=`scale3d(${xe(i)?i:1}, ${xe(a)?a:1}, 1) `),xe(u)&&(d+=`rotateZ(${u}rad) `),xe(l)&&(d+=`rotateX(${l}rad) `),xe(o)&&(d+=`rotateY(${o}rad) `),d.length&&(T+=`transform:${d};`),xe(e)&&(T+=`opacity:${e};`,e===0&&(T+="visibility:hidden;"),e<1&&(T+="pointer-events:none;")),xe(g)&&(T+=`height:${g}px;`),xe(h)&&(T+=`width:${h}px;`);const y=t.elementCurrentStyle||"";(T.length!==y.length||T!==y)&&(t.style.cssText=T,t.elementCurrentStyle=T)},w1={styles:v1,listeners:b1,animations:T1,apis:I1},So=(t={},e={},n={})=>(e.layoutCalculated||(t.paddingTop=parseInt(n.paddingTop,10)||0,t.marginTop=parseInt(n.marginTop,10)||0,t.marginRight=parseInt(n.marginRight,10)||0,t.marginBottom=parseInt(n.marginBottom,10)||0,t.marginLeft=parseInt(n.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=e.offsetParent===null,t),_e=({tag:t="div",name:e=null,attributes:n={},read:r=()=>{},write:s=()=>{},create:i=()=>{},destroy:a=()=>{},filterFrameActionsForChild:l=(g,d)=>d,didCreateView:o=()=>{},didWriteView:u=()=>{},ignoreRect:f=!1,ignoreRectUpdate:m=!1,mixins:h=[]}={})=>(g,d={})=>{const T=Bs(t,`filepond--${e}`,n),y=window.getComputedStyle(T,null),A=So();let _=null,v=!1;const L=[],N=[],G={},$={},q=[s],F=[r],j=[a],E=()=>T,S=()=>L.concat(),R=()=>G,w=W=>(se,Q)=>se(W,Q),M=()=>_||(_=wu(A,L,[0,0],[1,1]),_),I=()=>y,O=()=>{_=null,L.forEach(Q=>Q._read()),!(m&&A.width&&A.height)&&So(A,T,y);const se={root:J,props:d,rect:A};F.forEach(Q=>Q(se))},D=(W,se,Q)=>{let ie=se.length===0;return q.forEach(ee=>{ee({props:d,root:J,actions:se,timestamp:W,shouldOptimize:Q})===!1&&(ie=!1)}),N.forEach(ee=>{ee.write(W)===!1&&(ie=!1)}),L.filter(ee=>!!ee.element.parentNode).forEach(ee=>{ee._write(W,l(ee,se),Q)||(ie=!1)}),L.forEach((ee,ae)=>{ee.element.parentNode||(J.appendChild(ee.element,ae),ee._read(),ee._write(W,l(ee,se),Q),ie=!1)}),v=ie,u({props:d,root:J,actions:se,timestamp:W}),ie},P=()=>{N.forEach(W=>W.destroy()),j.forEach(W=>{W({root:J,props:d})}),L.forEach(W=>W._destroy())},U={element:{get:E},style:{get:I},childViews:{get:S}},k={...U,rect:{get:M},ref:{get:R},is:W=>e===W,appendChild:l1(T),createChildView:w(g),linkView:W=>(L.push(W),W),unlinkView:W=>{L.splice(L.indexOf(W),1)},appendChildView:o1(T,L),removeChildView:c1(T,L),registerWriter:W=>q.push(W),registerReader:W=>F.push(W),registerDestroyer:W=>j.push(W),invalidateLayout:()=>T.layoutCalculated=!1,dispatch:g.dispatch,query:g.query},Z={element:{get:E},childViews:{get:S},rect:{get:M},resting:{get:()=>v},isRectIgnored:()=>f,_read:O,_write:D,_destroy:P},ne={...U,rect:{get:()=>A}};Object.keys(h).sort((W,se)=>W==="styles"?1:se==="styles"?-1:0).forEach(W=>{const se=w1[W]({mixinConfig:h[W],viewProps:d,viewState:$,viewInternalAPI:k,viewExternalAPI:Z,view:Wt(ne)});se&&N.push(se)});const J=Wt(k);i({root:J,props:d});const X=h1(T);return L.forEach((W,se)=>{J.appendChild(W.element,X+se)}),o(J),Wt(Z)},S1=(t,e,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(t),window[r].writers.push(e);return}window[r]={readers:[t],writers:[e]};const s=window[r],i=1e3/n;let a=null,l=null,o=null,u=null;const f=()=>{document.hidden?(o=()=>window.setTimeout(()=>m(performance.now()),i),u=()=>window.clearTimeout(l)):(o=()=>window.requestAnimationFrame(m),u=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{u&&u(),f(),m(performance.now())});const m=h=>{l=o(m),a||(a=h);const g=h-a;g<=i||(a=h-g%i,s.readers.forEach(d=>d()),s.writers.forEach(d=>d(h)))};return f(),m(performance.now()),{pause:()=>{u(l)}}},qe=(t,e)=>({root:n,props:r,actions:s=[],timestamp:i,shouldOptimize:a})=>{s.filter(l=>t[l.type]).forEach(l=>t[l.type]({root:n,props:r,action:l.data,timestamp:i,shouldOptimize:a})),e&&e({root:n,props:r,actions:s,timestamp:i,shouldOptimize:a})},No=(t,e)=>e.parentNode.insertBefore(t,e),Lo=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),Xs=t=>Array.isArray(t),xt=t=>t==null,N1=t=>t.trim(),Ks=t=>""+t,L1=(t,e=",")=>xt(t)?[]:Xs(t)?t:Ks(t).split(e).map(N1).filter(n=>n.length),Su=t=>typeof t=="boolean",Nu=t=>Su(t)?t:t==="true",Pe=t=>typeof t=="string",Lu=t=>rn(t)?t:Pe(t)?Ks(t).replace(/[a-z]+/gi,""):0,Ls=t=>parseInt(Lu(t),10),Co=t=>parseFloat(Lu(t)),Jn=t=>rn(t)&&isFinite(t)&&Math.floor(t)===t,Do=(t,e=1e3)=>{if(Jn(t))return t;let n=Ks(t).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Ls(n)*e*e):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Ls(n)*e):Ls(n)},sn=t=>typeof t=="function",C1=t=>{let e=self,n=t.split("."),r=null;for(;r=n.shift();)if(e=e[r],!e)return null;return e},Mo={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},D1=t=>{const e={};return e.url=Pe(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},pe(Mo,n=>{e[n]=M1(n,t[n],Mo[n],e.timeout,e.headers)}),e.process=t.process||Pe(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e},M1=(t,e,n,r,s)=>{if(e===null)return null;if(typeof e=="function")return e;const i={url:n==="GET"||n==="PATCH"?`?${t}=`:"",method:n,headers:s,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(Pe(e))return i.url=e,i;if(Object.assign(i,e),Pe(i.headers)){const a=i.headers.split(/:(.+)/);i.headers={header:a[0],value:a[1]}}return i.withCredentials=Nu(i.withCredentials),i},x1=t=>D1(t),P1=t=>t===null,Ae=t=>typeof t=="object"&&t!==null,q1=t=>Ae(t)&&Pe(t.url)&&Ae(t.process)&&Ae(t.revert)&&Ae(t.restore)&&Ae(t.fetch),Ma=t=>Xs(t)?"array":P1(t)?"null":Jn(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":q1(t)?"api":typeof t,B1=t=>t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),G1={array:L1,boolean:Nu,int:t=>Ma(t)==="bytes"?Do(t):Ls(t),number:Co,float:Co,bytes:Do,string:t=>sn(t)?t:Ks(t),function:t=>C1(t),serverapi:x1,object:t=>{try{return JSON.parse(B1(t))}catch{return null}}},U1=(t,e)=>G1[e](t),Cu=(t,e,n)=>{if(t===e)return t;let r=Ma(t);if(r!==n){const s=U1(t,n);if(r=Ma(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;t=s}return t},k1=(t,e)=>{let n=t;return{enumerable:!0,get:()=>n,set:r=>{n=Cu(r,t,e)}}},F1=t=>{const e={};return pe(t,n=>{const r=t[n];e[n]=k1(r[0],r[1])}),Wt(e)},$1=t=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:F1(t)}),Zs=(t,e="-")=>t.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(e),V1=(t,e)=>{const n={};return pe(e,r=>{n[r]={get:()=>t.getState().options[r],set:s=>{t.dispatch(`SET_${Zs(r,"_").toUpperCase()}`,{value:s})}}}),n},H1=t=>(e,n,r)=>{const s={};return pe(t,i=>{const a=Zs(i,"_").toUpperCase();s[`SET_${a}`]=l=>{try{r.options[i]=l.value}catch{}e(`DID_SET_${a}`,{value:r.options[i]})}}),s},j1=t=>e=>{const n={};return pe(t,r=>{n[`GET_${Zs(r,"_").toUpperCase()}`]=s=>e.options[r]}),n},et={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},ol=()=>Math.random().toString(36).substring(2,11),cl=(t,e)=>t.splice(e,1),z1=(t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)},Qs=()=>{const t=[],e=(r,s)=>{cl(t,t.findIndex(i=>i.event===r&&(i.cb===s||!s)))},n=(r,s,i)=>{t.filter(a=>a.event===r).map(a=>a.cb).forEach(a=>z1(()=>a(...s),i))};return{fireSync:(r,...s)=>{n(r,s,!0)},fire:(r,...s)=>{n(r,s,!1)},on:(r,s)=>{t.push({event:r,cb:s})},onOnce:(r,s)=>{t.push({event:r,cb:(...i)=>{e(r,s),s(...i)}})},off:e}},Du=(t,e,n)=>{Object.getOwnPropertyNames(t).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r)))},W1=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Ue=t=>{const e={};return Du(t,e,W1),e},Y1=t=>{t.forEach((e,n)=>{e.released&&cl(t,n)})},te={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Ie={INPUT:1,LIMBO:2,LOCAL:3},Mu=t=>/[^0-9]+/.exec(t),xu=()=>Mu(1.1.toLocaleString())[0],X1=()=>{const t=xu(),e=1e3.toLocaleString();return e!=="1000"?Mu(e)[0]:t==="."?",":"."},B={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},ul=[],it=(t,e,n)=>new Promise((r,s)=>{const i=ul.filter(l=>l.key===t).map(l=>l.cb);if(i.length===0){r(e);return}const a=i.shift();i.reduce((l,o)=>l.then(u=>o(u,n)),a(e,n)).then(l=>r(l)).catch(l=>s(l))}),yn=(t,e,n)=>ul.filter(r=>r.key===t).map(r=>r.cb(e,n)),K1=(t,e)=>ul.push({key:t,cb:e}),Z1=t=>Object.assign(Un,t),Gs=()=>({...Un}),Q1=t=>{pe(t,(e,n)=>{Un[e]&&(Un[e][0]=Cu(n,Un[e][0],Un[e][1]))})},Un={id:[null,B.STRING],name:["filepond",B.STRING],disabled:[!1,B.BOOLEAN],className:[null,B.STRING],required:[!1,B.BOOLEAN],captureMethod:[null,B.STRING],allowSyncAcceptAttribute:[!0,B.BOOLEAN],allowDrop:[!0,B.BOOLEAN],allowBrowse:[!0,B.BOOLEAN],allowPaste:[!0,B.BOOLEAN],allowMultiple:[!1,B.BOOLEAN],allowReplace:[!0,B.BOOLEAN],allowRevert:[!0,B.BOOLEAN],allowRemove:[!0,B.BOOLEAN],allowProcess:[!0,B.BOOLEAN],allowReorder:[!1,B.BOOLEAN],allowDirectoriesOnly:[!1,B.BOOLEAN],storeAsFile:[!1,B.BOOLEAN],forceRevert:[!1,B.BOOLEAN],maxFiles:[null,B.INT],checkValidity:[!1,B.BOOLEAN],itemInsertLocationFreedom:[!0,B.BOOLEAN],itemInsertLocation:["before",B.STRING],itemInsertInterval:[75,B.INT],dropOnPage:[!1,B.BOOLEAN],dropOnElement:[!0,B.BOOLEAN],dropValidation:[!1,B.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],B.ARRAY],instantUpload:[!0,B.BOOLEAN],maxParallelUploads:[2,B.INT],allowMinimumUploadDuration:[!0,B.BOOLEAN],chunkUploads:[!1,B.BOOLEAN],chunkForce:[!1,B.BOOLEAN],chunkSize:[5e6,B.INT],chunkRetryDelays:[[500,1e3,3e3],B.ARRAY],server:[null,B.SERVER_API],fileSizeBase:[1e3,B.INT],labelFileSizeBytes:["bytes",B.STRING],labelFileSizeKilobytes:["KB",B.STRING],labelFileSizeMegabytes:["MB",B.STRING],labelFileSizeGigabytes:["GB",B.STRING],labelDecimalSeparator:[xu(),B.STRING],labelThousandsSeparator:[X1(),B.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',B.STRING],labelInvalidField:["Field contains invalid files",B.STRING],labelFileWaitingForSize:["Waiting for size",B.STRING],labelFileSizeNotAvailable:["Size not available",B.STRING],labelFileCountSingular:["file in list",B.STRING],labelFileCountPlural:["files in list",B.STRING],labelFileLoading:["Loading",B.STRING],labelFileAdded:["Added",B.STRING],labelFileLoadError:["Error during load",B.STRING],labelFileRemoved:["Removed",B.STRING],labelFileRemoveError:["Error during remove",B.STRING],labelFileProcessing:["Uploading",B.STRING],labelFileProcessingComplete:["Upload complete",B.STRING],labelFileProcessingAborted:["Upload cancelled",B.STRING],labelFileProcessingError:["Error during upload",B.STRING],labelFileProcessingRevertError:["Error during revert",B.STRING],labelTapToCancel:["tap to cancel",B.STRING],labelTapToRetry:["tap to retry",B.STRING],labelTapToUndo:["tap to undo",B.STRING],labelButtonRemoveItem:["Remove",B.STRING],labelButtonAbortItemLoad:["Abort",B.STRING],labelButtonRetryItemLoad:["Retry",B.STRING],labelButtonAbortItemProcessing:["Cancel",B.STRING],labelButtonUndoItemProcessing:["Undo",B.STRING],labelButtonRetryItemProcessing:["Retry",B.STRING],labelButtonProcessItem:["Upload",B.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',B.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',B.STRING],oninit:[null,B.FUNCTION],onwarning:[null,B.FUNCTION],onerror:[null,B.FUNCTION],onactivatefile:[null,B.FUNCTION],oninitfile:[null,B.FUNCTION],onaddfilestart:[null,B.FUNCTION],onaddfileprogress:[null,B.FUNCTION],onaddfile:[null,B.FUNCTION],onprocessfilestart:[null,B.FUNCTION],onprocessfileprogress:[null,B.FUNCTION],onprocessfileabort:[null,B.FUNCTION],onprocessfilerevert:[null,B.FUNCTION],onprocessfile:[null,B.FUNCTION],onprocessfiles:[null,B.FUNCTION],onremovefile:[null,B.FUNCTION],onpreparefile:[null,B.FUNCTION],onupdatefiles:[null,B.FUNCTION],onreorderfiles:[null,B.FUNCTION],beforeDropFile:[null,B.FUNCTION],beforeAddFile:[null,B.FUNCTION],beforeRemoveFile:[null,B.FUNCTION],beforePrepareFile:[null,B.FUNCTION],stylePanelLayout:[null,B.STRING],stylePanelAspectRatio:[null,B.STRING],styleItemPanelAspectRatio:[null,B.STRING],styleButtonRemoveItemPosition:["left",B.STRING],styleButtonProcessItemPosition:["right",B.STRING],styleLoadIndicatorPosition:["right",B.STRING],styleProgressIndicatorPosition:["right",B.STRING],styleButtonRemoveItemAlign:[!1,B.BOOLEAN],files:[[],B.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],B.ARRAY]},an=(t,e)=>xt(e)?t[0]||null:Jn(e)?t[e]||null:(typeof e=="object"&&(e=e.id),t.find(n=>n.id===e)||null),Pu=t=>{if(xt(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},ot=t=>t.filter(e=>!e.archived),J1={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Ts=null;const e0=()=>{if(Ts===null)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Ts=e.files.length===1}catch{Ts=!1}return Ts},t0=[te.LOAD_ERROR,te.PROCESSING_ERROR,te.PROCESSING_REVERT_ERROR],n0=[te.LOADING,te.PROCESSING,te.PROCESSING_QUEUED,te.INIT],r0=[te.PROCESSING_COMPLETE],s0=t=>t0.includes(t.status),i0=t=>n0.includes(t.status),a0=t=>r0.includes(t.status),xo=t=>Ae(t.options.server)&&(Ae(t.options.server.process)||sn(t.options.server.process)),l0=t=>({GET_STATUS:()=>{const e=ot(t.items),{EMPTY:n,ERROR:r,BUSY:s,IDLE:i,READY:a}=J1;return e.length===0?n:e.some(s0)?r:e.some(i0)?s:e.some(a0)?a:i},GET_ITEM:e=>an(t.items,e),GET_ACTIVE_ITEM:e=>an(ot(t.items),e),GET_ACTIVE_ITEMS:()=>ot(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const n=an(t.items,e);return n?n.filename:null},GET_ITEM_SIZE:e=>{const n=an(t.items,e);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter(e=>/^style/.test(e)).map(e=>({name:e,value:t.options[e]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:Pu(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>ot(t.items).filter(n=>n.status===e),GET_TOTAL_ITEMS:()=>ot(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&e0()&&!xo(t),IS_ASYNC:()=>xo(t),GET_FILE_SIZE_LABELS:e=>({labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),o0=t=>{const e=ot(t.items).length;if(!t.options.allowMultiple)return e===0;const n=t.options.maxFiles;return n===null||e<n},qu=(t,e,n)=>Math.max(Math.min(n,t),e),c0=(t,e,n)=>t.splice(e,0,n),u0=(t,e,n)=>xt(e)?null:typeof n>"u"?(t.push(e),e):(n=qu(n,0,t.length),c0(t,n,e),e),xa=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),$r=t=>`${t}`.split("/").pop().split("?").shift(),Js=t=>t.split(".").pop(),f0=t=>{if(typeof t!="string")return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?e==="jpeg"?"jpg":e:""},Er=(t,e="")=>(e+t).slice(-e.length),Bu=(t=new Date)=>`${t.getFullYear()}-${Er(t.getMonth()+1,"00")}-${Er(t.getDate(),"00")}_${Er(t.getHours(),"00")}-${Er(t.getMinutes(),"00")}-${Er(t.getSeconds(),"00")}`,Zn=(t,e,n=null,r=null)=>{const s=typeof n=="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);return s.lastModifiedDate=new Date,t._relativePath&&(s._relativePath=t._relativePath),Pe(e)||(e=Bu()),e&&r===null&&Js(e)?s.name=e:(r=r||f0(s.type),s.name=e+(r?"."+r:"")),s},h0=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Gu=(t,e)=>{const n=h0();if(n){const r=new n;return r.append(t),r.getBlob(e)}return new Blob([t],{type:e})},d0=(t,e)=>{const n=new ArrayBuffer(t.length),r=new Uint8Array(n);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return Gu(n,e)},Uu=t=>(/^data:(.+);/.exec(t)||[])[1]||null,p0=t=>t.split(",")[1].replace(/\s/g,""),g0=t=>atob(p0(t)),m0=t=>{const e=Uu(t),n=g0(t);return d0(n,e)},E0=(t,e,n)=>Zn(m0(t),e,null,n),T0=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return e.length?decodeURI(e[e.length-1]):null},_0=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},y0=t=>/x-content-transfer-id:/i.test(t)&&(t.split(":")[1]||"").trim()||null,fl=t=>{const e={source:null,name:null,size:null},n=t.split(`
`);for(let r of n){const s=T0(r);if(s){e.name=s;continue}const i=_0(r);if(i){e.size=i;continue}const a=y0(r);if(a){e.source=a;continue}}return e},b0=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>e.progress,r=()=>{e.request&&e.request.abort&&e.request.abort()},s=()=>{const l=e.source;a.fire("init",l),l instanceof File?a.fire("load",l):l instanceof Blob?a.fire("load",Zn(l,l.name)):xa(l)?a.fire("load",E0(l)):i(l)},i=l=>{if(!t){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}e.timestamp=Date.now(),e.request=t(l,o=>{e.duration=Date.now()-e.timestamp,e.complete=!0,o instanceof Blob&&(o=Zn(o,o.name||$r(l))),a.fire("load",o instanceof Blob?o:o?o.body:null)},o=>{a.fire("error",typeof o=="string"?{type:"error",code:0,body:o}:o)},(o,u,f)=>{if(f&&(e.size=f),e.duration=Date.now()-e.timestamp,!o){e.progress=null;return}e.progress=u/f,a.fire("progress",e.progress)},()=>{a.fire("abort")},o=>{const u=fl(typeof o=="string"?o:o.headers);a.fire("meta",{size:e.size||u.size,filename:u.name,source:u.source})})},a={...Qs(),setSource:l=>e.source=l,getProgress:n,abort:r,load:s};return a},Po=t=>/GET|HEAD/.test(t),ln=(t,e,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,a.abort()}};let s=!1,i=!1;n={method:"POST",headers:{},withCredentials:!1,...n},e=encodeURI(e),Po(n.method)&&t&&(e=`${e}${encodeURIComponent(typeof t=="string"?t:JSON.stringify(t))}`);const a=new XMLHttpRequest,l=Po(n.method)?a:a.upload;return l.onprogress=o=>{s||r.onprogress(o.lengthComputable,o.loaded,o.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||i||(i=!0,r.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?r.onload(a):r.onerror(a)},a.onerror=()=>r.onerror(a),a.onabort=()=>{s=!0,r.onabort()},a.ontimeout=()=>r.ontimeout(a),a.open(n.method,e,!0),Jn(n.timeout)&&(a.timeout=n.timeout),Object.keys(n.headers).forEach(o=>{const u=unescape(encodeURIComponent(n.headers[o]));a.setRequestHeader(o,u)}),n.responseType&&(a.responseType=n.responseType),n.withCredentials&&(a.withCredentials=!0),a.send(t),r},ge=(t,e,n,r)=>({type:t,code:e,body:n,headers:r}),on=t=>e=>{t(ge("error",0,"Timeout",e.getAllResponseHeaders()))},qo=t=>/\?/.test(t),Rr=(...t)=>{let e="";return t.forEach(n=>{e+=qo(e)&&qo(n)?n.replace(/\?/,"&"):n}),e},ra=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Pe(e.url))return null;const n=e.onload||(s=>s),r=e.onerror||(s=>null);return(s,i,a,l,o,u)=>{const f=ln(s,Rr(t,e.url),{...e,responseType:"blob"});return f.onload=m=>{const h=m.getAllResponseHeaders(),g=fl(h).name||$r(s);i(ge("load",m.status,e.method==="HEAD"?null:Zn(n(m.response),g),h))},f.onerror=m=>{a(ge("error",m.status,r(m.response)||m.statusText,m.getAllResponseHeaders()))},f.onheaders=m=>{u(ge("headers",m.status,null,m.getAllResponseHeaders()))},f.ontimeout=on(a),f.onprogress=l,f.onabort=o,f}},ze={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},I0=(t,e,n,r,s,i,a,l,o,u,f)=>{const m=[],{chunkTransferId:h,chunkServer:g,chunkSize:d,chunkRetryDelays:T}=f,y={serverId:h,aborted:!1},A=e.ondata||(w=>w),_=e.onload||((w,M)=>M==="HEAD"?w.getResponseHeader("Upload-Offset"):w.response),v=e.onerror||(w=>null),L=w=>{const M=new FormData;Ae(s)&&M.append(n,JSON.stringify(s));const I=typeof e.headers=="function"?e.headers(r,s):{...e.headers,"Upload-Length":r.size},O={...e,headers:I},D=ln(A(M),Rr(t,e.url),O);D.onload=P=>w(_(P,O.method)),D.onerror=P=>a(ge("error",P.status,v(P.response)||P.statusText,P.getAllResponseHeaders())),D.ontimeout=on(a)},N=w=>{const M=Rr(t,g.url,y.serverId),O={headers:typeof e.headers=="function"?e.headers(y.serverId):{...e.headers},method:"HEAD"},D=ln(null,M,O);D.onload=P=>w(_(P,O.method)),D.onerror=P=>a(ge("error",P.status,v(P.response)||P.statusText,P.getAllResponseHeaders())),D.ontimeout=on(a)},G=Math.floor(r.size/d);for(let w=0;w<=G;w++){const M=w*d,I=r.slice(M,M+d,"application/offset+octet-stream");m[w]={index:w,size:I.size,offset:M,data:I,file:r,progress:0,retries:[...T],status:ze.QUEUED,error:null,request:null,timeout:null}}const $=()=>i(y.serverId),q=w=>w.status===ze.QUEUED||w.status===ze.ERROR,F=w=>{if(y.aborted)return;if(w=w||m.find(q),!w){m.every(k=>k.status===ze.COMPLETE)&&$();return}w.status=ze.PROCESSING,w.progress=null;const M=g.ondata||(k=>k),I=g.onerror||(k=>null),O=g.onload||(()=>{}),D=Rr(t,g.url,y.serverId),P=typeof g.headers=="function"?g.headers(w):{...g.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":w.offset,"Upload-Length":r.size,"Upload-Name":r.name},U=w.request=ln(M(w.data),D,{...g,headers:P});U.onload=k=>{O(k,w.index,m.length),w.status=ze.COMPLETE,w.request=null,S()},U.onprogress=(k,Z,ne)=>{w.progress=k?Z:null,E()},U.onerror=k=>{w.status=ze.ERROR,w.request=null,w.error=I(k.response)||k.statusText,j(w)||a(ge("error",k.status,I(k.response)||k.statusText,k.getAllResponseHeaders()))},U.ontimeout=k=>{w.status=ze.ERROR,w.request=null,j(w)||on(a)(k)},U.onabort=()=>{w.status=ze.QUEUED,w.request=null,o()}},j=w=>w.retries.length===0?!1:(w.status=ze.WAITING,clearTimeout(w.timeout),w.timeout=setTimeout(()=>{F(w)},w.retries.shift()),!0),E=()=>{const w=m.reduce((I,O)=>I===null||O.progress===null?null:I+O.progress,0);if(w===null)return l(!1,0,0);const M=m.reduce((I,O)=>I+O.size,0);l(!0,w,M)},S=()=>{m.filter(M=>M.status===ze.PROCESSING).length>=1||F()},R=()=>{m.forEach(w=>{clearTimeout(w.timeout),w.request&&w.request.abort()})};return y.serverId?N(w=>{y.aborted||(m.filter(M=>M.offset<w).forEach(M=>{M.status=ze.COMPLETE,M.progress=M.size}),S())}):L(w=>{y.aborted||(u(w),y.serverId=w,S())}),{abort:()=>{y.aborted=!0,R()}}},A0=(t,e,n,r)=>(s,i,a,l,o,u,f)=>{if(!s)return;const m=r.chunkUploads,h=m&&s.size>r.chunkSize,g=m&&(h||r.chunkForce);if(s instanceof Blob&&g)return I0(t,e,n,s,i,a,l,o,u,f,r);const d=e.ondata||(N=>N),T=e.onload||(N=>N),y=e.onerror||(N=>null),A=typeof e.headers=="function"?e.headers(s,i)||{}:{...e.headers},_={...e,headers:A};var v=new FormData;Ae(i)&&v.append(n,JSON.stringify(i)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(N=>{v.append(n,N.file,N.name===null?N.file.name:`${N.name}${N.file.name}`)});const L=ln(d(v),Rr(t,e.url),_);return L.onload=N=>{a(ge("load",N.status,T(N.response),N.getAllResponseHeaders()))},L.onerror=N=>{l(ge("error",N.status,y(N.response)||N.statusText,N.getAllResponseHeaders()))},L.ontimeout=on(l),L.onprogress=o,L.onabort=u,L},v0=(t="",e,n,r)=>typeof e=="function"?(...s)=>e(n,...s,r):!e||!Pe(e.url)?null:A0(t,e,n,r),Tr=(t="",e)=>{if(typeof e=="function")return e;if(!e||!Pe(e.url))return(s,i)=>i();const n=e.onload||(s=>s),r=e.onerror||(s=>null);return(s,i,a)=>{const l=ln(s,t+e.url,e);return l.onload=o=>{i(ge("load",o.status,n(o.response),o.getAllResponseHeaders()))},l.onerror=o=>{a(ge("error",o.status,r(o.response)||o.statusText,o.getAllResponseHeaders()))},l.ontimeout=on(a),l}},ku=(t=0,e=1)=>t+Math.random()*(e-t),R0=(t,e=1e3,n=0,r=25,s=250)=>{let i=null;const a=Date.now(),l=()=>{let o=Date.now()-a,u=ku(r,s);o+u>e&&(u=o+u-e);let f=o/e;if(f>=1||document.hidden){t(1);return}t(f),i=setTimeout(l,u)};return e>0&&l(),{clear:()=>{clearTimeout(i)}}},O0=(t,e)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=e,s=(f,m)=>{const h=()=>{n.duration===0||n.progress===null||u.fire("progress",u.getProgress())},g=()=>{n.complete=!0,u.fire("load-perceived",n.response.body)};u.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=R0(d=>{n.perceivedProgress=d,n.perceivedDuration=Date.now()-n.timestamp,h(),n.response&&n.perceivedProgress===1&&!n.complete&&g()},r?ku(750,1500):0),n.request=t(f,m,d=>{n.response=Ae(d)?d:{type:"load",code:200,body:`${d}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,u.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&g()},d=>{n.perceivedPerformanceUpdater.clear(),u.fire("error",Ae(d)?d:{type:"error",code:0,body:`${d}`})},(d,T,y)=>{n.duration=Date.now()-n.timestamp,n.progress=d?T/y:null,h()},()=>{n.perceivedPerformanceUpdater.clear(),u.fire("abort",n.response?n.response.body:null)},d=>{u.fire("transfer",d)})},i=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},a=()=>{i(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,o=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,u={...Qs(),process:s,abort:i,getProgress:l,getDuration:o,reset:a};return u},Fu=t=>t.substring(0,t.lastIndexOf("."))||t,w0=t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||xa(t)?e[0]=t.name||Bu():xa(t)?(e[1]=t.length,e[2]=Uu(t)):Pe(t)&&(e[0]=$r(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}},cn=t=>!!(t instanceof File||t instanceof Blob&&t.name),$u=t=>{if(!Ae(t))return t;const e=Xs(t)?[]:{};for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n];e[n]=r&&Ae(r)?$u(r):r}return e},S0=(t=null,e=null,n=null)=>{const r=ol(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:e,transferId:null,processingAborted:!1,status:e?te.PROCESSING_COMPLETE:te.INIT,activeLoader:null,activeProcessor:null};let i=null;const a={},l=q=>s.status=q,o=(q,...F)=>{s.released||s.frozen||G.fire(q,...F)},u=()=>Js(s.file.name),f=()=>s.file.type,m=()=>s.file.size,h=()=>s.file,g=(q,F,j)=>{if(s.source=q,G.fireSync("init"),s.file){G.fireSync("load-skip");return}s.file=w0(q),F.on("init",()=>{o("load-init")}),F.on("meta",E=>{s.file.size=E.size,s.file.filename=E.filename,E.source&&(t=Ie.LIMBO,s.serverFileReference=E.source,s.status=te.PROCESSING_COMPLETE),o("load-meta")}),F.on("progress",E=>{l(te.LOADING),o("load-progress",E)}),F.on("error",E=>{l(te.LOAD_ERROR),o("load-request-error",E)}),F.on("abort",()=>{l(te.INIT),o("load-abort")}),F.on("load",E=>{s.activeLoader=null;const S=w=>{s.file=cn(w)?w:s.file,t===Ie.LIMBO&&s.serverFileReference?l(te.PROCESSING_COMPLETE):l(te.IDLE),o("load")},R=w=>{s.file=E,o("load-meta"),l(te.LOAD_ERROR),o("load-file-error",w)};if(s.serverFileReference){S(E);return}j(E,S,R)}),F.setSource(q),s.activeLoader=F,F.load()},d=()=>{s.activeLoader&&s.activeLoader.load()},T=()=>{if(s.activeLoader){s.activeLoader.abort();return}l(te.INIT),o("load-abort")},y=(q,F)=>{if(s.processingAborted){s.processingAborted=!1;return}if(l(te.PROCESSING),i=null,!(s.file instanceof Blob)){G.on("load",()=>{y(q,F)});return}q.on("load",S=>{s.transferId=null,s.serverFileReference=S}),q.on("transfer",S=>{s.transferId=S}),q.on("load-perceived",S=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=S,l(te.PROCESSING_COMPLETE),o("process-complete",S)}),q.on("start",()=>{o("process-start")}),q.on("error",S=>{s.activeProcessor=null,l(te.PROCESSING_ERROR),o("process-error",S)}),q.on("abort",S=>{s.activeProcessor=null,s.serverFileReference=S,l(te.IDLE),o("process-abort"),i&&i()}),q.on("progress",S=>{o("process-progress",S)});const j=S=>{s.archived||q.process(S,{...a})},E=console.error;F(s.file,j,E),s.activeProcessor=q},A=()=>{s.processingAborted=!1,l(te.PROCESSING_QUEUED)},_=()=>new Promise(q=>{if(!s.activeProcessor){s.processingAborted=!0,l(te.IDLE),o("process-abort"),q();return}i=()=>{q()},s.activeProcessor.abort()}),v=(q,F)=>new Promise((j,E)=>{const S=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(S===null){j();return}q(S,()=>{s.serverFileReference=null,s.transferId=null,j()},R=>{if(!F){j();return}l(te.PROCESSING_REVERT_ERROR),o("process-revert-error"),E(R)}),l(te.IDLE),o("process-revert")}),L=(q,F,j)=>{const E=q.split("."),S=E[0],R=E.pop();let w=a;E.forEach(M=>w=w[M]),JSON.stringify(w[R])!==JSON.stringify(F)&&(w[R]=F,o("metadata-update",{key:S,value:a[S],silent:j}))},G={id:{get:()=>r},origin:{get:()=>t,set:q=>t=q},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>Fu(s.file.name)},fileExtension:{get:u},fileType:{get:f},fileSize:{get:m},file:{get:h},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:q=>$u(q?a[q]:a),setMetadata:(q,F,j)=>{if(Ae(q)){const E=q;return Object.keys(E).forEach(S=>{L(S,E[S],F)}),q}return L(q,F,j),F},extend:(q,F)=>$[q]=F,abortLoad:T,retryLoad:d,requestProcessing:A,abortProcessing:_,load:g,process:y,revert:v,...Qs(),freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived},setFile:q=>s.file=q},$=Wt(G);return $},N0=(t,e)=>xt(e)?0:Pe(e)?t.findIndex(n=>n.id===e):-1,Bo=(t,e)=>{const n=N0(t,e);if(!(n<0))return t[n]||null},Go=(t,e,n,r,s,i)=>{const a=ln(null,t,{method:"GET",responseType:"blob"});return a.onload=l=>{const o=l.getAllResponseHeaders(),u=fl(o).name||$r(t);e(ge("load",l.status,Zn(l.response,u),o))},a.onerror=l=>{n(ge("error",l.status,l.statusText,l.getAllResponseHeaders()))},a.onheaders=l=>{i(ge("headers",l.status,null,l.getAllResponseHeaders()))},a.ontimeout=on(n),a.onprogress=r,a.onabort=s,a},Uo=t=>(t.indexOf("//")===0&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),L0=t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Uo(location.href)!==Uo(t),_s=t=>(...e)=>sn(t)?t(...e):t,C0=t=>!cn(t.file),sa=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout(()=>{t("DID_UPDATE_ITEMS",{items:ot(e.items)})},0)},ko=(t,...e)=>new Promise(n=>{if(!t)return n(!0);const r=t(...e);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),ia=(t,e)=>{t.items.sort((n,r)=>e(Ue(n),Ue(r)))},We=(t,e)=>({query:n,success:r=()=>{},failure:s=()=>{},...i}={})=>{const a=an(t.items,n);if(!a){s({error:ge("error",0,"Item not found"),file:null});return}e(a,r,s,i||{})},D0=(t,e,n)=>({ABORT_ALL:()=>{ot(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const s=r.map(a=>({source:a.source?a.source:a,options:a.options}));let i=ot(n.items);i.forEach(a=>{s.find(l=>l.source===a.source||l.source===a.file)||t("REMOVE_ITEM",{query:a,remove:!1})}),i=ot(n.items),s.forEach((a,l)=>{i.find(o=>o.source===a.source||o.file===a.source)||t("ADD_ITEM",{...a,interactionMethod:et.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:r,action:s,change:i})=>{i.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const a=Bo(n.items,r);if(!e("IS_ASYNC")){it("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:e,action:s,change:i}).then(f=>{const m=e("GET_BEFORE_PREPARE_FILE");m&&(f=m(a,f)),f&&t("REQUEST_PREPARE_OUTPUT",{query:r,item:a,success:h=>{t("DID_PREPARE_OUTPUT",{id:r,file:h})}},!0)});return}a.origin===Ie.LOCAL&&t("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const l=()=>{setTimeout(()=>{t("REQUEST_ITEM_PROCESSING",{query:r})},32)},o=f=>{a.revert(Tr(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(f?l:()=>{}).catch(()=>{})},u=f=>{a.abortProcessing().then(f?l:()=>{})};if(a.status===te.PROCESSING_COMPLETE)return o(n.options.instantUpload);if(a.status===te.PROCESSING)return u(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:s})=>{const i=an(n.items,r);if(!i)return;const a=n.items.indexOf(i);s=qu(s,0,n.items.length-1),a!==s&&n.items.splice(s,0,n.items.splice(a,1)[0])},SORT:({compare:r})=>{ia(n,r),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:s,interactionMethod:i,success:a=()=>{},failure:l=()=>{}})=>{let o=s;if(s===-1||typeof s>"u"){const g=e("GET_ITEM_INSERT_LOCATION"),d=e("GET_TOTAL_ITEMS");o=g==="before"?0:d}const u=e("GET_IGNORED_FILES"),f=g=>cn(g)?!u.includes(g.name.toLowerCase()):!xt(g),h=r.filter(f).map(g=>new Promise((d,T)=>{t("ADD_ITEM",{interactionMethod:i,source:g.source||g,success:d,failure:T,index:o++,options:g.options||{}})}));Promise.all(h).then(a).catch(l)},ADD_ITEM:({source:r,index:s=-1,interactionMethod:i,success:a=()=>{},failure:l=()=>{},options:o={}})=>{if(xt(r)){l({error:ge("error",0,"No source"),file:null});return}if(cn(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!o0(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const _=ge("warning",0,"Max files");t("DID_THROW_MAX_FILES",{source:r,error:_}),l({error:_,file:null});return}const A=ot(n.items)[0];if(A.status===te.PROCESSING_COMPLETE||A.status===te.PROCESSING_REVERT_ERROR){const _=e("GET_FORCE_REVERT");if(A.revert(Tr(n.options.server.url,n.options.server.revert),_).then(()=>{_&&t("ADD_ITEM",{source:r,index:s,interactionMethod:i,success:a,failure:l,options:o})}).catch(()=>{}),_)return}t("REMOVE_ITEM",{query:A.id})}const u=o.type==="local"?Ie.LOCAL:o.type==="limbo"?Ie.LIMBO:Ie.INPUT,f=S0(u,u===Ie.INPUT?null:r,o.file);Object.keys(o.metadata||{}).forEach(A=>{f.setMetadata(A,o.metadata[A])}),yn("DID_CREATE_ITEM",f,{query:e,dispatch:t});const m=e("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=m==="before"?-1:n.items.length),u0(n.items,f,s),sn(m)&&r&&ia(n,m);const h=f.id;f.on("init",()=>{t("DID_INIT_ITEM",{id:h})}),f.on("load-init",()=>{t("DID_START_ITEM_LOAD",{id:h})}),f.on("load-meta",()=>{t("DID_UPDATE_ITEM_META",{id:h})}),f.on("load-progress",A=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:h,progress:A})}),f.on("load-request-error",A=>{const _=_s(n.options.labelFileLoadError)(A);if(A.code>=400&&A.code<500){t("DID_THROW_ITEM_INVALID",{id:h,error:A,status:{main:_,sub:`${A.code} (${A.body})`}}),l({error:A,file:Ue(f)});return}t("DID_THROW_ITEM_LOAD_ERROR",{id:h,error:A,status:{main:_,sub:n.options.labelTapToRetry}})}),f.on("load-file-error",A=>{t("DID_THROW_ITEM_INVALID",{id:h,error:A.status,status:A.status}),l({error:A.status,file:Ue(f)})}),f.on("load-abort",()=>{t("REMOVE_ITEM",{query:h})}),f.on("load-skip",()=>{f.on("metadata-update",A=>{cn(f.file)&&t("DID_UPDATE_ITEM_METADATA",{id:h,change:A})}),t("COMPLETE_LOAD_ITEM",{query:h,item:f,data:{source:r,success:a}})}),f.on("load",()=>{const A=_=>{if(!_){t("REMOVE_ITEM",{query:h});return}f.on("metadata-update",v=>{t("DID_UPDATE_ITEM_METADATA",{id:h,change:v})}),it("SHOULD_PREPARE_OUTPUT",!1,{item:f,query:e}).then(v=>{const L=e("GET_BEFORE_PREPARE_FILE");L&&(v=L(f,v));const N=()=>{t("COMPLETE_LOAD_ITEM",{query:h,item:f,data:{source:r,success:a}}),sa(t,n)};if(v){t("REQUEST_PREPARE_OUTPUT",{query:h,item:f,success:G=>{t("DID_PREPARE_OUTPUT",{id:h,file:G}),N()}},!0);return}N()})};it("DID_LOAD_ITEM",f,{query:e,dispatch:t}).then(()=>{ko(e("GET_BEFORE_ADD_FILE"),Ue(f)).then(A)}).catch(_=>{if(!_||!_.error||!_.status)return A(!1);t("DID_THROW_ITEM_INVALID",{id:h,error:_.error,status:_.status})})}),f.on("process-start",()=>{t("DID_START_ITEM_PROCESSING",{id:h})}),f.on("process-progress",A=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:h,progress:A})}),f.on("process-error",A=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:h,error:A,status:{main:_s(n.options.labelFileProcessingError)(A),sub:n.options.labelTapToRetry}})}),f.on("process-revert-error",A=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:h,error:A,status:{main:_s(n.options.labelFileProcessingRevertError)(A),sub:n.options.labelTapToRetry}})}),f.on("process-complete",A=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:h,error:null,serverFileReference:A}),t("DID_DEFINE_VALUE",{id:h,value:A})}),f.on("process-abort",()=>{t("DID_ABORT_ITEM_PROCESSING",{id:h})}),f.on("process-revert",()=>{t("DID_REVERT_ITEM_PROCESSING",{id:h}),t("DID_DEFINE_VALUE",{id:h,value:null})}),t("DID_ADD_ITEM",{id:h,index:s,interactionMethod:i}),sa(t,n);const{url:g,load:d,restore:T,fetch:y}=n.options.server||{};f.load(r,b0(u===Ie.INPUT?Pe(r)&&L0(r)&&y?ra(g,y):Go:u===Ie.LIMBO?ra(g,T):ra(g,d)),(A,_,v)=>{it("LOAD_FILE",A,{query:e}).then(_).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:r,success:s,failure:i=()=>{}})=>{const a={error:ge("error",0,"Item not found"),file:null};if(r.archived)return i(a);it("PREPARE_OUTPUT",r.file,{query:e,item:r}).then(l=>{it("COMPLETE_PREPARE_OUTPUT",l,{query:e,item:r}).then(o=>{if(r.archived)return i(a);s(o)})})},COMPLETE_LOAD_ITEM:({item:r,data:s})=>{const{success:i,source:a}=s,l=e("GET_ITEM_INSERT_LOCATION");if(sn(l)&&a&&ia(n,l),t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Ie.INPUT?null:a}),i(Ue(r)),r.origin===Ie.LOCAL){t("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Ie.LIMBO){t("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:a}),t("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||a});return}e("IS_ASYNC")&&n.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:We(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:We(n,(r,s,i)=>{t("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:a=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:a}),s({file:r,output:a})},failure:i},!0)}),REQUEST_ITEM_PROCESSING:We(n,(r,s,i)=>{if(!(r.status===te.IDLE||r.status===te.PROCESSING_ERROR)){const l=()=>t("REQUEST_ITEM_PROCESSING",{query:r,success:s,failure:i}),o=()=>document.hidden?l():setTimeout(l,32);r.status===te.PROCESSING_COMPLETE||r.status===te.PROCESSING_REVERT_ERROR?r.revert(Tr(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(o).catch(()=>{}):r.status===te.PROCESSING&&r.abortProcessing().then(o);return}r.status!==te.PROCESSING_QUEUED&&(r.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),t("PROCESS_ITEM",{query:r,success:s,failure:i},!0))}),PROCESS_ITEM:We(n,(r,s,i)=>{const a=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",te.PROCESSING).length===a){n.processingQueue.push({id:r.id,success:s,failure:i});return}if(r.status===te.PROCESSING)return;const o=()=>{const f=n.processingQueue.shift();if(!f)return;const{id:m,success:h,failure:g}=f,d=an(n.items,m);if(!d||d.archived){o();return}t("PROCESS_ITEM",{query:m,success:h,failure:g},!0)};r.onOnce("process-complete",()=>{s(Ue(r)),o();const f=n.options.server;if(n.options.instantUpload&&r.origin===Ie.LOCAL&&sn(f.remove)){const g=()=>{};r.origin=Ie.LIMBO,n.options.server.remove(r.source,g,g)}e("GET_ITEMS_BY_STATUS",te.PROCESSING_COMPLETE).length===n.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",f=>{i({error:f,file:Ue(r)}),o()});const u=n.options;r.process(O0(v0(u.server.url,u.server.process,u.name,{chunkTransferId:r.transferId,chunkServer:u.server.patch,chunkUploads:u.chunkUploads,chunkForce:u.chunkForce,chunkSize:u.chunkSize,chunkRetryDelays:u.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(f,m,h)=>{it("PREPARE_OUTPUT",f,{query:e,item:r}).then(g=>{t("DID_PREPARE_OUTPUT",{id:r.id,file:g}),m(g)}).catch(h)})}),RETRY_ITEM_PROCESSING:We(n,r=>{t("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:We(n,r=>{ko(e("GET_BEFORE_REMOVE_FILE"),Ue(r)).then(s=>{s&&t("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:We(n,r=>{r.release()}),REMOVE_ITEM:We(n,(r,s,i,a)=>{const l=()=>{const u=r.id;Bo(n.items,u).archive(),t("DID_REMOVE_ITEM",{error:null,id:u,item:r}),sa(t,n),s(Ue(r))},o=n.options.server;r.origin===Ie.LOCAL&&o&&sn(o.remove)&&a.remove!==!1?(t("DID_START_ITEM_REMOVE",{id:r.id}),o.remove(r.source,()=>l(),u=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:ge("error",0,u,null),status:{main:_s(n.options.labelFileRemoveError)(u),sub:n.options.labelTapToRetry}})})):((a.revert&&r.origin!==Ie.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Tr(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:We(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:We(n,r=>{if(r.serverId){t("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&t("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:We(n,r=>{if(!n.options.instantUpload){t("REVERT_ITEM_PROCESSING",{query:r});return}const s=l=>{l&&t("REVERT_ITEM_PROCESSING",{query:r})},i=e("GET_BEFORE_REMOVE_FILE");if(!i)return s(!0);const a=i(Ue(r));if(a==null)return s(!0);if(typeof a=="boolean")return s(a);typeof a.then=="function"&&a.then(s)}),REVERT_ITEM_PROCESSING:We(n,r=>{r.revert(Tr(n.options.server.url,n.options.server.revert),e("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||C0(r))&&t("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const s=Object.keys(r),i=M0.filter(l=>s.includes(l));[...i,...Object.keys(r).filter(l=>!i.includes(l))].forEach(l=>{t(`SET_${Zs(l,"_").toUpperCase()}`,{value:r[l]})})}}),M0=["server"],hl=t=>t,Pt=t=>document.createElement(t),me=(t,e)=>{let n=t.childNodes[0];n?e!==n.nodeValue&&(n.nodeValue=e):(n=document.createTextNode(e),t.appendChild(n))},Fo=(t,e,n,r)=>{const s=(r%360-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}},x0=(t,e,n,r,s,i)=>{const a=Fo(t,e,n,s),l=Fo(t,e,n,r);return["M",a.x,a.y,"A",n,n,0,i,0,l.x,l.y].join(" ")},P0=(t,e,n,r,s)=>{let i=1;return s>r&&s-r<=.5&&(i=0),r>s&&r-s>=.5&&(i=0),x0(t,e,n,Math.min(.9999,r)*360,Math.min(.9999,s)*360,i)},q0=({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const n=Bs("svg");t.ref.path=Bs("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(t.ref.path),t.ref.svg=n,t.appendChild(n)},B0=({root:t,props:e})=>{if(e.opacity===0)return;e.align&&(t.element.dataset.align=e.align);const n=parseInt(be(t.ref.path,"stroke-width"),10),r=t.rect.element.width*.5;let s=0,i=0;e.spin?(s=0,i=.5):(s=0,i=e.progress);const a=P0(r,r,r-n,s,i);be(t.ref.path,"d",a),be(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},$o=_e({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:q0,write:B0,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),G0=({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},U0=({root:t,props:e})=>{const{isDisabled:n}=e,r=t.query("GET_DISABLED")||e.opacity===0;r&&!n?(e.isDisabled=!0,be(t.element,"disabled","disabled")):!r&&n&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))},Vu=_e({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:G0,write:U0}),Hu=(t,e=".",n=1e3,r={})=>{const{labelBytes:s="bytes",labelKilobytes:i="KB",labelMegabytes:a="MB",labelGigabytes:l="GB"}=r;t=Math.round(Math.abs(t));const o=n,u=n*n,f=n*n*n;return t<o?`${t} ${s}`:t<u?`${Math.floor(t/o)} ${i}`:t<f?`${Vo(t/u,1,e)} ${a}`:`${Vo(t/f,2,e)} ${l}`},Vo=(t,e,n)=>t.toFixed(e).split(".").filter(r=>r!=="0").join(n),k0=({root:t,props:e})=>{const n=Pt("span");n.className="filepond--file-info-main",be(n,"aria-hidden","true"),t.appendChild(n),t.ref.fileName=n;const r=Pt("span");r.className="filepond--file-info-sub",t.appendChild(r),t.ref.fileSize=r,me(r,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),me(n,hl(t.query("GET_ITEM_NAME",e.id)))},Pa=({root:t,props:e})=>{me(t.ref.fileSize,Hu(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),me(t.ref.fileName,hl(t.query("GET_ITEM_NAME",e.id)))},Ho=({root:t,props:e})=>{if(Jn(t.query("GET_ITEM_SIZE",e.id))){Pa({root:t,props:e});return}me(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},F0=_e({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:Pa,DID_UPDATE_ITEM_META:Pa,DID_THROW_ITEM_LOAD_ERROR:Ho,DID_THROW_ITEM_INVALID:Ho}),didCreateView:t=>{yn("CREATE_VIEW",{...t,view:t})},create:k0,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ju=t=>Math.round(t*100),$0=({root:t})=>{const e=Pt("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const n=Pt("span");n.className="filepond--file-status-sub",t.appendChild(n),t.ref.sub=n,zu({root:t,action:{progress:null}})},zu=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${ju(e.progress)}%`;me(t.ref.main,n),me(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},V0=({root:t,action:e})=>{const n=e.progress===null?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${ju(e.progress)}%`;me(t.ref.main,n),me(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},H0=({root:t})=>{me(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),me(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},j0=({root:t})=>{me(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),me(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},z0=({root:t})=>{me(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),me(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},jo=({root:t})=>{me(t.ref.main,""),me(t.ref.sub,"")},_r=({root:t,action:e})=>{me(t.ref.main,e.status.main),me(t.ref.sub,e.status.sub)},W0=_e({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:jo,DID_REVERT_ITEM_PROCESSING:jo,DID_REQUEST_ITEM_PROCESSING:H0,DID_ABORT_ITEM_PROCESSING:j0,DID_COMPLETE_ITEM_PROCESSING:z0,DID_UPDATE_ITEM_PROCESS_PROGRESS:V0,DID_UPDATE_ITEM_LOAD_PROGRESS:zu,DID_THROW_ITEM_LOAD_ERROR:_r,DID_THROW_ITEM_INVALID:_r,DID_THROW_ITEM_PROCESSING_ERROR:_r,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:_r,DID_THROW_ITEM_REMOVE_ERROR:_r}),didCreateView:t=>{yn("CREATE_VIEW",{...t,view:t})},create:$0,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),qa={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Ba=[];pe(qa,t=>{Ba.push(t)});const Fe=t=>{if(Ga(t)==="right")return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},Y0=t=>t.ref.buttonAbortItemLoad.rect.element.width,ys=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),X0=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),K0=t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Z0=t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Ga=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Q0={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:K0},processProgressIndicator:{opacity:0,align:Z0},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},zo={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Fe},status:{translateX:Fe}},aa={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},kn={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Fe},status:{translateX:Fe,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Fe},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Ga},info:{translateX:Fe},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Ga},buttonRemoveItem:{opacity:1},info:{translateX:Fe},status:{opacity:1,translateX:Fe}},DID_LOAD_ITEM:zo,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Fe},status:{translateX:Fe}},DID_START_ITEM_PROCESSING:aa,DID_REQUEST_ITEM_PROCESSING:aa,DID_UPDATE_ITEM_PROCESS_PROGRESS:aa,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Fe}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Fe},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:zo},J0=_e({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),eT=({root:t,props:e})=>{const n=Object.keys(qa).reduce((d,T)=>(d[T]={...qa[T]},d),{}),{id:r}=e,s=t.query("GET_ALLOW_REVERT"),i=t.query("GET_ALLOW_REMOVE"),a=t.query("GET_ALLOW_PROCESS"),l=t.query("GET_INSTANT_UPLOAD"),o=t.query("IS_ASYNC"),u=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let f;o?a&&!s?f=d=>!/RevertItemProcessing/.test(d):!a&&s?f=d=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(d):!a&&!s&&(f=d=>!/Process/.test(d)):f=d=>!/Process/.test(d);const m=f?Ba.filter(f):Ba.concat();if(l&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),o&&!s){const d=kn.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=X0,d.info.translateY=ys,d.status.translateY=ys,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(o&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(d=>{kn[d].status.translateY=ys}),kn.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Y0),u&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const d=kn.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=Fe,d.status.translateY=ys,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i||(n.RemoveItem.disabled=!0),pe(n,(d,T)=>{const y=t.createChildView(Vu,{label:t.query(T.label),icon:t.query(T.icon),opacity:0});m.includes(d)&&t.appendChildView(y),T.disabled&&(y.element.setAttribute("disabled","disabled"),y.element.setAttribute("hidden","hidden")),y.element.dataset.align=t.query(`GET_STYLE_${T.align}`),y.element.classList.add(T.className),y.on("click",A=>{A.stopPropagation(),!T.disabled&&t.dispatch(T.action,{query:r})}),t.ref[`button${d}`]=y}),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(J0)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(F0,{id:r})),t.ref.status=t.appendChildView(t.createChildView(W0,{id:r}));const h=t.appendChildView(t.createChildView($o,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));h.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=h;const g=t.appendChildView(t.createChildView($o,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));g.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=g,t.ref.activeStyles=[]},tT=({root:t,actions:e,props:n})=>{nT({root:t,actions:e,props:n});let r=e.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>kn[s.type]);if(r){t.ref.activeStyles=[];const s=kn[r.type];pe(Q0,(i,a)=>{const l=t.ref[i];pe(a,(o,u)=>{const f=s[i]&&typeof s[i][o]<"u"?s[i][o]:u;t.ref.activeStyles.push({control:l,key:o,value:f})})})}t.ref.activeStyles.forEach(({control:s,key:i,value:a})=>{s[i]=typeof a=="function"?a(t):a})},nT=qe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),rT=_e({create:eT,write:tT,didCreateView:t=>{yn("CREATE_VIEW",{...t,view:t})},name:"file"}),sT=({root:t,props:e})=>{t.ref.fileName=Pt("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(rT,{id:e.id})),t.ref.data=!1},iT=({root:t,props:e})=>{me(t.ref.fileName,hl(t.query("GET_ITEM_NAME",e.id)))},aT=_e({create:sT,ignoreRect:!0,write:qe({DID_LOAD_ITEM:iT}),didCreateView:t=>{yn("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),Wo={type:"spring",damping:.6,mass:7},lT=({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Wo},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Wo},styles:["translateY"]}}].forEach(n=>{oT(t,n,e.name)}),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},oT=(t,e,n)=>{const r=_e({name:`panel-${e.name} filepond--${n}`,mixins:e.mixins,ignoreRectUpdate:!0}),s=t.createChildView(r,e.props);t.ref[e.name]=t.appendChildView(s)},cT=({root:t,props:e})=>{if((t.ref.scalable===null||e.scalable!==t.ref.scalable)&&(t.ref.scalable=Su(e.scalable)?e.scalable:!0,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const n=t.ref.top.rect.element,r=t.ref.bottom.rect.element,s=Math.max(n.height+r.height,e.height);t.ref.center.translateY=n.height,t.ref.center.scaleY=(s-n.height-r.height)/100,t.ref.bottom.translateY=s-r.height},Wu=_e({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:cT,create:lT,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),uT=t=>{const e=t.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>e.indexOf(r.id)}},Yo={type:"spring",stiffness:.75,damping:.45,mass:10},Xo="spring",Ko={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},fT=({root:t,props:e})=>{if(t.ref.handleClick=r=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(aT,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(Wu,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let s=!1;const i={x:r.pageX,y:r.pageY};e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:r.offsetX,y:r.offsetY};const a=uT(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:a});const l=m=>{if(!m.isPrimary)return;m.stopPropagation(),m.preventDefault(),e.dragOffset={x:m.pageX-i.x,y:m.pageY-i.y},e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:a})},o=m=>{m.isPrimary&&(e.dragOffset={x:m.pageX-i.x,y:m.pageY-i.y},f())},u=()=>{f()},f=()=>{document.removeEventListener("pointercancel",u),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",o),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:a}),s&&setTimeout(()=>t.element.addEventListener("click",t.ref.handleClick),0)};document.addEventListener("pointercancel",u),document.addEventListener("pointermove",l),document.addEventListener("pointerup",o)};t.element.addEventListener("pointerdown",n)},hT=qe({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),dT=qe({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},({root:t,actions:e,props:n,shouldOptimize:r})=>{t.element.dataset.dragState==="drop"&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let s=e.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>Ko[a.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,t.element.dataset.filepondItemState=Ko[n.currentState]||"");const i=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");i?r||(t.height=t.rect.element.width*i):(hT({root:t,actions:e,props:n}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),r&&(t.ref.panel.height=null),t.ref.panel.height=t.height}),pT=_e({create:fT,write:dT,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Xo,scaleY:Xo,translateX:Yo,translateY:Yo,opacity:{type:"tween",duration:150}}}});var dl=(t,e)=>Math.max(1,Math.floor((t+1)/e));const pl=(t,e,n)=>{if(!n)return;const r=t.rect.element.width,s=e.length;let i=null;if(s===0||n.top<e[0].rect.element.top)return-1;const l=e[0].rect.element,o=l.marginLeft+l.marginRight,u=l.width+o,f=dl(r,u);if(f===1){for(let g=0;g<s;g++){const d=e[g],T=d.rect.outer.top+d.rect.element.height*.5;if(n.top<T)return g}return s}const m=l.marginTop+l.marginBottom,h=l.height+m;for(let g=0;g<s;g++){const d=g%f,T=Math.floor(g/f),y=d*u,A=T*h,_=A-l.marginTop,v=y+u,L=A+h+l.marginBottom;if(n.top<L&&n.top>_){if(n.left<v)return g;g!==s-1?i=g:i=null}}return i!==null?i:s},bs={height:0,width:0,get getHeight(){return this.height},set setHeight(t){(this.height===0||t===0)&&(this.height=t)},get getWidth(){return this.width},set setWidth(t){(this.width===0||t===0)&&(this.width=t)}},gT=({root:t})=>{be(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},mT=({root:t,action:e})=>{const{id:n,index:r,interactionMethod:s}=e;t.ref.addIndex=r;const i=Date.now();let a=i,l=1;if(s!==et.NONE){l=0;const o=t.query("GET_ITEM_INSERT_INTERVAL"),u=i-t.ref.lastItemSpanwDate;a=u<o?i+(o-u):i}t.ref.lastItemSpanwDate=a,t.appendChildView(t.createChildView(pT,{spawnDate:a,id:n,opacity:l,interactionMethod:s}),r)},Zo=(t,e,n,r=0,s=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=n,Date.now()>t.spawnDate&&(t.opacity===0&&ET(t,e,n,r,s),t.scaleX=1,t.scaleY=1,t.opacity=1))},ET=(t,e,n,r,s)=>{t.interactionMethod===et.NONE?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=n):t.interactionMethod===et.DROP?(t.translateX=null,t.translateX=e-r*20,t.translateY=null,t.translateY=n-s*10,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===et.BROWSE?(t.translateY=null,t.translateY=n-30):t.interactionMethod===et.API&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},TT=({root:t,action:e})=>{const{id:n}=e,r=t.childViews.find(s=>s.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},la=t=>t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5,_T=t=>t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5,yT=({root:t,action:e})=>{const{id:n,dragState:r}=e,s=t.query("GET_ITEM",{id:n}),i=t.childViews.find(y=>y.id===n),a=t.childViews.length,l=r.getItemIndex(s);if(!i)return;const o={x:i.dragOrigin.x+i.dragOffset.x+i.dragCenter.x,y:i.dragOrigin.y+i.dragOffset.y+i.dragCenter.y},u=la(i),f=_T(i);let m=Math.floor(t.rect.outer.width/f);m>a&&(m=a);const h=Math.floor(a/m+1);bs.setHeight=u*h,bs.setWidth=f*m;var g={y:Math.floor(o.y/u),x:Math.floor(o.x/f),getGridIndex:function(){return o.y>bs.getHeight||o.y<0||o.x>bs.getWidth||o.x<0?l:this.y*m+this.x},getColIndex:function(){const A=t.query("GET_ACTIVE_ITEMS"),_=t.childViews.filter(E=>E.rect.element.height),v=A.map(E=>_.find(S=>S.id===E.id)),L=v.findIndex(E=>E===i),N=la(i),G=v.length;let $=G,q=0,F=0,j=0;for(let E=0;E<G;E++)if(q=la(v[E]),j=F,F=j+q,o.y<F){if(L>E){if(o.y<j+N){$=E;break}continue}$=E;break}return $}};const d=m>1?g.getGridIndex():g.getColIndex();t.dispatch("MOVE_ITEM",{query:i,index:d});const T=r.getIndex();if(T===void 0||T!==d){if(r.setIndex(d),T===void 0)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:l,target:d})}},bT=qe({DID_ADD_ITEM:mT,DID_REMOVE_ITEM:TT,DID_DRAG_ITEM:yT}),IT=({root:t,props:e,actions:n,shouldOptimize:r})=>{bT({root:t,props:e,actions:n});const{dragCoordinates:s}=e,i=t.rect.element.width,a=t.childViews.filter(v=>v.rect.element.height),l=t.query("GET_ACTIVE_ITEMS").map(v=>a.find(L=>L.id===v.id)).filter(v=>v),o=s?pl(t,l,s):null,u=t.ref.addIndex||null;t.ref.addIndex=null;let f=0,m=0,h=0;if(l.length===0)return;const g=l[0].rect.element,d=g.marginTop+g.marginBottom,T=g.marginLeft+g.marginRight,y=g.width+T,A=g.height+d,_=dl(i,y);if(_===1){let v=0,L=0;l.forEach((N,G)=>{if(o){let F=G-o;F===-2?L=-d*.25:F===-1?L=-d*.75:F===0?L=d*.75:F===1?L=d*.25:L=0}r&&(N.translateX=null,N.translateY=null),N.markedForRemoval||Zo(N,0,v+L);let q=(N.rect.element.height+d)*(N.markedForRemoval?N.opacity:1);v+=q})}else{let v=0,L=0;l.forEach((N,G)=>{G===o&&(f=1),G===u&&(h+=1),N.markedForRemoval&&N.opacity<.5&&(m-=1);const $=G+h+f+m,q=$%_,F=Math.floor($/_),j=q*y,E=F*A,S=Math.sign(j-v),R=Math.sign(E-L);v=j,L=E,!N.markedForRemoval&&(r&&(N.translateX=null,N.translateY=null),Zo(N,j,E,S,R))})}},AT=(t,e)=>e.filter(n=>n.data&&n.data.id?t.id===n.data.id:!0),vT=_e({create:gT,write:IT,tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter(e=>e.markedForRemoval&&e.opacity===0&&e.resting).forEach(e=>{e._destroy(),t.removeChildView(e)})},filterFrameActionsForChild:AT,mixins:{apis:["dragCoordinates"]}}),RT=({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(vT)),e.dragCoordinates=null,e.overflowing=!1},OT=({root:t,props:e,action:n})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:n.position.scopeLeft-t.ref.list.rect.element.left,top:n.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},wT=({props:t})=>{t.dragCoordinates=null},ST=qe({DID_DRAG:OT,DID_END_DRAG:wT}),NT=({root:t,props:e,actions:n})=>{if(ST({root:t,props:e,actions:n}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const r=Math.round(e.overflow);r!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=r)}},LT=_e({create:RT,write:NT,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),ct=(t,e,n,r="")=>{n?be(t,e,r):t.removeAttribute(e)},CT=t=>{if(!(!t||t.value==="")){try{t.value=""}catch{}if(t.value){const e=Pt("form"),n=t.parentNode,r=t.nextSibling;e.appendChild(t),e.reset(),r?n.insertBefore(t,r):n.appendChild(t)}}},DT=({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,be(t.element,"name",t.query("GET_NAME")),be(t.element,"aria-controls",`filepond--assistant-${e.id}`),be(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),Yu({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),Xu({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Ku({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Ua({root:t}),Zu({root:t,action:{value:t.query("GET_REQUIRED")}}),Qu({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=n=>{if(!t.element.value)return;const r=Array.from(t.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{e.onload(r),CT(t.element)},250)},t.element.addEventListener("change",t.ref.handleChange)},Yu=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&ct(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},Xu=({root:t,action:e})=>{ct(t.element,"multiple",e.value)},Ku=({root:t,action:e})=>{ct(t.element,"webkitdirectory",e.value)},Ua=({root:t})=>{const e=t.query("GET_DISABLED"),n=t.query("GET_ALLOW_BROWSE"),r=e||!n;ct(t.element,"disabled",r)},Zu=({root:t,action:e})=>{e.value?t.query("GET_TOTAL_ITEMS")===0&&ct(t.element,"required",!0):ct(t.element,"required",!1)},Qu=({root:t,action:e})=>{ct(t.element,"capture",!!e.value,e.value===!0?"":e.value)},Qo=({root:t})=>{const{element:e}=t;if(t.query("GET_TOTAL_ITEMS")>0){ct(e,"required",!1),ct(e,"name",!1);const n=t.query("GET_ACTIVE_ITEMS");let r=!1;for(let s=0;s<n.length;s++)n[s].status===te.LOAD_ERROR&&(r=!0);t.element.setCustomValidity(r?t.query("GET_LABEL_INVALID_FIELD"):"")}else ct(e,"name",!0,t.query("GET_NAME")),t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&ct(e,"required",!0)},MT=({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},xT=_e({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:DT,destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:qe({DID_LOAD_ITEM:Qo,DID_REMOVE_ITEM:Qo,DID_THROW_ITEM_INVALID:MT,DID_SET_DISABLED:Ua,DID_SET_ALLOW_BROWSE:Ua,DID_SET_ALLOW_DIRECTORIES_ONLY:Ku,DID_SET_ALLOW_MULTIPLE:Xu,DID_SET_ACCEPTED_FILE_TYPES:Yu,DID_SET_CAPTURE_METHOD:Qu,DID_SET_REQUIRED:Zu})}),Jo={ENTER:13,SPACE:32},PT=({root:t,props:e})=>{const n=Pt("label");be(n,"for",`filepond--browser-${e.id}`),be(n,"id",`filepond--drop-label-${e.id}`),t.ref.handleKeyDown=r=>{(r.keyCode===Jo.ENTER||r.keyCode===Jo.SPACE)&&(r.preventDefault(),t.ref.label.click())},t.ref.handleClick=r=>{r.target===n||n.contains(r.target)||t.ref.label.click()},n.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Ju(n,e.caption),t.appendChild(n),t.ref.label=n},Ju=(t,e)=>{t.innerHTML=e;const n=t.querySelector(".filepond--label-action");return n&&be(n,"tabindex","0"),e},qT=_e({name:"drop-label",ignoreRect:!0,create:PT,destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:qe({DID_SET_LABEL_IDLE:({root:t,action:e})=>{Ju(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),BT=_e({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),GT=({root:t})=>{const e=t.rect.element.width*.5,n=t.rect.element.height*.5;t.ref.blob=t.appendChildView(t.createChildView(BT,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:n}))},UT=({root:t,action:e})=>{if(!t.ref.blob){GT({root:t});return}t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1},kT=({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)},FT=({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},$T=({root:t,props:e,actions:n})=>{VT({root:t,props:e,actions:n});const{blob:r}=t.ref;n.length===0&&r&&r.opacity===0&&(t.removeChildView(r),t.ref.blob=null)},VT=qe({DID_DRAG:UT,DID_DROP:FT,DID_END_DRAG:kT}),HT=_e({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:$T}),ef=(t,e)=>{try{const n=new DataTransfer;e.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),t.files=n.files}catch{return!1}return!0},jT=({root:t})=>{t.ref.fields={};const e=document.createElement("legend");e.textContent="Files",t.element.appendChild(e)},ei=(t,e)=>t.ref.fields[e],gl=t=>{t.query("GET_ACTIVE_ITEMS").forEach(e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])})},ec=({root:t})=>gl(t),zT=({root:t,action:e})=>{const s=!(t.query("GET_ITEM",e.id).origin===Ie.LOCAL)&&t.query("SHOULD_UPDATE_FILE_INPUT"),i=Pt("input");i.type=s?"file":"hidden",i.name=t.query("GET_NAME"),t.ref.fields[e.id]=i,gl(t)},WT=({root:t,action:e})=>{const n=ei(t,e.id);if(!n||(e.serverFileReference!==null&&(n.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=t.query("GET_ITEM",e.id);ef(n,[r.file])},YT=({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=ei(t,e.id);n&&ef(n,[e.file])},0)},XT=({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},KT=({root:t,action:e})=>{const n=ei(t,e.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete t.ref.fields[e.id])},ZT=({root:t,action:e})=>{const n=ei(t,e.id);n&&(e.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=e.value),gl(t))},QT=qe({DID_SET_DISABLED:XT,DID_ADD_ITEM:zT,DID_LOAD_ITEM:WT,DID_REMOVE_ITEM:KT,DID_DEFINE_VALUE:ZT,DID_PREPARE_OUTPUT:YT,DID_REORDER_ITEMS:ec,DID_SORT_ITEMS:ec}),JT=_e({tag:"fieldset",name:"data",create:jT,write:QT,ignoreRect:!0}),e_=t=>"getRootNode"in t?t.getRootNode():document,t_=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],n_=["css","csv","html","txt"],r_={zip:"zip|compressed",epub:"application/epub+zip"},tf=(t="")=>(t=t.toLowerCase(),t_.includes(t)?"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t):n_.includes(t)?"text/"+t:r_[t]||""),ml=t=>new Promise((e,n)=>{const r=f_(t);if(r.length&&!s_(t))return e(r);i_(t).then(e)}),s_=t=>t.files?t.files.length>0:!1,i_=t=>new Promise((e,n)=>{const r=(t.items?Array.from(t.items):[]).filter(s=>a_(s)).map(s=>l_(s));if(!r.length){e(t.files?Array.from(t.files):[]);return}Promise.all(r).then(s=>{const i=[];s.forEach(a=>{i.push.apply(i,a)}),e(i.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),a_=t=>{if(nf(t)){const e=El(t);if(e)return e.isFile||e.isDirectory}return t.kind==="file"},l_=t=>new Promise((e,n)=>{if(u_(t)){o_(El(t)).then(e).catch(n);return}e([t.getAsFile()])}),o_=t=>new Promise((e,n)=>{const r=[];let s=0,i=0;const a=()=>{i===0&&s===0&&e(r)},l=o=>{s++;const u=o.createReader(),f=()=>{u.readEntries(m=>{if(m.length===0){s--,a();return}m.forEach(h=>{h.isDirectory?l(h):(i++,h.file(g=>{const d=c_(g);h.fullPath&&(d._relativePath=h.fullPath),r.push(d),i--,a()}))}),f()},n)};f()};l(t)}),c_=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,n=t.name,r=tf(Js(t.name));return r.length&&(t=t.slice(0,t.size,r),t.name=n,t.lastModifiedDate=e),t},u_=t=>nf(t)&&(El(t)||{}).isDirectory,nf=t=>"webkitGetAsEntry"in t,El=t=>t.webkitGetAsEntry(),f_=t=>{let e=[];try{if(e=d_(t),e.length)return e;e=h_(t)}catch{}return e},h_=t=>{let e=t.getData("url");return typeof e=="string"&&e.length?[e]:[]},d_=t=>{let e=t.getData("text/html");if(typeof e=="string"&&e.length){const n=e.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Us=[],un=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),p_=(t,e,n)=>{const r=g_(e),s={element:t,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=r.addListener(s),s},g_=t=>{const e=Us.find(r=>r.element===t);if(e)return e;const n=m_(t);return Us.push(n),n},m_=t=>{const e=[],n={dragenter:T_,dragover:__,dragleave:b_,drop:y_},r={};pe(n,(i,a)=>{r[i]=a(t,e),t.addEventListener(i,r[i],!1)});const s={element:t,addListener:i=>(e.push(i),()=>{e.splice(e.indexOf(i),1),e.length===0&&(Us.splice(Us.indexOf(s),1),pe(n,a=>{t.removeEventListener(a,r[a],!1)}))})};return s},E_=(t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)),Tl=(t,e)=>{const n=e_(e),r=E_(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return r===e||e.contains(r)};let rf=null;const Is=(t,e)=>{try{t.dropEffect=e}catch{}},T_=(t,e)=>n=>{n.preventDefault(),rf=n.target,e.forEach(r=>{const{element:s,onenter:i}=r;Tl(n,s)&&(r.state="enter",i(un(n)))})},__=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;ml(r).then(s=>{let i=!1;e.some(a=>{const{filterElement:l,element:o,onenter:u,onexit:f,ondrag:m,allowdrop:h}=a;Is(r,"copy");const g=h(s);if(!g){Is(r,"none");return}if(Tl(n,o)){if(i=!0,a.state===null){a.state="enter",u(un(n));return}if(a.state="over",l&&!g){Is(r,"none");return}m(un(n))}else l&&!i&&Is(r,"none"),a.state&&(a.state=null,f(un(n)))})})},y_=(t,e)=>n=>{n.preventDefault();const r=n.dataTransfer;ml(r).then(s=>{e.forEach(i=>{const{filterElement:a,element:l,ondrop:o,onexit:u,allowdrop:f}=i;if(i.state=null,!(a&&!Tl(n,l))){if(!f(s))return u(un(n));o(un(n),s)}})})},b_=(t,e)=>n=>{rf===n.target&&e.forEach(r=>{const{onexit:s}=r;r.state=null,s(un(n))})},I_=(t,e,n)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:s,filterItems:i=f=>f}=n,a=p_(t,r?document.documentElement:t,s);let l="",o="";a.allowdrop=f=>e(i(f)),a.ondrop=(f,m)=>{const h=i(m);if(!e(h)){u.ondragend(f);return}o="drag-drop",u.onload(h,f)},a.ondrag=f=>{u.ondrag(f)},a.onenter=f=>{o="drag-over",u.ondragstart(f)},a.onexit=f=>{o="drag-exit",u.ondragend(f)};const u={updateHopperState:()=>{l!==o&&(t.dataset.hopperState=o,l=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return u};let ka=!1;const jn=[],sf=t=>{const e=document.activeElement;if(e&&(/textarea|input/i.test(e.nodeName)||e.getAttribute("contenteditable")==="true"||e.getAttribute("contenteditable")==="")){let r=!1,s=e;for(;s!==document.body;){if(s.classList.contains("filepond--root")){r=!0;break}s=s.parentNode}if(!r)return}ml(t.clipboardData).then(r=>{r.length&&jn.forEach(s=>s(r))})},A_=t=>{jn.includes(t)||(jn.push(t),!ka&&(ka=!0,document.addEventListener("paste",sf)))},v_=t=>{cl(jn,jn.indexOf(t)),jn.length===0&&(document.removeEventListener("paste",sf),ka=!1)},R_=()=>{const t=n=>{e.onload(n)},e={destroy:()=>{v_(t)},onload:()=>{}};return A_(t),e},O_=({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,be(t.element,"role","alert"),be(t.element,"aria-live","polite"),be(t.element,"aria-relevant","additions")};let tc=null,nc=null;const oa=[],ti=(t,e)=>{t.element.textContent=e},w_=t=>{t.element.textContent=""},af=(t,e,n)=>{const r=t.query("GET_TOTAL_ITEMS");ti(t,`${n} ${e}, ${r} ${r===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(nc),nc=setTimeout(()=>{w_(t)},1500)},lf=t=>t.element.parentNode.contains(document.activeElement),S_=({root:t,action:e})=>{if(!lf(t))return;t.element.textContent="";const n=t.query("GET_ITEM",e.id);oa.push(n.filename),clearTimeout(tc),tc=setTimeout(()=>{af(t,oa.join(", "),t.query("GET_LABEL_FILE_ADDED")),oa.length=0},750)},N_=({root:t,action:e})=>{if(!lf(t))return;const n=e.item;af(t,n.filename,t.query("GET_LABEL_FILE_REMOVED"))},L_=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");ti(t,`${r} ${s}`)},rc=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");ti(t,`${r} ${s}`)},As=({root:t,action:e})=>{const r=t.query("GET_ITEM",e.id).filename;ti(t,`${e.status.main} ${r} ${e.status.sub}`)},C_=_e({create:O_,ignoreRect:!0,ignoreRectUpdate:!0,write:qe({DID_LOAD_ITEM:S_,DID_REMOVE_ITEM:N_,DID_COMPLETE_ITEM_PROCESSING:L_,DID_ABORT_ITEM_PROCESSING:rc,DID_REVERT_ITEM_PROCESSING:rc,DID_THROW_ITEM_REMOVE_ERROR:As,DID_THROW_ITEM_LOAD_ERROR:As,DID_THROW_ITEM_INVALID:As,DID_THROW_ITEM_PROCESSING_ERROR:As}),tag:"span",name:"assistant"}),of=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),n=>n.charAt(1).toUpperCase()),cf=(t,e=16,n=!0)=>{let r=Date.now(),s=null;return(...i)=>{clearTimeout(s);const a=Date.now()-r,l=()=>{r=Date.now(),t(...i)};a<e?n||(s=setTimeout(l,e-a)):l()}},D_=1e6,ks=t=>t.preventDefault(),M_=({root:t,props:e})=>{const n=t.query("GET_ID");n&&(t.element.id=n);const r=t.query("GET_CLASS_NAME");r&&r.split(" ").filter(o=>o.length).forEach(o=>{t.element.classList.add(o)}),t.ref.label=t.appendChildView(t.createChildView(qT,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(LT,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(Wu,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(C_,{...e})),t.ref.data=t.appendChildView(t.createChildView(JT,{...e})),t.ref.measure=Pt("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter(o=>!xt(o.value)).map(({name:o,value:u})=>{t.element.dataset[o]=u}),t.ref.widthPrevious=null,t.ref.widthUpdated=cf(()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")},250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,i="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&i&&!s&&(t.element.addEventListener("touchmove",ks,{passive:!1}),t.element.addEventListener("gesturestart",ks));const a=t.query("GET_CREDITS");if(a.length===2){const o=document.createElement("a");o.className="filepond--credits",o.href=a[0],o.tabIndex=-1,o.target="_blank",o.rel="noopener noreferrer nofollow",o.textContent=a[1],t.element.appendChild(o),t.ref.credits=o}},x_=({root:t,props:e,actions:n})=>{if(U_({root:t,props:e,actions:n}),n.filter(G=>/^DID_SET_STYLE_/.test(G.type)).filter(G=>!xt(G.data.value)).map(({type:G,data:$})=>{const q=of(G.substring(8).toLowerCase(),"_");t.element.dataset[q]=$.value,t.invalidateLayout()}),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let r=t.ref.bounds;r||(r=t.ref.bounds=B_(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:s,label:i,list:a,panel:l}=t.ref;s&&s.updateHopperState();const o=t.query("GET_PANEL_ASPECT_RATIO"),u=t.query("GET_ALLOW_MULTIPLE"),f=t.query("GET_TOTAL_ITEMS"),m=u?t.query("GET_MAX_FILES")||D_:1,h=f===m,g=n.find(G=>G.type==="DID_ADD_ITEM");if(h&&g){const G=g.data.interactionMethod;i.opacity=0,u?i.translateY=-40:G===et.API?i.translateX=40:G===et.BROWSE?i.translateY=40:i.translateY=30}else h||(i.opacity=1,i.translateX=0,i.translateY=0);const d=P_(t),T=q_(t),y=i.rect.element.height,A=!u||h?0:y,_=h?a.rect.element.marginTop:0,v=f===0?0:a.rect.element.marginBottom,L=A+_+T.visual+v,N=A+_+T.bounds+v;if(a.translateY=Math.max(0,A-a.rect.element.marginTop)-d.top,o){const G=t.rect.element.width,$=G*o;o!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=o,t.ref.updateHistory=[]);const q=t.ref.updateHistory;q.push(G);const F=2;if(q.length>F*2){const E=q.length,S=E-10;let R=0;for(let w=E;w>=S;w--)if(q[w]===q[w-2]&&R++,R>=F)return}l.scalable=!1,l.height=$;const j=$-A-(v-d.bottom)-(h?_:0);T.visual>j?a.overflow=j:a.overflow=null,t.height=$}else if(r.fixedHeight){l.scalable=!1;const G=r.fixedHeight-A-(v-d.bottom)-(h?_:0);T.visual>G?a.overflow=G:a.overflow=null}else if(r.cappedHeight){const G=L>=r.cappedHeight,$=Math.min(r.cappedHeight,L);l.scalable=!0,l.height=G?$:$-d.top-d.bottom;const q=$-A-(v-d.bottom)-(h?_:0);L>r.cappedHeight&&T.visual>q?a.overflow=q:a.overflow=null,t.height=Math.min(r.cappedHeight,N-d.top-d.bottom)}else{const G=f>0?d.top+d.bottom:0;l.scalable=!0,l.height=Math.max(y,L-G),t.height=Math.max(y,N-G)}t.ref.credits&&l.heightCurrent&&(t.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},P_=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},q_=t=>{let e=0,n=0;const r=t.ref.list,s=r.childViews[0],i=s.childViews.filter(_=>_.rect.element.height),a=t.query("GET_ACTIVE_ITEMS").map(_=>i.find(v=>v.id===_.id)).filter(_=>_);if(a.length===0)return{visual:e,bounds:n};const l=s.rect.element.width,o=pl(s,a,r.dragCoordinates),u=a[0].rect.element,f=u.marginTop+u.marginBottom,m=u.marginLeft+u.marginRight,h=u.width+m,g=u.height+f,d=typeof o<"u"&&o>=0?1:0,T=a.find(_=>_.markedForRemoval&&_.opacity<.45)?-1:0,y=a.length+d+T,A=dl(l,h);return A===1?a.forEach(_=>{const v=_.rect.element.height+f;n+=v,e+=v*_.opacity}):(n=Math.ceil(y/A)*g,e=n),{visual:e,bounds:n}},B_=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:e===0?null:e}},_l=(t,e)=>{const n=t.query("GET_ALLOW_REPLACE"),r=t.query("GET_ALLOW_MULTIPLE"),s=t.query("GET_TOTAL_ITEMS");let i=t.query("GET_MAX_FILES");const a=e.length;return!r&&a>1?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:ge("warning",0,"Max files")}),!0):(i=r?i:1,!r&&n?!1:Jn(i)&&s+a>i?(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:ge("warning",0,"Max files")}),!0):!1)},G_=(t,e,n)=>{const r=t.childViews[0];return pl(r,e,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},sc=t=>{const e=t.query("GET_ALLOW_DROP"),n=t.query("GET_DISABLED"),r=e&&!n;if(r&&!t.ref.hopper){const s=I_(t.element,i=>{const a=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return t.query("GET_DROP_VALIDATION")?i.every(o=>yn("ALLOW_HOPPER_ITEM",o,{query:t.query}).every(u=>u===!0)&&a(o)):!0},{filterItems:i=>{const a=t.query("GET_IGNORED_FILES");return i.filter(l=>cn(l)?!a.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});s.onload=(i,a)=>{const o=t.ref.list.childViews[0].childViews.filter(f=>f.rect.element.height),u=t.query("GET_ACTIVE_ITEMS").map(f=>o.find(m=>m.id===f.id)).filter(f=>f);it("ADD_ITEMS",i,{dispatch:t.dispatch}).then(f=>{if(_l(t,f))return!1;t.dispatch("ADD_ITEMS",{items:f,index:G_(t.ref.list,u,a),interactionMethod:et.DROP})}),t.dispatch("DID_DROP",{position:a}),t.dispatch("DID_END_DRAG",{position:a})},s.ondragstart=i=>{t.dispatch("DID_START_DRAG",{position:i})},s.ondrag=cf(i=>{t.dispatch("DID_DRAG",{position:i})}),s.ondragend=i=>{t.dispatch("DID_END_DRAG",{position:i})},t.ref.hopper=s,t.ref.drip=t.appendChildView(t.createChildView(HT))}else!r&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},ic=(t,e)=>{const n=t.query("GET_ALLOW_BROWSE"),r=t.query("GET_DISABLED"),s=n&&!r;s&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(xT,{...e,onload:i=>{it("ADD_ITEMS",i,{dispatch:t.dispatch}).then(a=>{if(_l(t,a))return!1;t.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:et.BROWSE})})}}),0):!s&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},ac=t=>{const e=t.query("GET_ALLOW_PASTE"),n=t.query("GET_DISABLED"),r=e&&!n;r&&!t.ref.paster?(t.ref.paster=R_(),t.ref.paster.onload=s=>{it("ADD_ITEMS",s,{dispatch:t.dispatch}).then(i=>{if(_l(t,i))return!1;t.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:et.PASTE})})}):!r&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},U_=qe({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{ic(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{sc(t)},DID_SET_ALLOW_PASTE:({root:t})=>{ac(t)},DID_SET_DISABLED:({root:t,props:e})=>{sc(t),ac(t),ic(t,e),t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),k_=_e({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:M_,write:x_,destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",ks),t.element.removeEventListener("gesturestart",ks)},mixins:{styles:["height"]}}),F_=(t={})=>{let e=null;const n=Gs(),r=r1($1(n),[l0,j1(n)],[D0,H1(n)]);r.dispatch("SET_OPTIONS",{options:t});const s=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);let i=null,a=!1,l=!1,o=null,u=null;const f=()=>{a||(a=!0),clearTimeout(i),i=setTimeout(()=>{a=!1,o=null,u=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",f);const m=k_(r,{id:ol()});let h=!1,g=!1;const d={_read:()=>{a&&(u=window.innerWidth,o||(o=u),!l&&u!==o&&(r.dispatch("DID_START_RESIZE"),l=!0)),g&&h&&(h=m.element.offsetParent===null),!h&&(m._read(),g=m.rect.element.hidden)},_write:I=>{const O=r.processActionQueue().filter(D=>!/^SET_/.test(D.type));h&&!O.length||(_(O),h=m._write(I,O,l),Y1(r.query("GET_ITEMS")),h&&r.processDispatchQueue())}},T=I=>O=>{const D={type:I};if(!O)return D;if(O.hasOwnProperty("error")&&(D.error=O.error?{...O.error}:null),O.status&&(D.status={...O.status}),O.file&&(D.output=O.file),O.source)D.file=O.source;else if(O.item||O.id){const P=O.item?O.item:r.query("GET_ITEM",O.id);D.file=P?Ue(P):null}return O.items&&(D.items=O.items.map(Ue)),/progress/.test(I)&&(D.progress=O.progress),O.hasOwnProperty("origin")&&O.hasOwnProperty("target")&&(D.origin=O.origin,D.target=O.target),D},y={DID_DESTROY:T("destroy"),DID_INIT:T("init"),DID_THROW_MAX_FILES:T("warning"),DID_INIT_ITEM:T("initfile"),DID_START_ITEM_LOAD:T("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:T("addfileprogress"),DID_LOAD_ITEM:T("addfile"),DID_THROW_ITEM_INVALID:[T("error"),T("addfile")],DID_THROW_ITEM_LOAD_ERROR:[T("error"),T("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[T("error"),T("removefile")],DID_PREPARE_OUTPUT:T("preparefile"),DID_START_ITEM_PROCESSING:T("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:T("processfileprogress"),DID_ABORT_ITEM_PROCESSING:T("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:T("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:T("processfiles"),DID_REVERT_ITEM_PROCESSING:T("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[T("error"),T("processfile")],DID_REMOVE_ITEM:T("removefile"),DID_UPDATE_ITEMS:T("updatefiles"),DID_ACTIVATE_ITEM:T("activatefile"),DID_REORDER_ITEMS:T("reorderfiles")},A=I=>{const O={pond:M,...I};delete O.type,m.element.dispatchEvent(new CustomEvent(`FilePond:${I.type}`,{detail:O,bubbles:!0,cancelable:!0,composed:!0}));const D=[];I.hasOwnProperty("error")&&D.push(I.error),I.hasOwnProperty("file")&&D.push(I.file);const P=["type","error","file"];Object.keys(I).filter(k=>!P.includes(k)).forEach(k=>D.push(I[k])),M.fire(I.type,...D);const U=r.query(`GET_ON${I.type.toUpperCase()}`);U&&U(...D)},_=I=>{I.length&&I.filter(O=>y[O.type]).forEach(O=>{const D=y[O.type];(Array.isArray(D)?D:[D]).forEach(P=>{O.type==="DID_INIT_ITEM"?A(P(O.data)):setTimeout(()=>{A(P(O.data))},0)})})},v=I=>r.dispatch("SET_OPTIONS",{options:I}),L=I=>r.query("GET_ACTIVE_ITEM",I),N=I=>new Promise((O,D)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:I,success:P=>{O(P)},failure:P=>{D(P)}})}),G=(I,O={})=>new Promise((D,P)=>{F([{source:I,options:O}],{index:O.index}).then(U=>D(U&&U[0])).catch(P)}),$=I=>I.file&&I.id,q=(I,O)=>(typeof I=="object"&&!$(I)&&!O&&(O=I,I=void 0),r.dispatch("REMOVE_ITEM",{...O,query:I}),r.query("GET_ACTIVE_ITEM",I)===null),F=(...I)=>new Promise((O,D)=>{const P=[],U={};if(Xs(I[0]))P.push.apply(P,I[0]),Object.assign(U,I[1]||{});else{const k=I[I.length-1];typeof k=="object"&&!(k instanceof Blob)&&Object.assign(U,I.pop()),P.push(...I)}r.dispatch("ADD_ITEMS",{items:P,index:U.index,interactionMethod:et.API,success:O,failure:D})}),j=()=>r.query("GET_ACTIVE_ITEMS"),E=I=>new Promise((O,D)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:I,success:P=>{O(P)},failure:P=>{D(P)}})}),S=(...I)=>{const O=Array.isArray(I[0])?I[0]:I,D=O.length?O:j();return Promise.all(D.map(N))},R=(...I)=>{const O=Array.isArray(I[0])?I[0]:I;if(!O.length){const D=j().filter(P=>!(P.status===te.IDLE&&P.origin===Ie.LOCAL)&&P.status!==te.PROCESSING&&P.status!==te.PROCESSING_COMPLETE&&P.status!==te.PROCESSING_REVERT_ERROR);return Promise.all(D.map(E))}return Promise.all(O.map(E))},w=(...I)=>{const O=Array.isArray(I[0])?I[0]:I;let D;typeof O[O.length-1]=="object"?D=O.pop():Array.isArray(I[0])&&(D=I[1]);const P=j();return O.length?O.map(k=>rn(k)?P[k]?P[k].id:null:k).filter(k=>k).map(k=>q(k,D)):Promise.all(P.map(k=>q(k,D)))},M={...Qs(),...d,...V1(r,n),setOptions:v,addFile:G,addFiles:F,getFile:L,processFile:E,prepareFile:N,removeFile:q,moveFile:(I,O)=>r.dispatch("MOVE_ITEM",{query:I,index:O}),getFiles:j,processFiles:R,removeFiles:w,prepareFiles:S,sort:I=>r.dispatch("SORT",{compare:I}),browse:()=>{var I=m.element.querySelector("input[type=file]");I&&I.click()},destroy:()=>{M.fire("destroy",m.element),r.dispatch("ABORT_ALL"),m._destroy(),window.removeEventListener("resize",f),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:I=>No(m.element,I),insertAfter:I=>Lo(m.element,I),appendTo:I=>I.appendChild(m.element),replaceElement:I=>{No(m.element,I),I.parentNode.removeChild(I),e=I},restoreElement:()=>{e&&(Lo(e,m.element),m.element.parentNode.removeChild(m.element),e=null)},isAttachedTo:I=>m.element===I||e===I,element:{get:()=>m.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Wt(M)},uf=(t={})=>{const e={};return pe(Gs(),(r,s)=>{e[r]=s[0]}),F_({...e,...t})},$_=t=>t.charAt(0).toLowerCase()+t.slice(1),V_=t=>of(t.replace(/^data-/,"")),ff=(t,e)=>{pe(e,(n,r)=>{pe(t,(s,i)=>{const a=new RegExp(n);if(!a.test(s)||(delete t[s],r===!1))return;if(Pe(r)){t[r]=i;return}const o=r.group;Ae(r)&&!t[o]&&(t[o]={}),t[o][$_(s.replace(a,""))]=i}),r.mapping&&ff(t[r.group],r.mapping)})},H_=(t,e={})=>{const n=[];pe(t.attributes,s=>{n.push(t.attributes[s])});const r=n.filter(s=>s.name).reduce((s,i)=>{const a=be(t,i.name);return s[V_(i.name)]=a===i.name?!0:a,s},{});return ff(r,e),r},j_=(t,e={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};yn("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...e},s=H_(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(s).forEach(a=>{Ae(s[a])?(Ae(r[a])||(r[a]={}),Object.assign(r[a],s[a])):r[a]=s[a]}),r.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const i=uf(r);return t.files&&Array.from(t.files).forEach(a=>{i.addFile(a)}),i.replaceElement(t),i},z_=(...t)=>n1(t[0])?j_(...t):uf(...t),W_=["fire","_read","_write"],lc=t=>{const e={};return Du(t,e,W_),e},Y_=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>e[r]),X_=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(e),r=new Worker(n);return{transfer:(s,i)=>{},post:(s,i,a)=>{const l=ol();r.onmessage=o=>{o.data.id===l&&i(o.data.message)},r.postMessage({id:l,message:s},a)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},K_=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>{e(r)},r.onerror=s=>{n(s)},r.src=t}),hf=(t,e)=>{const n=t.slice(0,t.size,t.type);return n.lastModifiedDate=t.lastModifiedDate,n.name=e,n},Z_=t=>hf(t,t.name),oc=[],Q_=t=>{if(oc.includes(t))return;oc.push(t);const e=t({addFilter:K1,utils:{Type:B,forin:pe,isString:Pe,isFile:cn,toNaturalFileSize:Hu,replaceInString:Y_,getExtensionFromFilename:Js,getFilenameWithoutExtension:Fu,guesstimateMimeType:tf,getFileFromBlob:Zn,getFilenameFromURL:$r,createRoute:qe,createWorker:X_,createView:_e,createItemAPI:Ue,loadImage:K_,copyFile:Z_,renameFile:hf,createBlob:Gu,applyFilterChain:it,text:me,getNumericAspectRatioFromString:Pu},views:{fileActionButton:Vu}});Z1(e.options)},J_=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",ey=()=>"Promise"in window,ty=()=>"slice"in Blob.prototype,ny=()=>"URL"in window&&"createObjectURL"in window.URL,ry=()=>"visibilityState"in document,sy=()=>"performance"in window,iy=()=>"supports"in(window.CSS||{}),ay=()=>/MSIE|Trident/.test(window.navigator.userAgent),cc=(()=>{const t=Ou()&&!J_()&&ry()&&ey()&&ty()&&ny()&&sy()&&(iy()||ay());return()=>t})(),Ft={apps:[]},ly="filepond",bn=()=>{};let uc={},Cs=bn,ca=bn,fc=bn,hc=bn,Fa=bn,dc=bn,pc=bn;if(cc()){S1(()=>{Ft.apps.forEach(n=>n._read())},n=>{Ft.apps.forEach(r=>r._write(n))});const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:cc,create:Cs,destroy:ca,parse:fc,find:hc,registerPlugin:Fa,setOptions:pc}})),document.removeEventListener("DOMContentLoaded",t)};document.readyState!=="loading"?setTimeout(()=>t(),0):document.addEventListener("DOMContentLoaded",t);const e=()=>pe(Gs(),(n,r)=>{uc[n]=r[1]});uc={},e(),Cs=(...n)=>{const r=z_(...n);return r.on("destroy",ca),Ft.apps.push(r),lc(r)},ca=n=>{const r=Ft.apps.findIndex(s=>s.isAttachedTo(n));return r>=0?(Ft.apps.splice(r,1)[0].restoreElement(),!0):!1},fc=n=>Array.from(n.querySelectorAll(`.${ly}`)).filter(i=>!Ft.apps.find(a=>a.isAttachedTo(i))).map(i=>Cs(i)),hc=n=>{const r=Ft.apps.find(s=>s.isAttachedTo(n));return r?lc(r):null},Fa=(...n)=>{n.forEach(Q_),e()},dc=()=>{const n={};return pe(Gs(),(r,s)=>{n[r]=s[0]}),n},pc=n=>(Ae(n)&&(Ft.apps.forEach(r=>{r.setOptions(n)}),Q1(n)),dc())}/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const df=({addFilter:t,utils:e})=>{const{Type:n,isString:r,replaceInString:s,guesstimateMimeType:i,getExtensionFromFilename:a,getFilenameFromURL:l}=e,o=(g,d)=>{const T=(/^[^/]+/.exec(g)||[]).pop(),y=d.slice(0,-2);return T===y},u=(g,d)=>g.some(T=>/\*$/.test(T)?o(d,T):T===d),f=g=>{let d="";if(r(g)){const T=l(g),y=a(T);y&&(d=i(y))}else d=g.type;return d},m=(g,d,T)=>{if(d.length===0)return!0;const y=f(g);return T?new Promise((A,_)=>{T(g,y).then(v=>{u(d,v)?A():_()}).catch(_)}):u(d,y)},h=g=>d=>g[d]===null?!1:g[d]||d;return t("SET_ATTRIBUTE_TO_OPTION_MAP",g=>Object.assign(g,{accept:"acceptedFileTypes"})),t("ALLOW_HOPPER_ITEM",(g,{query:d})=>d("GET_ALLOW_FILE_TYPE_VALIDATION")?m(g,d("GET_ACCEPTED_FILE_TYPES")):!0),t("LOAD_FILE",(g,{query:d})=>new Promise((T,y)=>{if(!d("GET_ALLOW_FILE_TYPE_VALIDATION")){T(g);return}const A=d("GET_ACCEPTED_FILE_TYPES"),_=d("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),v=m(g,A,_),L=()=>{const N=A.map(h(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter($=>$!==!1),G=N.filter(($,q)=>N.indexOf($)===q);y({status:{main:d("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:s(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:G.join(", "),allButLastType:G.slice(0,-1).join(", "),lastType:G[G.length-1]})}})};if(typeof v=="boolean")return v?T(g):L();v.then(()=>{T(g)}).catch(L)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},oy=typeof window<"u"&&typeof window.document<"u";oy&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:df}));/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const cy=t=>/^image/.test(t.type),gc=(t,e)=>qr(t.x*e,t.y*e),mc=(t,e)=>qr(t.x+e.x,t.y+e.y),uy=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?{x:0,y:0}:qr(t.x/e,t.y/e)},vs=(t,e,n)=>{const r=Math.cos(e),s=Math.sin(e),i=qr(t.x-n.x,t.y-n.y);return qr(n.x+r*i.x-s*i.y,n.y+s*i.x+r*i.y)},qr=(t=0,e=0)=>({x:t,y:e}),ke=(t,e,n=1,r)=>{if(typeof t=="string")return parseFloat(t)*n;if(typeof t=="number")return t*(r?e[r]:Math.min(e.width,e.height))},fy=(t,e,n)=>{const r=t.borderStyle||t.lineStyle||"solid",s=t.backgroundColor||t.fontColor||"transparent",i=t.borderColor||t.lineColor||"transparent",a=ke(t.borderWidth||t.lineWidth,e,n),l=t.lineCap||"round",o=t.lineJoin||"round",u=typeof r=="string"?"":r.map(m=>ke(m,e,n)).join(","),f=t.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":o,"stroke-width":a||0,"stroke-dasharray":u,stroke:i,fill:s,opacity:f}},Ye=t=>t!=null,hy=(t,e,n=1)=>{let r=ke(t.x,e,n,"width")||ke(t.left,e,n,"width"),s=ke(t.y,e,n,"height")||ke(t.top,e,n,"height"),i=ke(t.width,e,n,"width"),a=ke(t.height,e,n,"height"),l=ke(t.right,e,n,"width"),o=ke(t.bottom,e,n,"height");return Ye(s)||(Ye(a)&&Ye(o)?s=e.height-a-o:s=o),Ye(r)||(Ye(i)&&Ye(l)?r=e.width-i-l:r=l),Ye(i)||(Ye(r)&&Ye(l)?i=e.width-r-l:i=0),Ye(a)||(Ye(s)&&Ye(o)?a=e.height-s-o:a=0),{x:r||0,y:s||0,width:i||0,height:a||0}},dy=t=>t.map((e,n)=>`${n===0?"M":"L"} ${e.x} ${e.y}`).join(" "),bt=(t,e)=>Object.keys(e).forEach(n=>t.setAttribute(n,e[n])),py="http://www.w3.org/2000/svg",Fn=(t,e)=>{const n=document.createElementNS(py,t);return e&&bt(n,e),n},gy=t=>bt(t,{...t.rect,...t.styles}),my=t=>{const e=t.rect.x+t.rect.width*.5,n=t.rect.y+t.rect.height*.5,r=t.rect.width*.5,s=t.rect.height*.5;return bt(t,{cx:e,cy:n,rx:r,ry:s,...t.styles})},Ey={contain:"xMidYMid meet",cover:"xMidYMid slice"},Ty=(t,e)=>{bt(t,{...t.rect,...t.styles,preserveAspectRatio:Ey[e.fit]||"none"})},_y={left:"start",center:"middle",right:"end"},yy=(t,e,n,r)=>{const s=ke(e.fontSize,n,r),i=e.fontFamily||"sans-serif",a=e.fontWeight||"normal",l=_y[e.textAlign]||"start";bt(t,{...t.rect,...t.styles,"stroke-width":0,"font-weight":a,"font-size":s,"font-family":i,"text-anchor":l}),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},by=(t,e,n,r)=>{bt(t,{...t.rect,...t.styles,fill:"none"});const s=t.childNodes[0],i=t.childNodes[1],a=t.childNodes[2],l=t.rect,o={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(bt(s,{x1:l.x,y1:l.y,x2:o.x,y2:o.y}),!e.lineDecoration)return;i.style.display="none",a.style.display="none";const u=uy({x:o.x-l.x,y:o.y-l.y}),f=ke(.05,n,r);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const m=gc(u,f),h=mc(l,m),g=vs(l,2,h),d=vs(l,-2,h);bt(i,{style:"display:block;",d:`M${g.x},${g.y} L${l.x},${l.y} L${d.x},${d.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const m=gc(u,-f),h=mc(o,m),g=vs(o,2,h),d=vs(o,-2,h);bt(a,{style:"display:block;",d:`M${g.x},${g.y} L${o.x},${o.y} L${d.x},${d.y}`})}},Iy=(t,e,n,r)=>{bt(t,{...t.styles,fill:"none",d:dy(e.points.map(s=>({x:ke(s.x,n,r,"width"),y:ke(s.y,n,r,"height")})))})},Rs=t=>e=>Fn(t,{id:e.id}),Ay=t=>{const e=Fn("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},vy=t=>{const e=Fn("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=Fn("line");e.appendChild(n);const r=Fn("path");e.appendChild(r);const s=Fn("path");return e.appendChild(s),e},Ry={image:Ay,rect:Rs("rect"),ellipse:Rs("ellipse"),text:Rs("text"),path:Rs("path"),line:vy},Oy={rect:gy,ellipse:my,image:Ty,text:yy,path:Iy,line:by},wy=(t,e)=>Ry[t](e),Sy=(t,e,n,r,s)=>{e!=="path"&&(t.rect=hy(n,r,s)),t.styles=fy(n,r,s),Oy[e](t,n,r,s)},Ny=["x","y","left","top","right","bottom","width","height"],Ly=t=>typeof t=="string"&&/%/.test(t)?parseFloat(t)/100:t,Cy=t=>{const[e,n]=t,r=n.points?{}:Ny.reduce((s,i)=>(s[i]=Ly(n[i]),s),{});return[e,{zIndex:0,...n,...r}]},Dy=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,My=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:n})=>{if(!n.dirty)return;const{crop:r,resize:s,markup:i}=n,a=n.width,l=n.height;let o=r.width,u=r.height;if(s){const{size:g}=s;let d=g&&g.width,T=g&&g.height;const y=s.mode,A=s.upscale;d&&!T&&(T=d),T&&!d&&(d=T);const _=o<d&&u<T;if(!_||_&&A){let v=d/o,L=T/u;if(y==="force")o=d,u=T;else{let N;y==="cover"?N=Math.max(v,L):y==="contain"&&(N=Math.min(v,L)),o=o*N,u=u*N}}}const f={width:a,height:l};e.element.setAttribute("width",f.width),e.element.setAttribute("height",f.height);const m=Math.min(a/o,l/u);e.element.innerHTML="";const h=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");i.filter(h).map(Cy).sort(Dy).forEach(g=>{const[d,T]=g,y=wy(d,T);Sy(y,d,T,f,m),e.element.appendChild(y)})}}),Or=(t,e)=>({x:t,y:e}),xy=(t,e)=>t.x*e.x+t.y*e.y,Ec=(t,e)=>Or(t.x-e.x,t.y-e.y),Py=(t,e)=>xy(Ec(t,e),Ec(t,e)),Tc=(t,e)=>Math.sqrt(Py(t,e)),_c=(t,e)=>{const n=t,r=1.5707963267948966,s=e,i=1.5707963267948966-e,a=Math.sin(r),l=Math.sin(s),o=Math.sin(i),u=Math.cos(i),f=n/a,m=f*l,h=f*o;return Or(u*m,u*h)},qy=(t,e)=>{const n=t.width,r=t.height,s=_c(n,e),i=_c(r,e),a=Or(t.x+Math.abs(s.x),t.y-Math.abs(s.y)),l=Or(t.x+t.width+Math.abs(i.y),t.y+Math.abs(i.x)),o=Or(t.x-Math.abs(i.y),t.y+t.height-Math.abs(i.x));return{width:Tc(a,l),height:Tc(a,o)}},By=(t,e,n=1)=>{const r=t.height/t.width;let s=1,i=e,a=1,l=r;l>i&&(l=i,a=l/r);const o=Math.max(s/a,i/l),u=t.width/(n*o*a),f=u*e;return{width:u,height:f}},pf=(t,e,n,r)=>{const s=r.x>.5?1-r.x:r.x,i=r.y>.5?1-r.y:r.y,a=s*2*t.width,l=i*2*t.height,o=qy(e,n);return Math.max(o.width/a,o.height/l)},gf=(t,e)=>{let n=t.width,r=n*e;r>t.height&&(r=t.height,n=r/e);const s=(t.width-n)*.5,i=(t.height-r)*.5;return{x:s,y:i,width:n,height:r}},Gy=(t,e={})=>{let{zoom:n,rotation:r,center:s,aspectRatio:i}=e;i||(i=t.height/t.width);const a=By(t,i,n),l={width:a.width,height:a.height},o=typeof e.scaleToFit>"u"||e.scaleToFit,u=pf(t,gf(l,i),r,o?s:{x:.5,y:.5}),f=n*u;return{widthFloat:a.width/f,heightFloat:a.height/f,width:Math.round(a.width/f),height:Math.round(a.height/f)}},yt={type:"spring",stiffness:.5,damping:.45,mass:10},Uy=t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:n})=>{e.appendChild(n.image)}}),ky=t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:yt,originY:yt,scaleX:yt,scaleY:yt,translateX:yt,translateY:yt,rotateZ:yt}},create:({root:e,props:n})=>{n.width=n.image.width,n.height=n.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(Uy(t),{image:n.image}))},write:({root:e,props:n})=>{const{flip:r}=n.crop,{bitmap:s}=e.ref;s.scaleX=r.horizontal?-1:1,s.scaleY=r.vertical?-1:1}}),Fy=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:n}){n.background&&(e.element.style.backgroundColor=n.background)},create:({root:e,props:n})=>{e.ref.image=e.appendChildView(e.createChildView(ky(t),Object.assign({},n))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(My(t),Object.assign({},n))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const r=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?e.element.dataset.transparencyIndicator=r:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:n,shouldOptimize:r})=>{const{crop:s,markup:i,resize:a,dirty:l,width:o,height:u}=n;e.ref.image.crop=s;const f={width:o,height:u,center:{x:o*.5,y:u*.5}},m={width:e.ref.image.width,height:e.ref.image.height},h={x:s.center.x*m.width,y:s.center.y*m.height},g={x:f.center.x-m.width*s.center.x,y:f.center.y-m.height*s.center.y},d=Math.PI*2+s.rotation%(Math.PI*2),T=s.aspectRatio||m.height/m.width,y=typeof s.scaleToFit>"u"||s.scaleToFit,A=pf(m,gf(f,T),d,y?s.center:{x:.5,y:.5}),_=s.zoom*A;i&&i.length?(e.ref.createMarkup(),e.ref.markup.width=o,e.ref.markup.height=u,e.ref.markup.resize=a,e.ref.markup.dirty=l,e.ref.markup.markup=i,e.ref.markup.crop=Gy(m,s)):e.ref.markup&&e.ref.destroyMarkup();const v=e.ref.image;if(r){v.originX=null,v.originY=null,v.translateX=null,v.translateY=null,v.rotateZ=null,v.scaleX=null,v.scaleY=null;return}v.originX=h.x,v.originY=h.y,v.translateX=g.x,v.translateY=g.y,v.rotateZ=d,v.scaleX=_,v.scaleY=_}}),$y=t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:yt,scaleY:yt,translateY:yt,opacity:{type:"tween",duration:400}}},create:({root:e,props:n})=>{e.ref.clip=e.appendChildView(e.createChildView(Fy(t),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:e,props:n,shouldOptimize:r})=>{const{clip:s}=e.ref,{image:i,crop:a,markup:l,resize:o,dirty:u}=n;if(s.crop=a,s.markup=l,s.resize=o,s.dirty=u,s.opacity=r?0:1,r||e.rect.element.hidden)return;const f=i.height/i.width;let m=a.aspectRatio||f;const h=e.rect.inner.width,g=e.rect.inner.height;let d=e.query("GET_IMAGE_PREVIEW_HEIGHT");const T=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),y=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),A=e.query("GET_PANEL_ASPECT_RATIO"),_=e.query("GET_ALLOW_MULTIPLE");A&&!_&&(d=h*A,m=A);let v=d!==null?d:Math.max(T,Math.min(h*m,y)),L=v/m;L>h&&(L=h,v=L*m),v>g&&(v=g,L=g/m),s.width=L,s.height=v}});let Vy=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,yc=0;const Hy=t=>t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:n})=>{let r=Vy;if(document.querySelector("base")){const s=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+s+"#")}yc++,e.element.classList.add(`filepond--image-preview-overlay-${n.status}`),e.element.innerHTML=r.replace(/__UID__/g,yc)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),jy=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then(e=>{self.postMessage({id:t.data.id,message:e},[e])})}},zy=function(){self.onmessage=t=>{const e=t.data.message.imageData,n=t.data.message.colorMatrix,r=e.data,s=r.length,i=n[0],a=n[1],l=n[2],o=n[3],u=n[4],f=n[5],m=n[6],h=n[7],g=n[8],d=n[9],T=n[10],y=n[11],A=n[12],_=n[13],v=n[14],L=n[15],N=n[16],G=n[17],$=n[18],q=n[19];let F=0,j=0,E=0,S=0,R=0;for(;F<s;F+=4)j=r[F]/255,E=r[F+1]/255,S=r[F+2]/255,R=r[F+3]/255,r[F]=Math.max(0,Math.min((j*i+E*a+S*l+R*o+u)*255,255)),r[F+1]=Math.max(0,Math.min((j*f+E*m+S*h+R*g+d)*255,255)),r[F+2]=Math.max(0,Math.min((j*T+E*y+S*A+R*_+v)*255,255)),r[F+3]=Math.max(0,Math.min((j*L+E*N+S*G+R*$+q)*255,255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},Wy=(t,e)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,s=n.naturalHeight;n=null,e(r,s)},n.src=t},Yy={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},Xy=(t,e,n,r)=>{r!==-1&&t.transform.apply(t,Yy[r](e,n))},Ky=(t,e,n,r)=>{e=Math.round(e),n=Math.round(n);const s=document.createElement("canvas");s.width=e,s.height=n;const i=s.getContext("2d");return r>=5&&r<=8&&([e,n]=[n,e]),Xy(i,e,n,r),i.drawImage(t,0,0,e,n),s},mf=t=>/^image/.test(t.type)&&!/svg/.test(t.type),Zy=10,Qy=10,Jy=t=>{const e=Math.min(Zy/t.width,Qy/t.height),n=document.createElement("canvas"),r=n.getContext("2d"),s=n.width=Math.ceil(t.width*e),i=n.height=Math.ceil(t.height*e);r.drawImage(t,0,0,s,i);let a=null;try{a=r.getImageData(0,0,s,i).data}catch{return null}const l=a.length;let o=0,u=0,f=0,m=0;for(;m<l;m+=4)o+=a[m]*a[m],u+=a[m+1]*a[m+1],f+=a[m+2]*a[m+2];return o=ua(o,l),u=ua(u,l),f=ua(f,l),{r:o,g:u,b:f}},ua=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),eb=(t,e)=>(e=e||document.createElement("canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e),tb=t=>{let e;try{e=new ImageData(t.width,t.height)}catch{e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e},nb=t=>new Promise((e,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{e(r)},r.onerror=s=>{n(s)},r.src=t}),rb=t=>{const e=Hy(t),n=$y(t),{createWorker:r}=t.utils,s=(_,v,L)=>new Promise(N=>{_.ref.imageData||(_.ref.imageData=L.getContext("2d").getImageData(0,0,L.width,L.height));const G=tb(_.ref.imageData);if(!v||v.length!==20)return L.getContext("2d").putImageData(G,0,0),N();const $=r(zy);$.post({imageData:G,colorMatrix:v},q=>{L.getContext("2d").putImageData(q,0,0),$.terminate(),N()},[G.data.buffer])}),i=(_,v)=>{_.removeChildView(v),v.image.width=1,v.image.height=1,v._destroy()},a=({root:_})=>{const v=_.ref.images.shift();return v.opacity=0,v.translateY=-15,_.ref.imageViewBin.push(v),v},l=({root:_,props:v,image:L})=>{const N=v.id,G=_.query("GET_ITEM",{id:N});if(!G)return;const $=G.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},q=_.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let F,j,E=!1;_.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(F=G.getMetadata("markup")||[],j=G.getMetadata("resize"),E=!0);const S=_.appendChildView(_.createChildView(n,{id:N,image:L,crop:$,resize:j,markup:F,dirty:E,background:q,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),_.childViews.length);_.ref.images.push(S),S.opacity=1,S.scaleX=1,S.scaleY=1,S.translateY=0,setTimeout(()=>{_.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:N})},250)},o=({root:_,props:v})=>{const L=_.query("GET_ITEM",{id:v.id});if(!L)return;const N=_.ref.images[_.ref.images.length-1];N.crop=L.getMetadata("crop"),N.background=_.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),_.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(N.dirty=!0,N.resize=L.getMetadata("resize"),N.markup=L.getMetadata("markup"))},u=({root:_,props:v,action:L})=>{if(!/crop|filter|markup|resize/.test(L.change.key)||!_.ref.images.length)return;const N=_.query("GET_ITEM",{id:v.id});if(N){if(/filter/.test(L.change.key)){const G=_.ref.images[_.ref.images.length-1];s(_,L.change.value,G.image);return}if(/crop|markup|resize/.test(L.change.key)){const G=N.getMetadata("crop"),$=_.ref.images[_.ref.images.length-1];if(G&&G.aspectRatio&&$.crop&&$.crop.aspectRatio&&Math.abs(G.aspectRatio-$.crop.aspectRatio)>1e-5){const q=a({root:_});l({root:_,props:v,image:eb(q.image)})}else o({root:_,props:v})}}},f=_=>{const L=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),N=L?parseInt(L[1]):null;return N!==null&&N<=58?!1:"createImageBitmap"in window&&mf(_)},m=({root:_,props:v})=>{const{id:L}=v,N=_.query("GET_ITEM",L);if(!N)return;const G=URL.createObjectURL(N.file);Wy(G,($,q)=>{_.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:L,width:$,height:q})})},h=({root:_,props:v})=>{const{id:L}=v,N=_.query("GET_ITEM",L);if(!N)return;const G=URL.createObjectURL(N.file),$=()=>{nb(G).then(q)},q=F=>{URL.revokeObjectURL(G);const E=(N.getMetadata("exif")||{}).orientation||-1;let{width:S,height:R}=F;if(!S||!R)return;E>=5&&E<=8&&([S,R]=[R,S]);const w=Math.max(1,window.devicePixelRatio*.75),I=_.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*w,O=R/S,D=_.rect.element.width,P=_.rect.element.height;let U=D,k=U*O;O>1?(U=Math.min(S,D*I),k=U*O):(k=Math.min(R,P*I),U=k/O);const Z=Ky(F,U,k,E),ne=()=>{const X=_.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Jy(data):null;N.setMetadata("color",X,!0),"close"in F&&F.close(),_.ref.overlayShadow.opacity=1,l({root:_,props:v,image:Z})},J=N.getMetadata("filter");J?s(_,J,Z).then(ne):ne()};if(f(N.file)){const F=r(jy);F.post({file:N.file},j=>{if(F.terminate(),!j){$();return}q(j)})}else $()},g=({root:_})=>{const v=_.ref.images[_.ref.images.length-1];v.translateY=0,v.scaleX=1,v.scaleY=1,v.opacity=1},d=({root:_})=>{_.ref.overlayShadow.opacity=1,_.ref.overlayError.opacity=0,_.ref.overlaySuccess.opacity=0},T=({root:_})=>{_.ref.overlayShadow.opacity=.25,_.ref.overlayError.opacity=1},y=({root:_})=>{_.ref.overlayShadow.opacity=.25,_.ref.overlaySuccess.opacity=1},A=({root:_})=>{_.ref.images=[],_.ref.imageData=null,_.ref.imageViewBin=[],_.ref.overlayShadow=_.appendChildView(_.createChildView(e,{opacity:0,status:"idle"})),_.ref.overlaySuccess=_.appendChildView(_.createChildView(e,{opacity:0,status:"success"})),_.ref.overlayError=_.appendChildView(_.createChildView(e,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:A,styles:["height"],apis:["height"],destroy:({root:_})=>{_.ref.images.forEach(v=>{v.image.width=1,v.image.height=1})},didWriteView:({root:_})=>{_.ref.images.forEach(v=>{v.dirty=!1})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:g,DID_IMAGE_PREVIEW_CONTAINER_CREATE:m,DID_FINISH_CALCULATE_PREVIEWSIZE:h,DID_UPDATE_ITEM_METADATA:u,DID_THROW_ITEM_LOAD_ERROR:T,DID_THROW_ITEM_PROCESSING_ERROR:T,DID_THROW_ITEM_INVALID:T,DID_COMPLETE_ITEM_PROCESSING:y,DID_START_ITEM_PROCESSING:d,DID_REVERT_ITEM_PROCESSING:d},({root:_})=>{const v=_.ref.imageViewBin.filter(L=>L.opacity===0);_.ref.imageViewBin=_.ref.imageViewBin.filter(L=>L.opacity>0),v.forEach(L=>i(_,L)),v.length=0})})},Ef=t=>{const{addFilter:e,utils:n}=t,{Type:r,createRoute:s,isFile:i}=n,a=rb(t);return e("CREATE_VIEW",l=>{const{is:o,view:u,query:f}=l;if(!o("file")||!f("GET_ALLOW_IMAGE_PREVIEW"))return;const m=({root:y,props:A})=>{const{id:_}=A,v=f("GET_ITEM",_);if(!v||!i(v.file)||v.archived)return;const L=v.file;if(!cy(L)||!f("GET_IMAGE_PREVIEW_FILTER_ITEM")(v))return;const N="createImageBitmap"in(window||{}),G=f("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!N&&G&&L.size>G)return;y.ref.imagePreview=u.appendChildView(u.createChildView(a,{id:_}));const $=y.query("GET_IMAGE_PREVIEW_HEIGHT");$&&y.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:v.id,height:$});const q=!N&&L.size>f("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");y.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:_},q)},h=(y,A)=>{if(!y.ref.imagePreview)return;let{id:_}=A;const v=y.query("GET_ITEM",{id:_});if(!v)return;const L=y.query("GET_PANEL_ASPECT_RATIO"),N=y.query("GET_ITEM_PANEL_ASPECT_RATIO"),G=y.query("GET_IMAGE_PREVIEW_HEIGHT");if(L||N||G)return;let{imageWidth:$,imageHeight:q}=y.ref;if(!$||!q)return;const F=y.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),j=y.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),S=(v.getMetadata("exif")||{}).orientation||-1;if(S>=5&&S<=8&&([$,q]=[q,$]),!mf(v.file)||y.query("GET_IMAGE_PREVIEW_UPSCALE")){const D=2048/$;$*=D,q*=D}const R=q/$,w=(v.getMetadata("crop")||{}).aspectRatio||R;let M=Math.max(F,Math.min(q,j));const I=y.rect.element.width,O=Math.min(I*w,M);y.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:v.id,height:O})},g=({root:y})=>{y.ref.shouldRescale=!0},d=({root:y,action:A})=>{A.change.key==="crop"&&(y.ref.shouldRescale=!0)},T=({root:y,action:A})=>{y.ref.imageWidth=A.width,y.ref.imageHeight=A.height,y.ref.shouldRescale=!0,y.ref.shouldDrawPreview=!0,y.dispatch("KICK")};u.registerWriter(s({DID_RESIZE_ROOT:g,DID_STOP_RESIZE:g,DID_LOAD_ITEM:m,DID_IMAGE_PREVIEW_CALCULATE_SIZE:T,DID_UPDATE_ITEM_METADATA:d},({root:y,props:A})=>{y.ref.imagePreview&&(y.rect.element.hidden||(y.ref.shouldRescale&&(h(y,A),y.ref.shouldRescale=!1),y.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{y.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:A.id})})}),y.ref.shouldDrawPreview=!1)))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},sb=typeof window<"u"&&typeof window.document<"u";sb&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ef}));Fa(df,Ef);(function(){const t=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{color:[]},{background:[]}],[{align:[]}],["image","video"],["clean"]],e=document.getElementById("quill-snow-container");if(e){const r=new x(e,{modules:{toolbar:t},theme:"snow"});r.on("editor-change",function(s,...i){console.log(i,r.root.getSemanticHTML),document.getElementById("quill-snow-inputholder").value=r.getSemanticHTML()})}const n=document.getElementById("quill-bubble-container");n&&new x(n,{theme:"bubble"}),Cs(document.querySelector('input[type="file"].filepond'),{server:{process:{url:"/internal/ops/async/uploads",method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},onload:r=>r},revert:{url:"/internal/ops/async/uploads",method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}},acceptedFileTypes:["image/*"],allowMultiple:!1,labelIdle:'Drag & Drop your image or <span class="filepond--label-action">Browse</span>'})})()});export default ib();
